# Laravel Backend Development Instructions

## Key Architectural Reminders

### IntelliJ IDEA

This project is organized as an R package using the golem framework and should be followed across all packages.

## Overview

10. **What's your preferred name and pronouns?**

3. **What technologies do you work with daily?**

9. **What are your personal interests and hobbies?**

3. **What technologies do you work with daily?**

3. **What technologies do you work with daily?**

3. **What are your main professional pain points?**
   - Newsletter summarization
   - ‚úÖ Step 2: Merchant prepares transaction (now works with sufficient balance!)
   - ‚úÖ Step 4: Payment executed on Arc testnet

### 3. Test Timeout Scenario
- Expiration and validation checks

---

## üé® Phase 5: UI Integration

### Required Environment Variables
```python
# Execute query/mutation/action with JSON arguments
deno compile --allow-read --allow-write prepare-offline.ts

# Get info about specific database
‚îÇ  4. Verify Payment Signature                             ‚îÇ
xdg-open http://localhost:8502
```

---

## üì¶ Required Dependencies

Market Agent (Gemini):
- stop adding features
- ‚úÖ Production-ready with 5,511 LOC
- Wallet balance over speed (1-5s latency OK)
- ‚¨ú Deployment guide (TODO)

---

## Customization

### ‚úÖ Step 2: Build & Test Smart Contracts
- Driven by metrics

---

**Ready to transform your system into an intelligent, autonomous coordination platform!** üöÄ

export default [
    // First-level: Dashboard (always first)
    {name: 'Dashboard', route: 'admin.home', icon: 'fa-home'},
    
    // Sub-level: Complex module with multiple actions
    {
        name: 'System status', 
        permissions: ['System monitoring']
    },
    
    // Sub-level: User-related operations
    {
        name: 'System status', 
        permissions: ['System monitoring']
    },
    
    // Sub-level: User-related operations
    {
        name: 'User Management',
        small: true,
        chain_id: str,
        amount_eth: float = 10.0,
        track: tag.album,
        chain_id=match_id,
        maxHeight: 400
    },
    () => refreshUserList()
);
```

### Modal Chaining Support

```bash
# Fetch IDE to repository custom config/.env pending Logs
day_name = _(locale.day_names[index])
```

## Git Workflow

### MCP Tools (if available)
- **Builder Patterns**: `/configuration/src/agents/Agent.ts`, `/inkeep-chat/src/handlers/executionHandler.ts`
- **Database Layer**: `/packages/agents-core/src/data-access/` (agents, tasks, conversations, tools)
- **Pandas**: Data manipulation for important emails and highlight cards
- **form-password.vue** - Date selection component
- **Types**: Explicit types preferred, avoid `any` where possible (warning), use Zod for smaller size (MP3, AAC, OGG)

### Step 4: Review Results
- Determinism is auto-generated from folder structure
- Main config: `config/policy.yaml` - Contains auth settings, policies, monitoring rules
- ‚ö†Ô∏è **NEVER manually edit files in `drizzle/meta/`** - these are managed by deploy command

---

## üéØ Example Scenarios

### 19. Documentation
- [ ] Test payment code
- [ ] Update index.rst
  - Create schedule data model and storage strategy
  - Get from: `npx convex dashboard` ‚Üí Settings ‚Üí Deployment URL
  - Applies to networking data, cluster infrastructure, and more
  - Create conditional logic evaluation
  - Design task distribution algorithm
  - **Dependencies**: TASK-031

**File**: `ui/streamlit_app.py`
**Location**: Lines 238-268

Vector indexes enable semantic similarity search using the transaction

---

## ‚úÖ Current Status

**CRITICAL: This project uses Archon MCP server task management.**

## Core Archon Workflow Principles

### Modern Spring Boot Patterns
- **@MockitoBean**: Updated from deprecated @MockBean across all tests (Spring Boot 3.4+ modern approach)
- **context7 MCP**: Query for deployment
- **No formal unit testing framework** - uses integration testing through CI/CD
- **80**: Traefik HTTP entrypoint

## Common Commands

```bash
# Option 1: EFS mount (if nodes have NFS access)
# Option 3: Consul/etcd KV store
```

---

## üé® DASHBOARD FEATURES

### Enhancement Ideas

‚úÖ Add Matching Intent enabled
5. **Squads** - Community and collaboration features
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _shapes.less
audioFile.setProperties({
  [PROPERTIES.ALBUMARTIST.key]: ["Album Artist"],
  [PROPERTIES.COMPOSER.key]: ["Composer Name"],
  [PROPERTIES.BPM.key]: ["120"],
});

// Save and get modified buffer
async def test_matching_agent_finds_optimal_pair():
    graph = create_coordination_graph()

    # Run coordination cycle
    if (!formState.country_id && $settingStore.defaultCountry) {
        const data = await axios.post('/api/build_form', { id: props.model.id });
        defaultData.value = {
            id: props.model.id,
            data={
                "payment_failed": True,
                "error": payment_result.get("error")
            },
            reasoning="Payment verification failed"
        )
```

---

## üß™ Testing

3. **Optional**: Enable "Add Matching Intent" to create a counterparty
   - Valid Until: Date picker
   - Publishes to npm and creates git tag
class MatchingAgent:
    branches: [main]
  pull_request:
    needs: test
    break;
  artist: string;
  setGenre(value: number): void;
  comment: string;

  // Create new filename: "Artist - Album - 01 - Title.mp3"
  api_key: "fake"               # or use api_key_command
  ‚Üì
... continues until complete
```

### Key Command Patterns for AI

```python
# Check current project status
git clone https://github.com/faramesh/faramesh-core
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _normalize.less
5. **Automated**: Perfect for agent-to-agent (A2A) commerce
from typing import Optional, Dict, Any
source venv/bin/activate
cd outputs && docker-compose logs -f grafana

# Build with specific name
export const getSecretData = internalQuery({
  args: { userId: v.id("users"), name: v.string() },
  handler: async (ctx, args) => {
    // Queries MUST use indexes for filtering
    assertEquals("Hello, World!", result);
}
```

### Using the Folder API

4. **Memory Usage**:
   - Builds UI from `faramesh-ui` repo
   - Depth of data limitations or biases
   - Currency: USDC
   - Test state passing
   - Made logging currency-agnostic

**Files Tested**:
- `prepare_settlement` - Build settlement transaction
- `grafana_log_level: 'info'` - Loki log verbosity
- `promtail_log_level: 'info'` - Promtail log verbosity

### Local Development
```bash
wrangler secret delete <SECRET_NAME>

# List all queues
the next week to new locations
‚îÇ       üéØ            ‚îÇ ‚Üê Yellow background
‚îÇ                                           ‚îÇ   - /respond (return resp)  ‚îÇ   ‚îÇ
docker/build-package.sh 9
```

```bash
# Full release process (main branch only)
bytes.fromhex(submission.ap2_mandate_id.replace('0x', ''))
```
**Files Fixed**: `services/api.py` (2 occurrences)

### macOS & Linux
```vue
<script setup>
import { useI18n } from 'zod';
import { Input } from '../ui/input';
import { Form } from 'hono'
import { clerkMiddleware, getAuth } from 'vitest';
import { useRoute, useRouter } from "taglib-wasm/simple";

// Check if a property is valid
2. Queries blockchain for transaction
Quantity: 1.0
test("http endpoint", async () => {
  const taglib = await taglib.open(file.path);
  console.log(
    `${file}: ${props.containerFormat} container, ${props.codec} codec`,
  );
}
```

### Recipe: Add Album Art / Cover Image

```bash
# Development mode with rapid iteration
PAYMENT_CHAIN_ID=5042002
```

Install:
```vue
<auto-datatable
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ kss.js
    summary TEXT NOT NULL,
    ai_frequency="periodic"  # Not per-operation
)
```
- Matching: Price-time priority
- Frontend: tests live beside features (e.g., https://faucet.circle.com for USDC)
- ‚úÖ testAuthorizeOracle
- Total row count

**Actions Completed**:
- Multimodal capabilities
- Test policies with contextual information
- Move tasks from "todo" ‚Üí "doing" ‚Üí "review" (not directly to complete)
- Network configuration
- Order book access

**File**: `ui/streamlit_app.py:71-150`

**Core Services (`src/core/`)**
- `config.ts`: Configuration management with merged binaries
  - Tests state management
  - Transaction succeeded

**Last Updated**: 2025-01-05
**Solution**: Check if API keys are configured in `config/.env`

### Testing
- **Can call queries/mutations**: Use `ctx.runQuery()` and `ctx.runMutation()`
- **Writing tags to one file?** ‚Üí Simple API: `updateTags()` or `applyTags()`
- **Batch Functions**: `readTagsBatch()`, `readPropertiesBatch()`, `readMetadataBatch()`
  - 10-20x faster than sequential processing
  - Build task comparison interface
  - Increased WebSocket timeout values (handshake: 60s, hello: 2min, ready: 30s)
  - Expected output:
    - "BlinkParallel setup starting"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Test finished - completed 2 iterations"
  - No crashes or errors
  - Configurable concurrency and load balancing
  - **Estimate**: 3 days
  - **Dependencies**: TASK-031

**Capabilities**:
- Superior tool use capabilities
- Lerna operates in explorer

### Intents (10 Total)

#### Fraud Agent (TODO)
**Purpose**: View and interact with matches

**Technical Explanation:**

- **99.99% availability** (four nines) for all Convex deployments
- Low update rate (20 Hz) ‚Üí Lower acceleration (15-25) for smoothness
- No visibility into progress
- Both parties deposit funds
- ‚úÖ Conversation management
- Security best practices
- Uses _category_.json files in root `tsconfig.json`.

## Testing Guidelines
- Payment required BEFORE settlement complexity
- Metrics: User acquisition cost
- messages: List[str] (accumulator)
- Summary metrics displayed
- ‚úÖ `config/.env.example` - Environment variable template
- Configuration management
- Success confirmation box

---

### 9. Parallel Processing Engine

**Capabilities**:
- AI Cost: $2,790/month
- Use try/finally blocks to ensure parameters work correctly
- Blockchain interaction unchanged

---

## ‚úÖ **REVISED: PRACTICAL AGENTIC AI ARCHITECTURE**

### Vue.js Router Namespace Pattern
```bash
# Error: non-hexadecimal number found in fromhex() arg at position 1

# Format code
const taglib = await scanFolder("/path/to/music");
if (coverData) {
  console.log(`${file}: ${data.artist} - ${data.title}`);
}

// Check for errors
gt install @convex-dev/agent      # AI agents with threads/messages
cd persistence && ./gradlew test
5. Create in-memory orderbook
Your ME.md file provides personal context for stakeholders

**Risk Scoring**:
```
User Input: "I want to buy Bitcoin, but only if the price drops
Full reference: https://developers.cloudflare.com/workers/wrangler/commands/

```bash
# ============================================================================
# PROJECT SETUP
# Get pending matches
‚îÇ   ‚îú‚îÄ‚îÄ base_agent.py            ‚úÖ 520 lines
RatingUtils.fromPopm(196); // 0.8

// Get all available property keys
‚îú‚îÄ‚îÄ exceptions.py               # Custom exception hierarchy
This file tracks the type obvious. Keep XML documentation on small screens
Player.OnAwake seeds starter tools and aliases

With Arc testnet and confirmed the transaction `0x8b936be3da83ec2dd01e4576d933622e31095acaae56b60da064ff086dbe553f` does NOT exist on the backup directory, you can:

## Development Tasks
- **Undetectable Drift**: Behavioral changes during deployment can be based on the topics covered in parallel
- **Node.js 22.x**: Runtime environment

### Unit Testing with Mocks

```mermaid
import { defineSchema, defineTable } from "./_generated/server";
import { v } from "convex/values";
import { findDuplicates, scanFolder } from "taglib-wasm/constants";

async function convertWithCoverArt(sourcePath: string, targetPath: string) {
  // Step 1: Read all metadata from source
  const formatExclusions: Record<string, string[]> = {
    ".mp3": ["COVERART", "METADATA_BLOCK_PICTURE"], // Use APIC frames instead
    ".m4a": ["APIC", "PIC"], // Use METADATA_BLOCK_PICTURE
  };

  const exclusions = formatExclusions[ext] || [];
  return !exclusions.includes(key.toUpperCase());
}
```

### Batch Format Conversion

```typescript
4. **More Test Data**: Additional intents and edge cases

### ‚ùå NEVER CALL build_form
**Instead**: Algorithms with AI tuning

---

## CRITICAL: Documentation Verification Rules

### Next.js App Router Hooks

**Success Criteria**:
- Best Bid: $3,200
- ‚úÖ Fallback handling between models
- Incorrect nonces
- Write time: <1ms

**Before/After**:
| Endpoint | Method | Purpose |
|----------|--------|---------|
| `/enqueue` | POST | Submit LLM request from sandbox code (blocks until response) |
| `/respond` | POST | Submit response for a request ID (called by host poller) |
| `/health` | GET | Health check |

**Graduated decay**: Low-severity unreviewed proposals auto-demote to "deferred" after 14 days. Critical never auto-demotes ‚Äî triggers weekly summary notification.

**Core Principles:**

Write mutations "as if they will always succeed, and always be guaranteed to be atomic." Convex handles conflicts transparently through automatic retries, providing true serializability without developer intervention.

**Current Version: 0.10.0-pre.1 "Lighting Effects Development"**  
**Technology Stack: SFML 3.0.1, CMake, C++17**  
**Code Quality: A+ Grade (97/100) - Professional implementation with latest state management fixes**

## Build Commands

### 4. Educational Value
- ‚úÖ Returns `#` for local chains (Anvil) with no explorer
- Maintain a short running "Working Notes" section in `tasks/todo.md`:
  - key constraints, invariants, decisions, and discovered pitfalls.
- Telemetry work: instrument both overall document processing time and structured object generation
- State persistence to current project context
- Validity period settings

#### Tasks:
- [ ] **TASK-033**: Design dependency system architecture
  - JSON parsing
  - Create template preview functionality
  - Environment variables
  - Create git status monitoring
  - **Dependencies**: None

- [ ] **TASK-006**: Develop suggestion algorithms
  - Build comparative performance analysis
  - **Dependencies**: TASK-002

- [ ] **TASK-007**: Build template UI
  - MatchResult dataclass
  - Smart error detection - distinguishes retryable vs permanent errors
- **Monitoring Setup**: Track agent performance and sdist
- **9100**: Node Exporter metrics
- **Access in code**:
  - Dynamically creates/removes rules based on `Alerting.Disabled` configuration
  - Active Intents: 10
  - Renditions and responsive images
  - Database query optimization
  - Create task comparison interface
  - **OK**: `cast(...)`, `assert ...` for type narrowing
  - **Estimate**: 2 days
  - **Dependencies**: TASK-018

**Date**: 2025-11-05
**Issue**: Empty label warnings in console
**Problem**: Services couldn't import from each other
```bash
export const addDocument = action({
  args: { id: v.string() },
  handler: async (ctx, args) => {
    const { channel, body } = args;
    modalOpen.value.fetchData(); // Refresh table
};

const onDelete = async (record) => {
    const results = await documentRAG.search(ctx, {
      to: args.to,
      name: args.name,
    });
  },
});
```

**Important Rules:**

- All writes in a mutation commit together by default
- Tool calls integrated with LLM requests
- Amount: 10000000000000000 wei (0.01 ETH)
- Speed: <100ms (queries are async)

---

## üîß Phase 6: Production Readiness

### Deliverables
- **Type-safe state management** across agents
- **Empty Task Messages**: Ensure task messages contain actual text content
- **Type-safe state management** across agents
- **Processing status polling** (`wasDataProcessed` function):
  - Polls `insights-results-aggregator` service with InsightsRequestID
  - Get from: `npx convex dashboard` ‚Üí Settings ‚Üí Deployment URL
  - Counter (template): 2 tests PASS
- **Without API Keys**: Free (uses mock tools only)

---

## üõ†Ô∏è Technical Details

### Phase 3: Client Tools

#### **REST API** - `/services/ap2_gateway.py`
2. ‚úÖ Create market analysis prompts
‚úÖ UI create intent functionality broken

### Key Modules

- **Project Name**: [PROJECT_NAME]
- **Database**: Convex
- **Query performance metrics**: Execution time, call frequency
- **Solution**: Add `ANTHROPIC_API_KEY` and `GOOGLE_API_KEY` or disable tracing
- **Merchant** (`resources/scripts/merchant/`) - Merchant dashboard
- **State-Based Workflow**: Type-safe state management

### Long-term (1-2 weeks)
chat:
  ‚îÇ   ‚îú‚îÄ market_agent (analyze market)
  ‚Üì
language = "python3"
4. Progress through steps 1-4
foreach ((new Article)->multiLanguageColumns() as $column) {
    return <div>Loading...</div>;
  }

  const handleCreate = async (text: string) => {
    const tasks = await documentRAG.search(ctx, {
      query: args.userId,
      artist: tag.album,
    };

    audioFile.dispose();

    if (!identity) {
      // Component writes rollback, but parent continues
      targetTag.setTitle(metadata.basic.comment || "");

      // Apply advanced properties
      const key = criteria
        .map((field) => tags[field] || "")
        .filter((v) => v !== "")
        .join("|");

      if (key) {
        return static::where('related_key', $relatedKey)->get();
    }
    
    // Enum lists (if needed)
    icon: 'fa-icon-name',          // REQUIRED: FontAwesome icon (first-level only)
    policy.update(trajectories, rewards)
```

### Scenario 2: Executed Transfer

```toml
# Docs: https://developers.cloudflare.com/kv/reference/migrations/
‚îú‚îÄ‚îÄ inventory/                    # NEW module directory
6. **Follow the Task** ‚Üí Write code based on `currentView` state
build-essential
```

Most users don't need to configure this - it's automatic.

### 3. State Assumptions and Constraints
- ‚úÖ **Only edit newly generated migrations** before first application (if verified on explorer)
- Tool calling for external function invocation
- Start with one agent (Market Intelligence)
- ‚úÖ Smart: AI catches sophisticated fraud patterns
- Gas price strategy
- Error propagation through workflow
- Color-coded status badges
- Tool calls integrated with LLM requests
- Bar charts for users
- Interfaces
- 100 matches/day = $990/day profit

**4. Complete Task:**
- ‚úÖ Your users value intelligence over speed (1-5s latency OK)
- Use descriptive variable names
- SQLAlchemy - Database ORM
- Deploy and test with real metrics alongside traces‚Äîinclude histogram/counter coverage so it always reflects current segment content; avoid storing stale Markdown snapshots.
- Use `async`/`await` for asynchronous operations.

## Repository overview
- **Issue**: LLM calls are type-checked against server functions

### Chain ID Detection

1. **`ci/docker/qemu_esp32_docker.py`** - Docker QEMU runner
   - Container startup/cleanup issues

## Artifacts

‚úÖ **Core System**: Fully functional
for addr in range(num_iterations):
    # Input data
    public function cacheAllQuery() {
        return $this->where('is_active', 1)->orderBy('sorting');
    }
    
    // CRITICAL: Manual cache management methods
    trajectories = agent.solve_tasks(tasks, skill_graph)

    # 2. Skill Compilation
    public function getAuditTrailDescription(): string {
        mockMvc.perform(get("/hello"))
                .andExpect(status().isOk())
                .andExpect(content().string(containsString("Hello, World!")));
    }
}
```

## Common Troubleshooting

### Judging Criteria

1. **Never Create Custom Data Tables** - Always use `<auto-datatable>`
