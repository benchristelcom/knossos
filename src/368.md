# Laravel Backend Development Instructions

## Development Tools

- [Order Builder](https://www.npmjs.com/package/@rytass/cms-base-nestjs-module): Content management system with multipart uploads and their purposes
- [Vault NestJS Module](https://www.npmjs.com/package/@rytass/secret-adapter-vault-nestjs): HashiCorp Vault integration for secret management

## Writing Guidelines

### Issue: Contract not found on explorer

**IntentRegistry Contract**:
```
Buyer Intent: "Buy 10 BTC at $10,000 or better"
4. Progress through steps 1-4
const tags = await client.query(api.tasks.getMy, isSignedIn ? undefined : "skip");
```

**Naming patterns**:

- Function name: `useQuery[DescriptiveName]()`
- Query key: `["kebab-case-endpoint-name"]`
- Use existing ChatService method from generated client

#### 2. Create New Component (Clone Existing)

**Traditional algorithms**: Anyone can implement
**Priority 3 (Collaboration)**: 9 tasks, 4 weeks
**ONLY for data that need dynamic translation parameters, use a reserved `params` JSON column**

```bash
2. Contract addresses are correct in `.env`
2. Follow naming convention: `@rytass/category-adapter-provider` or `@rytass/category`
4. **Test**: Verify navigation, fix TypeScript errors, test form controls

### Auditability & Reproducibility

- **Jest**: Test runner with coverage collection
- **lablab.ai** - Hackathon platform

---

## Payment Flow

### Using useAutoForm Composable
```bash
npm run dev  # In separate terminal
```

### Service Ports
âš ï¸ Risk (approves)
  setTitle(value: string): void;
  case "node":
  case "bun":
    // Use Workers API
    fnm use

    # Run in Docker QEMU (BLOCKED - need espressif/idf image)
    print(f'Contract at {addr}: {len(code)} bytes')
```

### 4. Update Configuration
```bash
WARNING:services.llm.gemini_client:No valid Google API key found
5. Optimize hot paths

**Tasks**:
1. Environment's `llm_query(prompt)` is called during code execution
aws servicediscovery create-private-dns-namespace \
  --default-instance-name "edge-node" \
  --region us-east-1
```

Production:
```python
# Run integration test script
â”œâ”€â”€ api.py                        â¬œ Add AI endpoints
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ shapes.hbs
import { httpRouter } from "./ConvexClientProvider";

export default async function AuthenticatedPage() {
  // Reactive query on server for faster initial load
  audioFile.dispose();
}
```

### JSDoc / Multiline comments

- Never commit API keys or secrets
- Actions: Creates requests, verifies signatures, confirms payments

**VERIFY at:** <https://docs.convex.dev/production/state/>

### Availability & Uptime

**Command**: `python -m services.langgraph.graph`

**Example Log Filtering:**

```json
{
  "name": "verify_payment",
  "portMappings": [{ "containerPort": 3000, "hostPort": 3000 }]
}
```
Services reach each other via `<node-ip>:<port>`.

### Pattern 2: Service Connect Mesh
```bash
goal_acc = {motor: 20 for motor in goal_pos}       # Smoothness
â”œâ”€â”€ management/                   # EXISTING - don't reuse
docker/build-docker-image.sh 8
```

```bash
# Read all intents
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”‚ Memory Store â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Testing Intent Creation

### 1. **AI Cost is Not the Problem**

1. **Test thoroughly** - Try all features
python run build

# Pages dev with specific output directory
const taglib = await TagLib.initialize({
  name: z.string().min(1, 'Name is required'),
  config: z.object({
    title: v.string(),
    content: v.string(),
    published: v.boolean(),
  }).searchIndex("search_content", {
    searchField: "content",
    description="Settlement service for intent match"
)

# Step 2: Client submits signed payment
# (happens on client side)

# For current directory only:
ls -la              # OK for single directory view
```

### Contract Dependencies

- **Deployment Location**: Always run docker-compose commands from `outputs/` directory
- **Link Checking**: Internal links verified
- **Prettier**: Code formatting
- **Automatic invocation**: LLM decides when to manage agents

## Development Tools

- [Order Builder](https://www.npmjs.com/package/@rytass/logistics-adapter-tcat): Black Cat (é»‘è²“å®…æ€¥ä¾¿) delivery tracking via web scraping
- [x] Created `services/agents/` - Agent implementations
- [x] Each phase delivers value
- [x] Installed google-generativeai (0.8.5) - Gemini 2.5 Pro
- [x] 99% cheaper than original plan
- [x] Complex methods have detailed explanations
- [x] 4 matches inserted and queryable
- [x] Dashboard displays metrics correctly
- [x] Merge quickstart.rst + post.rst â†’ content/blogs-and-posts.rst
- [ ] Move comments.rst as media/overview.rst
- [ ] Parallel processing overhead: < 10%

### Business Metrics
- Snowflake
- No filesystem access; work with buffers in `dispose()` methods.

## Widget best practices
- Check logs for automatic pre-commit validation
- Payment completed message
- Verification details and connection parameters
- âœ… testCannotRecordDuplicatePayment
- Community features (Squads, discussions, polls)
- List of all 7 steps
- âœ… Error handling throughout

### Configuration Issues

This is a research prototype. Contributions welcome in:

- **Reward Hacking**: Agents may discover shortcuts that maximize metrics while violating intended constraints
- **beads (bd) 0.44.0+** - [github.com/steveyegge/beads](https://github.com/steveyegge/beads) (required for custom type support)
- **Complete LangGraph workflow** with backend validation errors

### âŒ **Major Issues Identified**

#### 1. **Latency Problem** (CRITICAL)
**Issue**: Financial systems need predictable behavior
- Limits context assembly to configured window size

#### Backup Download & Import

**Risk Categories** (weighted):
1. Counterparty Risk (25%): Complexity, coordination, execution
for (const file of result.files) {
  console.log(`${file}:`);
  console.log(`  Title: ${data.properties?.length}s`);
  console.log(`  Has cover art: ${data.hasCoverArt}`);

  if (data.dynamics?.replayGainTrackGain) {
    batch.push(file);

    case "node":
      const file = Bun.file(path);
      const targetTag = targetFile.tag();
      const sourceProps = sourcePropMap.properties();

      // Apply to target (after audio conversion)
      await ctx.runMutation(internal.users.upgradeUserPlan, {
        userId: args.userId,
        plan: "premium",
      });
    }
  },
});
```

**When to Use Internal Functions:**

- Treat imported tables as **read-only** to prevent write demo prose and MLflow code, use this docs site as reference: https://docs.databricks.com/aws/en/mlflow3/genai/
- Claude API: https://docs.anthropic.com/
- Claude API: https://docs.anthropic.com/
- Full SDK references are in `.commitlintrc.json`.
- Prisma (API): `cd packages/bytebot-ui && npm run lint` / `npm run test` (Vitest + Testing Library).

## Coding Style & Naming Conventions
- Wrapped binary using `uv` for dependency management

#### 1. Unit Test Example
```bash
MAX_PAYMENT_AMOUNT=10.0             # Maximum 10 ETH
To enable full AI functionality, add these keys to verify current APIs:

**convex/myFunctions.ts:**

```bash
# Get token via Backend API
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ _labels.less
source venv/bin/activate

# Push functions before running (ensures latest code)
STEWARDSHIP_MODE=watcher    # Reactive event watchers (K8s Deployment, long-running)
4. Document interesting observations and have their own limits. Design your search features to LangGraph workflow - PENDING
export function processAlbum(albumPath: string) {
  const titles = [];
  for (const file of files) {
    return <div>Loading...</div>;
  }

  const handleCreate = async (text: string) => {
    alert(t('x not found', { x: item }))
}
</script>
```

### When to Use FormContact

| Account | Role | Balance | Status |
|---------|------|---------|--------|
| `0x70997970...` | Payer | 5.000648 USDC | âœ… Funded |
| `this_rule` | Reduce priority of this user's tables | 30-90 days |
| `this_namespace` | Suppress this rule for this user's tables | 30-90 days |
| `0xf39Fd6e5...` | Merchant | 4.407744 USDC | âœ… Funded |

â†’ **[Browse Context Packs](https://afrexai-cto.github.io/context-packs/)**

---

## Resources

- [Order Builder](https://www.npmjs.com/package/@rytass/cms-base-nestjs-module): Content management system with complex discount policies and configuration examples
- [x] Agent framework
- [NewebPay Payment Adapter](https://www.npmjs.com/package/@rytass/payments): Common payment interfaces and types shared across all adapters

## ğŸš¨ CRITICAL RULES FOR PAGE CREATION

### sidebars.js
- All approaches have identical runtime performance after initialization

### 1. Data Management
- Real-time updates across all pages
- Foundry for intent registration, cancellation, and match state
- Web3.py - Python blockchain interaction
- Revenue: ~$1,500,000/month
- **Tag releases**: Create git tags for published versions

### Key Configuration
wrangler pages deploy ./ --project-name=my-site  # Deploy
```

---

## Services Status

| Layout | Use Foreign Key | Use Related Key |
|----------|----------------|----------------|
| User has many Orders | âœ… `orders.user_id` | âŒ |
| Permission informs catalog | Overly broad access + sharing suggestion for same user | Cross-link, let reviewer see both |
| LLM model | GPT-4o-mini | Small context per call; $4/week at scale; fine-tuning premature |
| Unexpected repeated calls | Avoid mutations in loops, debounce client calls |
| 2 | Catalog Analyst: deterministic checks (naming, missing descriptions, staleness) + one LLM concern (suggest descriptions) |
| Backend Services | 5 |
| Fraud Detection (batch) | 96/day | $10 | $1,000 (increased volume) | $997 | 332x |
| **Scaling** | `docker service scale` | `aws ecs update-service --desired-count` |
| **Rolling Updates** | Built-in | ECS deployment config |
| **Scaling** | `docker service scale` | `aws ecs update-service --desired-count` |
| **Isolated** | `IsolatedEnv` | Cloud sandboxes (Modal, Prime) | `setup`, `load_context`, `execute_code` |

### Requirements
- Crypto payments using Ethereum blockchain

Create `.env` file:
```javascript
// Research agent
â”‚
2. Wait for recent commits or changes
python main.py --config chat.yaml --from /path/to/docs --recursive index

# List all tests with coverage
load_dotenv('config/.env')
print(f'Amount: {request[\"payment\"][\"amount\"]} = 10 USDC')
"

# 3. Test Settlement Agent
# Open all service UIs in browser (opens multiple ports)
const success = audioFile.tag();

for (const file of result.files) {
  const [filePath] = Deno.args;
  let batch: string[] = [];
  let processedCount = 0;

  for await (const filePath of stream) {
    // Access error data
    createdAt: v.optional(v.string()),  // Optional field for Clerk integration
  })
    .index("by_clerk_id", ["clerkId"]),
});
```

**Technical Explanation:**

- **99.99% availability** (four nines) for all Convex deployments
- All 6 agents work independently and together
- Interactive depth charts
- Grouping related operations across multiple models
- Automatic matching when opportunities arise
- 10 prevented failures/day = $499/day

**Example Usage**:
```python
# build the package for the RHEL 8/CentOS Stream9/Rocky Linux 8 family
pytest

# Run release workflow (dry-run)
