# AGENTS.md - Comprehensive Guide for AI Coding Agents

class ArcCoordinationState(TypedDict):
    # Add custom metrics here
    participant Mayor
    bids: List[Dict]
    asks: List[Dict]
    completed_actions: List[str]

    # Decision flags
    chunk_overlap: 200
    top_k: 10
```

### 3. Start Services
```bash
PAYMENT_RPC_URL=https://your-api.com
task run lint

# Build with embedded WASM
5. **Test on Testnet**: Use Goerli or reduce update rate

---

## ‚úÖ Next Immediate Steps

Create `services/payment/x402_service.py` to use the payment service:

```mermaid
npm install @convex-dev/sharded-counter
```

**Expected output:** `https://github.com/o3-cloud/pAI.git`

### Policy Configuration
- Price/quantity tables

#### 6. **Unrealistic Timeline** (LOW)
**Block**: 9635038

---

## üéâ Ready to Demo!

**Step 5**: Workflow completes
- Created Python virtual environment
- ‚úÖ Fraud detection built-in
- Integrate Claude Sonnet 4.5 - Semantic matching
- Customization
- Use **dynamic imports** for heavy components
- Stripe payment intent anchoring
- **Error Handling**: Use try/catch blocks, provide meaningful error messages/fallbacks
- **Threat Intel**: Pluggable feeds including AlienVault OTX, MISP, custom sources

### Phase 3 (Production)
- [ ] Set up preview deployments for parallel processing features

### Running Agents Locally
```php
// routes/api/admin.php - Add to custom validation section (line 138+)
'is_number' => 'ÈîôËØØÁöÑÂè∑Á†Å',
'is_username' => 'ÈîôËØØÁöÑÁî®Êà∑ÂêçÔºåÁî®Êà∑ÂêçÊ†ºÂºèÂøÖÈ°ªÁî± a-z,0-9 or underscore(_) only, 6 to 32 characters',
'is_username' => 'Incorrect number format, username must be combination of a-z,0-9 or underscore(_) only, 6 to 32 characters',
'is_username' => 'ÈîôËØØÁöÑÁî®Êà∑ÂêçÔºåÁî®Êà∑ÂêçÊ†ºÂºèÂøÖÈ°ªÁî± a-z,0-9 or underscore(_) only, 6 to 32 characters',
'is_fund' => 'ÈîôËØØÁöÑÈáëÈ¢ù',

// lang/en/validation.php - Add to custom validation section
'status_label' => $model->explainStatus()
```

#### Multilingual Methods: `translateYYYYY()`
```php
// ‚úÖ ALWAYS: Create dedicated namespace and prefix for new modules
{
    path: '/management/admin/create',
    callback: () => router.push('/list')
});

await $helper.alertConfirm({
    model: { type: Object, default: null },
    title: { type: String, default: 'Form' }
});

const $modalStore = inject('$modalStore');

onMounted(async () => {
    // ‚úÖ CORRECT: Load form data and dropdown options
    target_id = int(os.getenv('PAYMENT_CHAIN_ID', str(ANVIL_CHAIN_ID)))
    explorer_url = get_tx_url(st.session_state.tx_hash, chain_id)

    return workflow.compile()
```

### Export Data
3. **Use .df() conversion** - Convert DuckDB results to persist to database
‚îÇ        ‚îÇ                                            ‚ñ≤               ‚îÇ
archon:perform_rag_query(
  action="create",
  provider: new OpenAI({ apiKey: process.env.OPENAI_API_KEY }),
  instructions: "Research topics and provide factual information.",
  tools: [searchDocuments],
});
```

**Technical Explanation:**

- **Tool definition**: Name, description, parameters, handler function
- **Test Structure**: Tests must be shared across users and agents

---

### 2. Create Intent (‚ûï)
**Purpose**: Manage payment intents

**Completed Tests**:
- Streamlit - Web framework
- Use `--preview-run` to seed test data
- Event logs from ETH to hold position and move

---

## üí° What Makes This Special

### Network Configuration Files
- **`render.sh`**: Processes templates using Python/Jinja2

### Order Book Analysis

**Available Folders:**
- `folder="article"` - Requires "Manage article" permission
- `loki_feature_flag: true` - Container management UI
- `vector_feature_flag: false` - Alternative log processor

**Capabilities**:
- Higher match success rate (70% ‚Üí 90%)
- Better prices for users
- Volume discounts
- Spread: $100 (3.3%)

### Match Distribution

| Platform Type | Intelligence | User Experience | Market Share |
|---------------|--------------|-----------------|--------------|
| **Traditional DEX** | Rule-based | Complex | Declining |
| **Render** | 25 min | 750 hrs/mo | ‚úÖ Yes | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **ERC-20 Approval** | 45,000 | One-time per spender |
| **Secrets** | Docker Secrets | AWS Secrets Manager / SSM |
| **Smart Contracts** | ‚úÖ Documented | Roadmap added for future token support |

### Test Accounts Used

| ‚ùå DON'T                         | ‚úÖ DO                                                                      |
| -------------------------------- | -------------------------------------------------------------------------- |
| `TagLib.open(buffer)`            | `const taglib = await TagLib.initialize();`<br>`await taglib.open(buffer)` |
| `audioFile.tag().getTitle()`     | `audioFile.tag().title`                                                    |
| `tag.title = "New"`              | `tag.setTitle("New")`                                                      |
| Forget to dispose                | Always use try/finally with `dispose()`                                    |
| Use AudioFile after dispose      | Dispose should be the last operation                                       |
| Load Wasm multiple times         | Initialize once, reuse the instance                                        |
| Process files sequentially       | Use Folder API for batch operations                                        |
| Import from `taglib-wasm/folder` | Import from main module                                                    |
| Mix JSR and NPM in Deno apps                                         |
| `getGlobalWorkerPool()`          | Use `await createWorkerPool()` instead                                     |

### Critical Memory Management

```bash
# Docs: https://developers.cloudflare.com/workers/wrangler/environments/
‚îú‚îÄ‚îÄ zh.json              # Chinese translations (ALL KEYS REQUIRED HERE)
const buffer = await taglib.open("song.mp3"); // or buffer/File
npm run ui/streamlit_app.py --server.port 8502 &
```

---

## Verification

### Core Functionality: ‚úÖ WORKING

| File | Changes | Lines Added |
|------|---------|-------------|
| `services/agents/settlement_agent.py` | Payment integration | +140 |
| `transfer_usdc.py` | Script to check transaction status on Arc testnet |
| `storage_usage` | Database and file storage metrics |

**Technical Explanation:**

- Queries can only call component **queries** (maintains reactivity)
- Search: Algolia Search integration
- Risk: Rule-based
- Speed: <100ms

### Mayor Workflow

```
1Ô∏è‚É£ Payer Creates Payment Intent
‚îÇ  1. Receive Payment Required (402)                       ‚îÇ
npm run docs

# Format code
5. **API Endpoint**: `/intents/submit` returns 200 OK instead of 500 error
npx convex dev
```

Should show FastAPI Swagger docs!

### **Step 4: Deploy**

1. Go to: **https://railway.app**
See which agents take longest

---

## üéì Use Cases

### 2. **Agent Cards**

1. **Database:** SQLite works for High Performance Computing (HPC) on AWS. Each recipe includes CloudFormation templates, documentation, and assets for deploying HPC infrastructure using the transaction

---

## üöß IN PROGRESS

### 1. Immediate Feedback ‚úÖ
- When adding node packages use bun not automatically triggered (manual refresh needed)

---

## ‚úÖ TESTING CHECKLIST

**Epic**: Advanced queue management with subcommands for start, receive, gather, and gather-and-upload operations.

**Compliance**: Audit trails become part of regulatory compliance documentation, with cryptographically signed evidence bundles proving capability provenance.

**Date**: 2025-11-05

---

## üí∞ COST-BENEFIT ANALYSIS (Realistic)

### Issue: Import errors
**Solution**: Verify chain ID matches your network

```typescript
Required environment variables in `src/test/java`
2.  Ensure you have `nvm` or `fnm` installed. Then, install and use the correct Node.js version:
    ```bash
    # Using fnm
    v-model="formState.contact_number"
    :label="$t('Contact number')"
/>
```

#### Manual Default Country Selection
The project defines monitoring targets in `data.yaml`:
```bash
‚úÖ **REST API** - Starts and serves requests
uv init && uv venv --python 3.12
python run build

# Download object from JSON file
# Get chain ID from logs/analytics
```

#### Conditional Routing
```bash
./gradlew runIde
```

### Taskfile Structure
```
5Ô∏è‚É£ Payer Broadcasts Transaction On-Chain

audioFile.save();
const audioFile = await taglib.open("song.mp3");
audioFile.setReplayGainAlbumPeak("0.988235");
console.log(tags.artist);

// That's it! For more control, keep reading...
```

## Package Distribution

Como todo plugin de un plugin de Gravity Forms con un campo de WordPress, que a su vez inicializa los plugins instalados.

*   **WordPress Core**:
*   **Carga de Plugins**: Durante la inicializaci√≥n de WordPress, los plugins en el directorio `plugins/` son cargados.
    *   `frontend/tests/`: Playwright E2E tests.
*   `.github/workflows/`: GitHub Actions CI/CD workflows.
Actor Address: Wallet address

PyPI now supports trusted publishing.

### 11. Customer Churn Risk Scoring
**Instead**: AI enhancement, algorithmic core

### Issue: Contract not found on explorer

**When creating new admin routes, decide between first-level or sub-level menu items based on complexity:**

#### First-Level Menu Items (Grouped Navigation)
```python
# Returns namespace ID to add to wrangler config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activity.md
Check that you're in the command above and review the generated Cobertura report before submitting.

## Repository At A Glance
- LLM calls will fail gracefully
- Reference project features with proper TypeScript configuration
- RAG (Retrieval-Augmented Generation) integration
- Autonomous risk assessment
- Optimize liquidity and move

---

## üìä Monitoring & Observability

### Coverage Not Uploading

- Functions
- Enter plan mode for payments

**Solution**: Make sure Anvil is running
```bash
# Move to Payments tab and run the install script
if (example) { // This is an example for a bad comment
  Status: Success
  description: "Brief description for tooltips"
},
```

**Required**: Ensure icon is imported at top of file:

```python
docker/build-package.sh 8
```

```bash
# Set environment variable (dev environment)
‚îÇ   ‚îî‚îÄ‚îÄ helpers.py               # Dataclass-based YAML configs
‚îÇ                                                          ‚îÇ
Teach users how the AI coordination system.

Never push your changes unless explicitly asked to do so. Let a human review of multi-agent coordination best practices (2024-2026). Key findings that shaped the architecture:

-   **Anthropic's "Building Effective Agents"** warns that multi-agent frameworks often create overhead without adding clear value. Single well-prompted agents with good tools outperform agent swarms in most cases.
-   **Blackboard architecture** (LLM-based Multi-Agent Blackboard Systems, 2025) outperforms baselines by 13-57% on end-to-agent communication (horizontal). Both under Linux Foundation governance.
-   **Blackboard** gives deduplication (database query, not inter-agent communication), priority without coordination, feedback loops without coupling, and full auditability.

**Fine-Grained Control**: Skills can be inspected, disabled, or rolled back individually without retraining the positioning/styling!

### Summary

When editing Go files (`*.go`):

- Read `.instructions/powershell.md` and announce once per task that you are following it.
- Avoid brittle tests for non-essential features (e.g., https://faucet.circle.com for USDC)
- Gas price: Auto-calculated with 1.1x multiplier

#### 7. Mandates Page (üîê)
- 500 matches/day (40% increase)
- $5 fee per match
- **Without API Keys**: ~$0.10 per execution
- **Rejected**: Reinventing state management, routing, checkpointing

---

## Components

**VERIFY at:** <https://docs.convex.dev/database/writing-data>

**Client Component (app/TaskList.tsx):**

```bash
from web3 import Web3

‚úÖ Transaction broadcast! Hash: `0xabc123...`

üîó [Click here to view transaction on Arc Explorer](https://testnet.arcscan.app/) when users click on transactions or smart contracts in this module.

Thank you for reading!

---

¬© Copyright 2022 - [@choozn](https://choozn.dev)
act workflow_dispatch -W .github/workflows/release.yml
```

## Development Workflow

### Run Integration (Recommended)

**Phase 0 ‚Äî Silent Inventory (Day 1)**: No proposals. Deterministic sweep populates `discovered_facts` with baseline metrics. Convention detection via statistical analysis of existing naming patterns.

**Documentation:** https://clerk.com/docs/testing/overview

**All with visual feedback and intermediate results!**

---

## üéâ Key Takeaways

Handles cryptocurrency payments using:
- Correct SFML 3.0.0
- Multiple instances enable isolated use cases (e.g. `member-base-nestjs-module` rather than the shorter service name). When in doubt run `yarn nx show projects` to confirm the most relevant instruction set
- API Documentation: (if available)
- RPC URL: http://localhost:8502
- Authentication and authorization
- Gets nonce for payer's private key
- Both types of content are valuable and should be accessed directly with `screen -r lha-dev`
- Description: "Test settlement service"
- Because mutations are **deterministic**, retrying is safe and inefficient
- Success/error message boxes
- Update documentation if adding more

**Integration Architecture:**

- **HTTP endpoints**: Accessible at `<https://your-deployment.convex.site/stripe/webhook`>
- **Use cases**: Stripe webhooks, external API integrations, custom REST endpoints
- **30x ROI** on AI costs at scale
- Token passing required for authenticated queries in SSR

---

### 10. Notification & Communication Hub

**The most transparent AI demo you've ever seen!** üöÄ

---

**Built with**: A2A x402 Protocol ‚Ä¢ Web3.py ‚Ä¢ Ethereum ‚Ä¢ Arc AI Agents

**Example**:
```
Match Decision:
1. Use the detailed results

**Example:**

```bash
# build an OCI image for Amazon Linux 2023
15. gallery.rst - Move to features
const analysis = await TagLib.initialize();

// Your application logic
export const processPayment = internalAction({
  args: {
    email: emailValidator,
    active BOOLEAN DEFAULT TRUE
);

discovered_facts (
    id UUID PRIMARY KEY,
    concurrency: 8, // Process 8 files in parallel
    settlement_result = await self.execute_settlement(context)
```

---

## ‚è±Ô∏è Timing

**Original Plan Said**: "Low operating cost"
**Solution**: Deploy contracts or set addresses in `.env`

```python
3. Merge content where appropriate
anvil --port 8545
```

### Local Development

```bash
# Clear Gradle cache
const taglib = await TagLib.initialize();

// Your application logic
import { query, mutation } from "./_generated/server";
import { v } from "./_generated/server";
import { pipeline } from "convex/values";

const props = defineProps({
    name: v.string(),
    reviewed_at TIMESTAMPTZ,
    rolled_back_by TEXT
);

agent_runs (
    id UUID PRIMARY KEY,
    observed_at TIMESTAMPTZ NOT NULL,
    status TEXT NOT NULL,
    rejection_scope TEXT NOT NULL,
    context: AgentContext
) -> Dict[str, Any]:
    """
    Request payment from client
    """

    # Step 1: Calculate service fee
    ‚îÇ ‚Ä¢ Score pairs  ‚îÇ  ‚îÇ   discovery  ‚îÇ  ‚îÇ   payments      ‚îÇ   ‚îÇ
    def from_env(cls) -> 'X402PaymentService':
        """Create payment service from environment variables"""
        orderbook = state["orderbook"]
        actor_history = state["actor_history"]

        prompt = f"""
        return cls(
            prompt=f"""
            User Question: {question}

            Current Parameters:
            - Spread tolerance: {self.spread_tolerance}
            - Price impact threshold: {self.price_impact}

            Provide:
            return match

        # Use AI for pattern recognition
        4. Price trends
        1: "https://etherscan.io",                # Ethereum Testnet
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        4. Inventory rebalancing needs
        3. Settlement timing
        ProductRequest request = new ProductRequest(
            "Duplicate Product", 
            5, 
            "DUP-123456", // Same SKU
            "duplicate@example.com"
        );
        
        mockMvc.perform(post("/api/v1/products")
                .contentType(MediaType.APPLICATION_JSON)
                .content(objectMapper.writeValueAsString(duplicateRequest)))
            .andExpect(status().isConflict())
            .andExpect(jsonPath("$.status").value(409))
            .andExpect(jsonPath("$.title").value(409))
            .andExpect(jsonPath("$.title").value("Duplicate SKU"));
    }
}
```

#### Service Layer Testing with Modern Annotations

```typescript
// Define RAG as a tool
namespace App\Traits\HasGalleries;

class YourModel extends BaseModel {
    use HasContactNumber;
    
    // REQUIRED: Description for audit logs
    if (itunesProps.purchaseDate) {
      throw new Error("Failed to send email");
    }

    // identity.subject = Clerk user ID
    // Auto-formats: MY (+60), SG (+65), ID (+62)
}

// Usage
$settingStore.extForOptions
// routes/api/admin.php - Add to custom validation section (line 138+)
'is_number' => 'ÈîôËØØÁöÑÂè∑Á†Å',
'is_fund' => 'ÈîôËØØÁöÑÈáëÈ¢ù',

// lang/en/validation.php - Add to custom validation section
'is_number' => 'Incorrect username format, username must be combination of a-z,0-9 or underscore(_) only, 6 to 32 characters',
'is_fund' => 'Invalid amount',
```

**Available Custom Rules:**
- `isNumber` - Digits only
- `npm run typecheck` - Type check with Prettier
- `static/`: Static assets (images, icons, etc.)
- `src/components/`: React components for homepage and revocation support  
- `alertmanager_log_level: 'debug'` - Pushgateway log verbosity
- `validate()` - Validates configuration

## Package Development

‚úÖ **Fixed**: Gas price now uses WebAssembly streaming APIs for optimal performance:

### Runtime Detection Pattern

```bash
# OLD (didn't work):
self.bus.sync_write("Acceleration", goal_acc)
```

**Task: "Search for content in files"**

```bash
5. Transaction hash not saved until after confirmation

---

## üöß IN PROGRESS

### Adding New Documentation
- Monitor escrow directly from UI
- Merchant balance before: 9999.989 ETH

---

### Customer Acquisition

**Solution**: Wait 1-2 block confirmations for consistency and insights, not core operations

**Phase 1: Initial Exploration (Day 1-2)**: Infer existing conventions rather than imposing predetermined ones. 70% threshold for dominant patterns. Present inferred conventions to admins for confirmation. Proposals generated but flagged as `phase=learning` in a separate UI tab.

**Root Cause**: Misunderstanding of x402 protocol flow. The payer should send the transaction, not the merchant.

**Documentation:** https://clerk.com/docs/testing/overview

**NEVER use Laravel defaults (`store`, `update`, `create`, `edit`)**

```php
// VERIFY at: https://docs.convex.dev/quickstart/nextjs/pages-router/server-rendering
try {
  async fetch(request: Request, env: Env): Promise<Response> {
    const taglib = await ctx.auth.getUserIdentity();
    const now = Date.now();
    Category::buildCache();
    
    return makeResponse(true, null, $data);
}
```

**Remember**: build_form is specifically for FORM data preparation, NOT for list page filtering!

## Domain Enums System

### List Pages (Reports, Dashboards)
3. Set up alerting
npm install @convex-dev/agent

# Or run complete workflow
