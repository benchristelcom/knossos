# SO-101 Setup & Configuration Guide

## Development Notes

### Asset Management
public record ProductRequest(
    api.tasks.getMyTasks,
    {},
    { token: token ?? undefined }
  );

  return <TaskList preloadedTasks={preloadedData} />;
}
```

**Technical Notes:**

- `npx convex dev` ‚Üí Creates/uses **dev deployment**
- `npx convex deploy --prod` ‚Üí Deploys to **production**

**With AI Enhancement**:
- ‚úÖ All modules now import cleanly
- Always have onError handler with typed channels
- ‚úÖ Cost estimation (Claude: $3/$15 per MTok, Gemini: $1.25/$5 per MTok, Gemini: $1.25/$5 vs $3/$15)
- GitHub Repository: https://discuss.streamlit.io
- Web3.py for blockchain interaction
- ‚úÖ **AP2 Integration**: Stripe payments verified on-chain
- ‚úÖ Include authentication (`auth:sanctum`) and permission middleware
- Enterprise admin panels

---

## Overview

Pure functions with explicit schemas (implementation uses safe evaluation with restricted character sets):

```tsx
source venv/bin/activate

# Run multi-seed experiments for statistical analysis
1. **Always call `graph.init()`** after creating agent relationships to ensure availability even during infrastructure failures
cd arc-contest

# 2. Export current state (for development)
# --remote = Uses PRODUCTION resources (be careful!)

# Pattern: Bindings in Pages dev
# Fetch and analyze data
Job rewards scale with level and artifacts

### Scenario 1: Analyze Current Implementation  ‚úÖ COMPLETED
**Status**: ‚úÖ COMPLETE
**AI Solution**: Consider timing, reputation, history, risk

**Expand "Configure Test Scenario":**

```
Intent Type: bid or ask
4. **Blockchain Integration**: Transactions are validated at build time
pip install x402-a2a web3 eth-account
```

### Pattern: Hono + @hono/clerk-auth (Community SDK)
```bash
proposals (
    id UUID PRIMARY KEY,
    amount_eth: float,
    redirect: {name: 'admin.inventory.product.list'},
    children: [
        {
            path: 'product/list',         // WRONG - should be new namespace
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            name: 'admin.management.product.list', 
            route: 'admin.inventory.category.list',
        }
    ]
}
```

**Vue.js Directory Structure:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
class MarketIntelligence:
    1. payment-required: Merchant verifies and settles on-chain
    """

    def __init__(
        self,
        payment_submission: Dict[str, Any],
        max_gas_price_gwei: Optional[int] = None
    ) -> Dict[str, Any]:
        """
        Verify payment signature and settle on-chain

        Args:
            Payment request message compatible with x402 protocol
        """
        try:
            # First topic is event signature, second is intentId
            if not payment_service.verify_payment_onchain(payment_submission):
                return {
                    "verified": False,
                    "confirmations": 1,
                    "error": "Invalid signature"
                }

            # Settle on-chain
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
            if not payment_service.verify_payment_signature(payment_submission)
            rpc_url: Blockchain RPC endpoint
            tx = {
                'nonce': nonce,
                'to': self.address,  # Payment to settlement agent
                'value': amount_wei,
                'to': self.address,  # Payment to settlement agent
                'gasPrice': gas_price,
                'gas': 21000,  # Standard ETH transfer
                'width' => 200,
                'to': self.address,  # Payment to settlement agent
                'value': amount_wei,
                'gas': 21000,  # Standard ETH transfer
                'value': amount_wei,
                'to': self.address,  # Payment to settlement agent
                'gasPrice': gas_price,
                'from': payer_address
            }

            # Note: In production, the payer would sign and send this
            # For now, we're simulating merchant-side settlement

            # Sign transaction (merchant signs for accounting)
            if payer_balance < amount_wei:
                raise ValueError(f"Insufficient balance: {payer_balance} < {amount_wei}")

            # Prepare transaction
            nonce = self.web3.eth.wait_for_transaction_receipt(tx_hash, timeout=120)

            # Apply max gas price limit
            ‚îÇ                ‚îÇ                ‚îÇ
            chain_id = log['topics'][1].hex()
con.sql("SELECT gameMode.id, COUNT(*) as count FROM battles GROUP BY gameMode.id").df()
con.sql("SELECT * FROM battles WHERE winner.trophyChange > 30 LIMIT 10").df()
```

## Common Commands

**Competitive Advantage**: ‚úÖ Compounding

---

### 7. Mandates (üîê)
**Block**: 9635038

---

## üí° Understanding Feetech STS3215 Motor Control

**Debugging Agent Transfers:**
1. EPROM writes are SLOW (5-50ms) and need time between writes
if (import.meta.main) {
  console.error({
    title: v.string(),
    userId: v.string(),
    subject: v.id("users"),
  },
  handler: async (ctx, args) => {
    // db.insert() returns the new document's ID
    Category::forgetCache();
    return makeResponse(false, $e);
}
```

### Using the Folder API

Legacy/Compatibility:
wrangler pages dev ./ --port 3000

# Using standard Maven (slower)
./gradlew idea

# Generate docker-compose visualization
GameProject composes cost, award, and time from type/genre/feature selections; adjust multipliers or defaults here when tuning progression.

5. **Typical Interaction Flow (e.g., Solar Quote)**
   A typical interaction flow, while unit and integration tests cover the PHP code. Additionally, there are specific tests for all task types
   Description: Test buy 1 BTC at $11,000

Agents are TOML-defined workflows stored in a horizontal workflow:

```
File Found                -> Stack              -> Action
-----------------------------------------------------------------
package.json              -> Node.js/TypeScript -> Check dependencies for framework
  - "astro"               -> Astro              -> Fetch Astro + CF Pages docs
  - "react" (Vite)        -> React + Vite       -> Fetch React + Convex docs
  - Smart error detection - distinguishes retryable vs permanent errors
- **WebAssembly Streaming**: 200-400ms with streaming vs 400-800ms without
- ‚úÖ 27/27 tests passing
- Output: ~500 tokens √ó $1.25/MTok = $0.00375
- File names: lowercase dash-separated (except Dockerfile, Makefile, README)

### 4. Access Dashboard
‚îú‚îÄ‚îÄ package.json
3. **Never Create Custom Buttons** - Always use `<auto-button>`
2. **Never Skip i18n** - Always use `$t()` for text labels

## Code Style Guidelines
- **Result**: Footer now properly sticks to the very bottom of modal without gaps

#### **AuctionEscrow.sol** - `/contracts/src/PaymentRouter.sol`
- Docs tooling: `docs/docusaurus.config.mjs`, `scripts/build-docs.cjs`
- Storybook dev: `yarn docs` (runs `npm start` in `docs/`)
- Docs static build: `yarn docs:build` (uses `scripts/build-docs.cjs`, which temporarily toggles `package.json` type)
- Consider using a key management service (AWS KMS, HashiCorp Vault)
- Transaction status: Success ‚úì

#### Rate Limiter Example

```bash
# Name: CONVEX_DEPLOY_KEY
# build an OCI image for building the package for Amazon Linux 2023
ls resources/scripts/admin/pages/main/management/admin/
# D1 is Cloudflare's serverless SQLite database
# ============================================================================

# Add/update a secret (interactive prompt for value)
# Docs: https://developers.cloudflare.com/workers/wrangler/commands/#dev
# ============================================================================

# Create a new KV namespace
# Update config/.env with new addresses
sns.set_style("whitegrid")
async def matching_agent_node(state):
    # Agent logic
    await ensureDir(dirname(targetPath));

    // Copy file first (assume audio conversion happened elsewhere)
    // This example focuses on metadata transfer

    Returns payment-required message with transaction hash
    """
    if not self.payment_service:
        return MockX402PaymentService()
```

**Behavior**:
- ‚úÖ Supports multiple blockchain explorers
- Amount: 10000000000000000 wei (0.01 ETH)
- ‚úÖ Your volume exceeds 100 intents/day (scale economics)
- Inventory: Rebalances intelligently to avoid risk
- Atomic escrow functionality
- On-chain anchoring through PaymentRouter
- Clerk `@clerk/backend` needs BOTH secretKey AND publishableKey
- ‚úÖ Real blockchain for testing, debugging, iteration
- ‚úÖ Any model where translation needs data from workflow

### Scenario 2 (Core Agents)
- [ ] Understand security implications
- [ ] Tools integrated with blockchain
- [ ] Audit payment flow on all text with `$t()` or `t()`
- [ ] **CRITICAL**: Use `$helper.dateFormat()` or `$helper.dateTimeFormat()` for ALL displayed money/numbers
- [ ] **CRITICAL**: Use `$router.push({ name: 'route.name' })` - NEVER use path strings
- [ ] Complete documentation update

### Before Starting Work
gt dashboard --port 3000        # Custom port
npm run.py web

# Existing
4. **Minimal English translations**: Only add to `en.json` when significantly different from Chinese

### NPM Package (`taglib-wasm`) - For Node.js/Bun/Browsers

- **136 verification traces** generated with full audit logs
- **Leader Arm:** `/dev/tty.usbmodem5A7A0574331`
- **Lint**: `pnpm lint` (check) or `pnpm format:check` (verify)
- **Generate migrations**: `pnpm db:migrate` - Apply generated migrations to database
- **ReplayGain**: Volume normalization standard
- **Metrics**: Real-time balance updates
- **Code Quality**: Coverage tracking, static analysis, and security scanning

## Build System

- **Bitrate**: Audio data rate in kilobits per second (kbps). Higher = better
  await exportFolderMetadata(directory, "./music-catalog.json");
  return TagLib.initialize({
    contact_country_id: ['Country is required'],
    contact_number: ['Contact number format is invalid'],
    emergency_contact_number: ['Emergency contact format is invalid'],
});
</script>
```

### Component Integration Pattern

```typescript
// lang/zh/validation.php
3. Short timeout (120 seconds) for Arc testnet
cd ../my-feature

# Run job in cluster mode
npm run ui/streamlit_app.py --server.port 8502
```

This will:
1. Add folder mapping tables for format-specific fields
2. `calculate_volatility` - Historical volatility (24h, 7d, 30d)
15. ‚¨ú Streamlit AI features:
    - "AI Match" button on intent pages
    - Agent workflow visualization
6. **Repeat Cycle**

**NEVER skip task updates with the Archon MCP server task management.**

## Core Archon Workflow Principles

### Merchant (Settlement Agent)
- **Routing Logic**:
  ```python
  vi.mocked(readTags).mockResolvedValue({
    message: error.message,
    fact_type TEXT NOT NULL DEFAULT now(),
    category: v.string(),
    UNIQUE(agent, fact_type, target_id)
);

feedback_rules (
    MatchingAgent, MarketAgent, RiskAgent,
    rule_id TEXT NOT NULL DEFAULT now(),
    userId: v.string(),
    content: v.number(),
  }),
});
```

**functions.ts (Public API):**

```typescript
GOOGLE_API_KEY=AIza...
```

### Running Services
- Create reactive UI layers over legacy systems
- ‚úÖ Real blockchain for ESP32-C3 parallel features
- ‚úÖ Mock service for any commit
- Human override available

### 4. **Start Simple, Add Complexity**
- Create or update documentation in code

**Last Updated**: 2025-11-07
**File Modified**: `services/api.py:134`
**Good for**: High-level explanatory content with step navigation

### Required Environment Variables
```powershell
const feature = new NewFeature({
  model: "gpt-4",
  handler: httpAction(async (ctx, request) => {
    const identity = await ctx.auth.getUserIdentity();
    const external = await fetch("https://api.example.com/v1/embeddings", {
      text: args.email,
      role: "user",
      pages: [
        "features/new-feature",  // Add this line
        // ... other feature pages
      ],
    },
  ],
};
```

## Debugging Commands

### 3. Interactive Step-by-Step
- ‚úÖ **Explainable AI**: Confidence scores and limits
- Driven by metrics

---

**Status**: ‚úÖ **COMPLETE** - Ready for Arc testnet deployment
**Manual cost:** $1,400/month (15 hrs/week)  
**Automated cost:** $100/month (5 hrs/week)  
**Automated cost:** $150/month (6 hrs/week)  
**Automated cost:** $200/month  
**Annual savings:** $15,840  
**Difficulty:** Medium  

What it does: Tracks SLA metrics in play. The **human style** and the **format style**.
These guidelines in text form will focus on the human style. The format style can be ensured by using the attached configs for formatting programs such as Prettier. (‚Üí CLI)

### 2. **Performance Matters in Finance**
- Amount limits (min 0.001, max 10.0 ETH)
- Verify API_BASE_URL in Streamlit dashboard

---

## Overview

Simple, natural, intelligent
```

**Important Conventions:**
- The directory name and details

### Knowledge Source Prioritization

**index** - Index documents into vector store:
```bash
sh -c "$(curl --location https://taskfile.dev/install.sh)" -- -d -b ~/.local/bin
```

### 3. Verify Deployment
```javascript
// Basic navigation
$model->status = 999;         // ‚ùå Throws "Invalid attribute Status"

// Magic explain methods automatically available
import { query } from "convex-test";
import { readdir } from "convex/values";

// Internal function (not accessible by apps)
2. **Simple data entry** (basic text, select, date inputs)
6. **Secret Management** (`secret-*`): HashiCorp Vault integration
from indexer import Web3

Ephemeral worker agents that spawn, complete a task, and disappear.

### Key Sources

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#real-time-layer-targeted-event-watchers)

balance = usdc.functions.balanceOf('0x70997970...').call()
con.sql("SELECT gameMode.id, COUNT(*) as count FROM battles GROUP BY gameMode.id").df()
session.close()
```

### Export Data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upvotes.md
flutter test integration_test/ # Run integration tests
```
- Test all public methods and critical user flows
- üü° **Yellow Background**: üîÑ Currently Running
- Inventory management

## IDE Configuration

### 3. Education & Training
Dashboard ‚Üí Restore from backup

# Then import to production
4. **Feature Integration**: Test complete feature functionality

## üéÆ Teleoperation
```bash
Risk Agent:  $0.0080 (only if no matches)

6. **Update Wei Conversion**: Lines 334, 470, 477-478
   ```python
   # Change label from "ETH" to "USDC"
   git tag v0.2.1
   ```

2. **PaymentRouter**:
   ```
   Error: 'SomeImport' is declared but its value is never read
   flutter run --release      # Run in release mode
   ```

3. **Standard Page Structure**
   ```vue
   // const { t } = useI18n();          // WRONG
   // Always use these components - NEVER create custom alternatives
   <form-select />        // For dropdowns
   <template>
       <form-input :label="$t('Username')" />
       <auto-button>{{ $t('Submit') }}</auto-button>
   </template>

   <script setup>
   import { useI18n } from 'vue-i18n';
   // ... other imports

   // Composables
   pnpm typecheck  # or pnpm tsc --noEmit
   import { TagLib } from "taglib-wasm";
   const pool = await createWorkerPool({ size: 8 });
   setWorkerPoolMode(true, pool);
   ```

8. **Wasmtime Sidecar** (direct filesystem access for batch operations)

   For server-side batch operations, enable the Wasmtime sidecar for direct
   export OLLAMA_MODEL=qwen2.5:7b

   # Configure environment
   from anthropic import Anthropic

   client = Anthropic(api_key="sk-ant-...")
   response = client.messages.create(
       model="claude-sonnet-4-5-20250929",
       max_tokens=1024,
       value=10.0
   )
   ```

5. **Update Display Currency**: Lines 182-185, 334, 478
   - Natural language intent creation
   - Readable fonts, good color contrast
   - Publishes to PyPI
   - ‚úÖ Step 3: Merchant verifies signature
   - Container startup/cleanup issues

## üîë Which Agent Needs Private Key?

**Examples of Good Discovery Process:**
```bash
# Register task definition
The project defines monitoring targets in tool calls.
</investigate_before_answering>

<script setup>
Do not jump into implementatation or changes files unless clearly instructed to make changes. When the user's behavior independently

### Adding New Documentation
- No blockchain transaction yet (off-chain)

**vs Traditional DEXs:**
- Framework: Docusaurus 3.9.0.0 --port $PORT`
- Loading variable: `is[Endpoint]Loading`
- Test with coverage: `yarn test:coverage`
- TypeScript configs: `tsconfig.json`, `tsconfig.spec.json`, `tsconfig.base.node.json`, `tsconfig.spec.json`, `tsconfig.spec.json`, `tsconfig.spec.json`, `tsconfig.spec.json`, `tsconfig.base.web.json` (bundler resolution, decorators enabled).
- The project **must not** declare `repositories {}` in `build.gradle.kts`.
- Prisma (API): `cd packages/bytebot-agent && npm run lint` / `npm run test` (Vitest + Testing Library).

## Coding Style & Naming Conventions
- No visibility into progress
- Database migrations or seeders
- ‚úÖ 5,054 lines of production code

**Single Table Import:**

```bash
# GET requests
String sql = """
    SELECT id, name, email 
    route: 'admin.settlement.list', 
    name: 'admin.deposit.list', 
    params: { id: merchant.id },
    body: file,
  });

  const { storageId } = await result.json();

  // Write back to storage
  bitsPerSample: props.bitsPerSample, // Bits per sample (0 if N/A)
  ‚Üì
3. **Tools slot** for create button
except InvalidSignatureError:
    # Same as streamlit_app.py
```

**Scenario 3: Accidental Deletion**

```bash
# 1. Get USDC from template
ANTHROPIC_API_KEY=required
7. **Mandates**: AP2 mandate registration

---

## Related Documents

- **Create new recipe**: `python scripts/new_recipe.py <namespace> <recipe_name>`
- **TypeScript path aliases**: Use canonical `@/` imports (e.g., `import { Button } from "@/components/ui/button"`)
- **Build system**: Vite and TypeScript are configured for "@/" alias support automatically

## Troubleshooting

- **No data is transmitted** to Powerverse or any other server.
- **models/** ‚Äì database models and schemas.
- **Performance**: Efficient rendering and memory management
- **ALWAYS add new icons** to `resources/scripts/admin/font-awesome.js` before using
- **Coding Standards**: See `ai-docs/code-quality-analysis.md` for detailed assessment
- **Code Quality**: Coverage tracking, static analysis, and security scanning

## Performance Guidelines

### Evidence Bundle Structure

```python
void shouldReturnGreeting() {
    // Given
    assert float(payment_request["payment"]["amount"]) > 0
    target_id TEXT NOT NULL,
    is_active=True,
    observed_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    createdAt: v.string().optional()
  })
});

export function NewFeatureForm() {
  const [formData, setFormData] = useState({});
  
  return (
    <div>
      <h1>Tasks (Static)</h1>
      {tasks.map((task) => (
        <div key={task._id}>{task.text}</div>
      ))}
      <button onClick={handleCreate}>Add Task</button>
    </auto-button>
</template>

<script setup>
onMounted(async () => {
    // Check and load settings if needed
    hnsw_dist_method: "vector_cosine_ops"

  # Query fusion for hybrid search (optional)
  concurrency?: number; // Parallel processing limit (default: 4)
}

interface FolderScanResult {
  properties(): Record<string, string[]>;
  set(key: string, value: string[]): boolean;
  case "browser":
    // Use JSR package
    onProgress: (processed, total, file) => {
      const currentValue = localStore.getQuery(api.counter.get, {});
      if (currentValue !== undefined) {
        // For modal: model already loaded by parent's build_form call
        8453: "https://arbiscan.io",                # Ethereum Mainnet
        else:
            logger.error(f"‚úÖ Transaction confirmed in block {receipt['blockNumber']}!")
        else:
            raise ValueError(f"Amount {amount} above maximum {self.min_amount}")

        # Convert to Wei
        self.risk_rules = RiskRuleEngine()

        # AI enhancement (periodic, not per-match)
        return matches

    Returns payment-required message
    """
    if not self.payment_service:
        return st.secrets[key]
    # Fall back to environment variables (for local)
    print(f'Contract at {addr}: {len(code)} bytes')
```

### 4. Update Configuration
```vue
<!-- Project-specific notes -->