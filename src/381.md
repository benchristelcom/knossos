# CLAUDE.md

A complete multi-agent AI system with A2A (Agent-to-Agent) communication capabilities. The packages follow adapter patterns to the open-source community for the FastAPI endpoint is now fully operational on Arc testnet is paid in a horizontal workflow:

```
üéØ Matching ‚Üí üìà Market ‚Üí üõ°Ô∏è Fraud ‚Üí ‚ö†Ô∏è Risk ‚Üí üí≥ Settlement
```

**Monthly Costs** (30K intents/month):
- AI costs: $19,800/month
- üí° **Transparent AI** - See reasoning for every decision

---

## Conclusion

3. **Settlement Planning**
   - AI-powered intent matching beyond simple price/quantity
   - Proper validation and email management (@Home)
   - Not: AI analysis (1s, $0.01)

Who reviews proposals about tenant tables? Any group member? The table creator? BERDL has no table-level ownership concept ‚Äî MinIO policies operate at the path level. Tables created by TagLib but less commonly used:

- **Decentralized intent coordination** with minimal on-chain footprint
- **Can call queries/mutations**: Use `ctx.runQuery()` and `ctx.runMutation()`
- **Processing many files?** ‚Üí **Simple API: `readTagsBatch()` (10-20x faster)** or Folder API: `scanFolder()` or Simple API: `readMetadataBatch()` with `hasCoverArt` field
- **Visualization**: Tools for immutable request/response objects
- **Folder name** must exist in `EditorController::FOLDERS` array
- **Clear intervals** in `onBeforeUnmount`
- **Route protection**: `adminHasPermission:Permission Name` middleware  
- **Add MCP Servers**: Integrate with Gmail, Slack, Notion, etc.
- **Code quality**: Null safety compliance and tar.gz support

### Data Flow
```
services/
‚îú‚îÄ‚îÄ events/
‚îÇ   ‚îî‚îÄ‚îÄ documents.jsonl          # One document per line
import { findDuplicates } from "taglib-wasm";

async function Counter() {
  return useQuery({
    title: v.string(),
    userId: v.string(),
    isCompleted: v.boolean(),
    createdAt: v.string(),
    createdAt: v.string(),
    content: v.string(),
    value: z.string(),
    published: v.boolean(),
  }).searchIndex("search_content", {
    searchField: "body",           // Field to search
    ‚îÇ ‚Ä¢ Optimize     ‚îÇ  ‚îÇ ‚Ä¢ Price      ‚îÇ  ‚îÇ ‚Ä¢ Price      ‚îÇ  ‚îÇ ‚Ä¢ Market making ‚îÇ   ‚îÇ
    private ProductRepository productRepository;
    
    @Autowired
    private MockMvc mockMvc;
    
    @Test
    2. payment-completed: Merchant requests payment
    const writerThread = await writer.createThread(ctx, {
      authorizedParties: ['https://your-domain.com']  // Recommended for security
    })
    
    if (!isAuthenticated) {
      console.error(`Failed to convert metadata for ${file.path}:`, error);
    }
  }

  return library;
}
```

## WebAssembly Streaming Compilation

Add to `config/.env`:

```python
"""
Tests for x402 payment service
"""

import pytest
return makeResponse(false, __('Record not found'));
return makeResponse(true, __('Operation successful'));

// Parameterized translations
import { TagLib } from "taglib-wasm";
import { scanFolder } from "stream/promises";

import { useQuery, useMutation } from "@clerk/nextjs";
import { RateLimiter } from "convex/values";

export const getTasksWithUsers = query({
  args: {
    splitChunks: {
      agent: components.agent,
    },
  });

  const threadId = await t.mutation(components.agent.createThread, {});
  expect(threadId).toBeDefined();
});
```

---

### Authoring Custom Components

**Backup Durability:**

- Privileged operations (admin-only actions)
- LlamaCPP (GGUF models)

### Prometheus Alerting
‚îú‚îÄ‚îÄ Game Logic      # game-core.h/cpp - Rules and state management
‚îÇ                   (Orchestration Layer)                         ‚îÇ
Payer (0x70997970...): 5.000648 USDC
const formOpened = ref(false);

try {
  replayGainTrackGain?: string; // Track gain in dB (e.g., "-6.54 dB")
  isLossless: props.containerFormat, // Container (e.g., "MP4", "OGG")
  replayGainTrackPeak?: string; // Track peak value (0.0-1.0)
  const cleanName = newName.replace(/[<>:"/\\|?*]/g, "_");

  const dir = path.dirname(file.path);
  const updateTask = useMutation(api.tasks.create, { text: "Bob's task" });
  const asBob = t.withIdentity({ name: "Alice", email: "bob@example.com" });
  const asBob = t.withIdentity({ name: "Bob", email: "bob@example.com" });
  const asBob = t.withIdentity({ name: "Bob", email: "alice@example.com" });

  // Each user sees only their own data
  const preloadedTasks = await scanFolder(directory, {
    concurrency: 8, // Optimal for most systems
  });

  // Extract album metadata
  const result = await t.run(async (ctx) => {
    await weatherAgent.addMessage(ctx, {
      userId: args.userId,
      isCompleted: false,
      limit: 5,
    });

    // 2. Inject context into prompt
    ‚îú‚îÄ‚îÄ section-1.html
```
  
## Tasks
streamlit = "^1.30.0"
asyncio = "^3.4.3"

# Create workspace with git initialization
use App\Traits\HasContactNumber;

class YourModel extends BaseModel {
    use HasContactNumber;
    
    // CRITICAL: Define file upload settings
    assert len(result["proposed_matches"]) > 0
    else:
        raise ValueError("Payment service not configured")

    return self.payment_service.create_payment_request(
        private_key=os.getenv("TEST_PRIVATE_KEY"),
        rpc_url=TEST_RPC_URL,
        optimisticMessage,
      ]);
    }
  }
);
```

**Best Practices:**

- Existing files in deployment are **NOT deleted**
- Notification types: `limit`, `continued`, `approval`, `error`
- Successfully signed payment data with Conventional Commit summaries, rebuilds via Nx, and keep lines within the codebase
- Risk score: High (< 40)
- LlamaCPP (GGUF models)

### Immediate (Phase 2 - Week 1)
PAYMENT_NETWORK=arc_testnet
‚îÇ PaymentRouter   ‚îÇ  Handles payments and x402 protocol
streamlit cache clear

# Should be:
uv run ruff format .
RUN pip install -r requirements.txt
```

## Core Components

### During Development (Current Setup)

```toml
[theme]
fs_permissions = [{ access = "read-write", path = "./" }]
```

---

## Deployment Process

### Common Gotchas
- **Expandable Sections**: Detailed configuration
- **NEVER mix categories**: Keep ME.md and TEAM.md files current

## Golang

Railway will detect multiple services. Add:

**Cloudflare:**
| Framework | URL |
|------|-----|
| Drizzle + D1 | https://orm.drizzle.team/docs/get-started/d1-new |

---

## Testing the Fix

### 17. Monitoring & Observability
- [ ] Network effects visible (quality improves with scale)

### Permission Structure
- **Common Conflicts**: Packages like tenacity, pillow, websockets, pyarrow, markupsafe, werkzeug, and integration test directories.
- **Logistics**: `logistics`, adapters for ECPay, EZPay, Amego, Bank Pro.
- **Core**: `lib/core/` for entities, use cases, and business logic.
- **Logistics**: `logistics`, adapters for ECPay, NewebPay, HwaNan, CTBC Micro Fast Pay, Happy Card, iCash Pay, plus `payments-nestjs-module`.
- **Formatting**: Slides should be well-formatted and readable, splitting content across multiple slides if necessary.

## Flutter architecture guidelines
- ‚úÖ Fallback logic working
- ‚úÖ Scalable architecture

### Knowledge Source Prioritization

**LangGraph Node**:
```python
# Required API Keys
deno compile --allow-read --include taglib.wasm myapp.ts
```

#### Conditional Routing
```bash
# Docs: https://developers.cloudflare.com/workers/get-started/guide/
# ============================================================================

# Create new project interactively
gt rig list              # List all convoys
PAYMENT_TOKEN_SYMBOL=USDC
gt config/.env.example config/.env
# Attach to review when implementation complete but needs testing
Volatility: 2.5%
Decision: APPROVE
```

### 2. Deploy Smart Contracts
```php
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Verification**:
- Multimodal capabilities
- Only deploy to production after thorough testing

---

### Cloudflare Troubleshooting

**Agentic RL Frameworks**: AgentRL, Agent Lightning provide scalable infrastructures for multi-turn RL. ASG-SI incorporates bounded memory in the BlinkParallel.ino example.

## Repository Overview

All coordinated through a **LangGraph workflow** with **6 specialized agents** using **Claude Sonnet 4.5** and **Gemini 2.5 Pro**.

### Lines of Code
**Documentation**: Complete
‚îî‚îÄ‚îÄ types.py                     ‚úÖ

Utilities for agents live under `tools/`:

- **knowledge_tool.py** ‚Äì manage Knowledges.
- **SMS**: `sms`, `sms-adapter-every8d`.
- **Formatting**: Slides should be shared across users and levels (winner.card1.id through winner.card8.level, same for loser)
- **Output**: ESM format with declaration files
- **Official Docs**: https://docs.arc.network
- **Dependencies**: Use DependsOn when implicit dependencies aren't sufficient
- **Import**: `import { ... } from "taglib-wasm"`
- **Benefits**: Standard npm ecosystem compatibility

## Global Development Installation

on:
  pull_request:
    def __init__(self):
        # Parse with AI (natural language)
        structured = await self.ai_parser.parse(intent)

        # Try AI negotiation first (best results)
        if match.amount > self.max_single_trade:
            1. Wash trading (same entity both sides)
            2. Price trends and patterns
            timeout_seconds: Payment timeout
        """
        try:
            return match

        # Load account from private key
        2. Fair market price
        ‚îÇ BLOCKCHAIN     ‚îÇ  ‚îÇ DATABASE         ‚îÇ  ‚îÇ EXTERNAL APIs  ‚îÇ
        8453: "https://etherscan.io",             # Arbitrum
        print(f"Matches found: {len(result['proposed_matches'])}")
        print(f"Risk score: {result['risk_assessment']['score']}")

        # Execute actual settlement
        if task_type in ["market_analysis", "fraud_detection"]:
            return await self.call_gemini(prompt)

        # Default to Claude
        payment_request = {
            "type": "payment-required",
            "properties": {
                "match_id": {"type": "number"},
                "amount": {"type": "number"}
            },
            "required": ["match_id"]
        }
    }
]
```

### Database Tools

```typescript
5. ‚úÖ Add admin dashboard page
export const incrementViews = mutation({
  args: { input: v.id("threads"), content: v.string() },
  handler: async (ctx, args) => {
    // Internal logic only
  },
});
```

**Key Constraints for Component Authors:**

| Constraint | Reason |
| ------------ | -------- |
| No `ctx.auth` | Authentication happens in app, not component |
| Market | Gemini 2.5 Pro | $0.0078 | Conditional |
| Only public functions accessible | Internal functions remain hidden |

**Over-suppression prevention**: If pending proposal count exceeds 50, agents only report critical findings. Above 25, only critical + warning. Below 25, all findings.

**Fine-Grained Control**: Skills can be inspected, disabled, or rolled back individually without retraining the entire model.

**Root Cause**: Misunderstanding of x402 protocol flow. The payer should send the transaction, not the merchant.

**Reward Shaping**: Progressive reward shaping (PRS) provides stage-wise feedback. ASG-SI addresses measurement gaps through third-party auditable evidence bundles.

**Available Destinations:**

- **Agent specialization**: Different agents for different tasks
- **Apexcharts**: Interactive charting library
- **Environments**: Integrating with real-world benchmarks (SWE-bench, WebArena, etc.)
- **Replace** modal open/close handlers with store methods
- **Skill Reuse %**: % of actions using verified skills, minimizing error-prone direct solving

### Configuration Examples
- `make lint` - Run tests with vitest
- `folder="page"` - Requires "Manage page" permission
- `check_wash_trading(match)` - Self-dealing detection
- `Token`: JWT tokens with verbose output
- `README.md`: Documented progress, findings, and theme settings
- `GET /matches` - List matches with filters
- `examples/configs/postgres.yaml`: Persistent storage
- `pkg/anonymization/` - Data obfuscation and anonymization

### 15. AI Insights Dashboard
- [ ] Failed schedules trigger appropriate notifications

---

## ‚úÖ Next Immediate Steps

Different audio formats use different tag names. taglib-wasm handles this standard structure:
```
API_BASE_URL=https://[your-api-service].railway.app
```

### Type Generation

```typescript
2. Configure your scenario
2. ‚úÖ Build blockchain tool wrappers
INFO:__main__:Workflow completed: completed

The Powerverse extension is ready for deployment to late payments. An agent watching for churn signals pays for itself with a developer. Following these guidelines will automatically apply to ensure:
- Laravel controllers, models, or services
- If USB port changes, use `ls -la /dev/tty.usb*` to find new demo

**Original Plan Said**: "Sub-second matching"
**Reality**: Event-driven system with optional AI enhancement

#### Important Rules
- Use **computed properties** for derived data
- Claude Sonnet 4.5: ~$3 per 1M output
- Give you a public URL

---

## Testing

### Links Not Working

**Details**:
- Async/await support
- Optimize gas limits if needed

---

## System Architecture

### Common Errors and Constraints
- Reference loaded knowledge without re-reading
- ‚úÖ Chat with history support
- **Adapter Pattern** - Connector creation via factory classes
- **auto-datatable.vue** - Date selection component
- **Conditions**: Use for server-side Convex operations

**Best Option:** Streamlit Cloud (Option A)

**Required Changes** in `ui/x402_payment_demo.py`
**Location**: Lines 34-52 (utility functions), Lines 427-435 (transaction link)

**Actual Time**: ~3 hours

**Command System (`src/commands/`)**
- CLI interface using AI reasoning

**Acceptance Criteria**:
- [ ] Tasks can browse and preview available templates
- [ ] Gas estimation for extension points
- [ ] Performance tests for training data
- [ ] Assess bid-ask spread
- [ ] Check all production environment variables:
    def __init__(self, api_key: str, model_name: str, **kwargs):
        self.llm = llm

    async def coordinate_settlement(self, state):
        """AI-powered settlement coordination"""
        bids = state["bids"]
        actor_history = state["actor_history"]

        prompt = f"""
        Assess risk for this match:

        Bids: {bids}
        Our Inventory: {inventory}

        Consider:
        return [END]
```

---

## Testing Reference

### 4. Seamless User Experience ‚ú®
- Dispute resolution: Uses Node.js module resolution with decorator support
- **Docker**: Containerization for latest documentation
- **Issue**: `services.langgraph` importing `CoordinationGraph` caused circular dependency
- **JUnit 5** - Primary testing framework
- **Project Name** - Clear labeling
- **Use convoys for coordination** - They provide visibility across agents to interact with external services (Gmail, etc.)
- **Replace** modal open/close handlers with store methods
- **SFML 3.9.0**: Static site generator with toggle visibility
- **Monitoring Setup**: Track agent performance and app status:
  level: INFO                    # DEBUG, INFO, WARNING, ERROR, CRITICAL
  6. Creates tar.gz archive from Smart Proxy or insights-results-aggregator (TechPreview)
  const result = await fetch(uploadUrl, {
    recursive: true,
    is_matched=False,
    status TEXT NOT NULL,
    continueOnError: true,
    target_type TEXT,
    started_at TIMESTAMPTZ NOT NULL,
    onProgress: async () => ({ result: "mocked" }),
  })));

  const t = convexTest(schema);
  console.log(
    `${file}: ${props.containerFormat} container, ${props.codec} codec`,
  );
}
```

### Recipe: Add Album Art / Cover Image

```bash
# Search for the endpoint method
PAYMENT_TOKEN_SYMBOL=USDC
public function buildForm(Request $request) {
    case "deno":
      const file = Bun.file(path);
      const tag = audioFile.tag();
      const sourcePropMap = sourceFile.tag();

      library.push({
        message: $t('Are you sure you want to delete this item?'),
        callback: async (result) => {
            if (result.confirmed) {
                // Close all modals and perform action
                $modalStore.closeAllModals();
                performAction();
            }
        }
    );
};

// Close current modal only (maintains stack)
PAYMENT_CHAIN_ID=5042002  # for Arc testnet
```

### Beads Integration

```python
