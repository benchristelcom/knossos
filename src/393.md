# CLAUDE.md

The updates to these "CentOS 7" branches are almost always just cherry-picked version updates
‚îÇ   ‚îî‚îÄ‚îÄ server.py              ‚¨ú Graph implementation
Cargo.toml                -> Rust (WASM)        -> Fetch Rust Workers docs
scoop install @convex-dev/rag        # RAG (Retrieval-Augmented Generation)
2. **Needs private key** to sign settlement transactions
Market Agent:     $0.0078
1. Improve event handlers
‚îÇ
‚îî‚îÄ‚îÄ package.json                  # Dependencies and scripts
```

## Emergency Protocols

### API Keys (Optional for Demo)
2. Check jitter/StdDev (should be near 30)
await updateTags("song.m4a", mp3Tags);

// That's it! For more control, keep reading...
```

## Package Distribution

This file contains a `project.json` pointing build/test/lint/clean to the shared PostgreSQL Proposal Board.

```
OpenMetadata (catalog + ingestion + change events)
    workflow.add_node("fraud_check", fraud_agent_node)
    col2.metric("AI Decisions Made", 1247)
    workflow.add_node("fetch_data", fetch_intents_and_orderbook)
    col1.metric("Matches Found (24h)", 145)
    private Long id;
    
    @NotBlank(message = "Product name is required")
    sock.sendall(struct.pack(">I", len(payload)) + payload)
```

**Result**: Contract addresses in sidebar are now clickable markdown links

---

### Error Handling

**After each task, conduct focused research:**

```typescript
// Model setup with Records
source venv/bin/activate
BASE_RPC_URL = "https://rpc.testnet.arc.network"
needs = ["bump-version"]

[[steps]]
binding = "DB"
4. Expand intent cards
public function buildForm(Request $request) {
    throw new Error("File too large");
  }

  // Validate minimum size
  ‚Üì (executes, ~3-5 seconds)
onMounted(async () => {
    if (props.model?.id) {
        // For modal: model already loaded by parent
        2. Check payment mandates
        v-model="formState.emergency_contact_number" 
        :errors="formError" 
        :label="$t('Emergency contact number')"
        select-name="emergency_contact_country_id" 
        v-model:input-value="formState.emergency_contact_country_id" 
        v-model:input-value="formState.content_en"
        :label="$t('Country')"
    />
</template>
```

### When to Use FormContact

| File | Changes |
|------|---------|
| `transfer_usdc.py` | Created - Script to transfer USDC between accounts on Arc testnet |

---

## Testing the Fix

### 1. LLM Infrastructure (100%)

#### Base Agent Class (`services/agents/base_agent.py`)
- [ ] UI components implemented in agents-manage-ui
- [ ] Basic functionality tested
- [ ] Verify intent authenticity
- [ ] Test fallback scenarios

### 1. LLM Client Wrappers
- [Local Storage Adapter](https://www.npmjs.com/package/@rytass/invoice-adapter-r2): Cloudflare R2 storage with multi-payment method support
- [x] Order book updates with new intent
- [x] Settlement Agent prompts reference USDC
- [Amego Invoice Adapter](https://github.com/rytass/rytass-utils/blob/main/tsconfig.base.node.json): Shared TypeScript configuration with S3-compatible API
- [x] Installed google-generativeai (0.8.5) - Gemini 2.5 Pro
- [x] Created `services/llm/gemini_client.py` - Claude Sonnet 4.5 wrapper
  - Implement schedule data model and storage strategy
  - Bulk operations

### 0. CI Pipeline (`.github/workflows/release.yml`)

3. **Create `convex/auth.config.ts` (file-based auth config):**

```typescript
// Batch: ~5-6 seconds (16-20x faster!)
```

#### Concurrency Tuning Guide

```mermaid
import { scanFolder, updateFolderTags } from "taglib-wasm/simple";
import { join } from "fs/promises";

import { useQuery, useMutation } from "convex/react";
import { readFile } from "@/convex/_generated/api";

// v0.4.x
make logs

# Bulk upload from bucket
bd formula list             # List formulas
‚úÖ **Educational** - Learn how multi-agent AI works
the next week to new pages
5. **Better UX on mobile** when form needs full screen space

### Environment Variables

**VERIFY at:** <https://docs.convex.dev/components>

### What Are Components?

**Answer: Settlement Agent**

1. Railway will automatically start building
archon:get_project_features(project_id="...")

# Create tasks aligned with features
2. **Release**: On main branch, run `bun run release`
   - Main file path: `ui/streamlit_app.py`

2. ‚úÖ **ESP32** (Xtensa)
   - Creates and tests package locally
   - Matching Escrow with atomic settlement
   - Dashboard displays real-time data
   - AI agents in action
   - Creates GitHub release

### 5. **Refresh for New Run**
3. Fill in the response

**If knowledge queries return empty results:**

1. **Check Current Task** ‚Üí Review task details and approval requests.

## Observability

- **Arc Testnet Explorer**: https://testnet.arcscan.app
- **Query performance metrics**: Execution time, call frequency
- **Binary**: Executable CLI via `dist/index.js`

## Key Directories

- `teleop_so101.py` - Main teleoperation script (30 Hz control loop)
- `F5` - Full page refresh (browser)

---

## üöÄ Next Steps

### Adding New Connectors
wrangler d1 migrations create <queue-name> <migration-name>
# Creates: migrations/0001_<migration-name>.sql

# Or run complete workflow
const title = tag.getTitle(); // No getter methods
const titleProp = PROPERTIES.TITLE;
const userTasks = useQuery(
  directory: string,
  updateFn: (tags: Tag) => Partial<Tag>,
) {
  const taglib = await TagLib.initialize();
  targetFile.dispose();

  // Write back to storage
  keys
- **TypeScript Compilation**: Generates both ESM and execution
- **Key features**:
  - Configurable via `DataPolicy` in DataGather CR
  - Implement collaboration activity feed
  - **Estimate**: 2 days
  - **Estimate**: 2 days
  - **Estimate**: 3 days
  - **lists.less** - ...
  - **tables.less** - very, very simple table styling, there's still a time and place for tables
  - **Dependencies**: TASK-021

- [ ] **Step 4.1**: Test with merged binary ‚ö†Ô∏è BLOCKED
  - Create visual schedule timeline
  - **Estimate**: 2 days
  - **Dependencies**: None

- [ ] **TASK-021**: Implement parallel execution engine
  - Create intelligent task distribution
  - Build email notification (OS-level)
  - **Gas Cost**: ~0.000021 ETH

**Q4 2025: Expansion**
- Phase 1: Pure algorithmic (works, fast, cheap)
- Risk level (Low/Medium/High)
- Invalid signatures
- Contract addresses
- Adjust JVM options in database
- ‚úÖ Structured JSON ‚Üí color ‚Üí state; shared tokens in `grafana/provisioning/dashboards/`
- Teleoperators: `/Users/drew/.cache/huggingface/lerobot/calibration/robots/so101_follower/`

## ‚ö†Ô∏è IMPORTANT: Always Activate venv!
```bash
# Navigate to Payments tab and run demo
```

---

### Issue: API Connection Timeout

**Before Fix**:
- Oracle authorization and revocation
- No filesystem access; work with buffers in memory
- Commands: `init`, `start`, `stop`, `list`, `status`
- HTTPS required in production

## Technology Stack

### Cost
- [x] Tool execution works
- [x] 99% cheaper than original plan
- [x] Intent appears in "My Intents" page
- [x] Update index.rst table of contents (added Architecture section)
- [x] Arc testnet integrated as default network
- [x] LangGraph workflow functional
- [x] Merge quickstart.rst with high-level overview
- [x] All public methods have docstrings
- [x] Uptime: 99.9% ‚úÖ
- [x] Transaction confirmed on blockchain
- [Payments NestJS](https://www.npmjs.com/package/@rytass/sms-adapter-azure-blob): Azure Blob storage for payment webhook handling
- [x] Create streamfield.rst documenting all block types
- [x] Intent submission via ERC-20 Transfer events
- [x] Intent submission via API returns 200
- [NewebPay Payment Adapter](https://www.npmjs.com/package/@rytass/secret-adapter-vault-nestjs): HashiCorp Vault client for CMS operations
- [x] Can handle 1000+ intents/sec
- [x] Market agent class functional
- [x] API endpoints return correct data
- [x] System works without AI (graceful degradation)
- [x402 Python Library](https://github.com/rytass/rytass-utils/blob/main/tsconfig.base.node.json): Shared TypeScript configuration with coverage collection
- [x] Router selects correct model
- [x] No regression in existing functionality

---

## üèóÔ∏è **Development Guidelines**

### Mode 1: **Pure Algorithmic** (No AI)
```vue
<template>
    <!-- Always use $t() for ALL user-visible text -->
    <td>{{ $helper.fundFormat(record.created_at) }}</td>
    <ConvexProvider client={convex}>
      <App />
    </ConvexProvider>
  </React.StrictMode>
);
```

**Technical Explanation:**

- **import.meta.env**: Vite's environment variable syntax (NOT process.env)
- **Target Platform**: 2024.2
- **seatunnel-engine-client** - Client API for database inspection
- **Functional Programming**: Modern Java idioms for cleaner, more maintainable code

### 2. Verify Explorer Link Timing
- **Cloudflare MCP**: List/create resources, search docs, verify resource IDs

### Reliability
- [x] Created `services/llm/claude_client.py` - Gemini 2.5 wrapper
  - Gathers targeted data to reduce archive size

#### 1. Verify API Client Method Exists

Agents can be plausible-sounding but scientifically incorrect. `genome_id, fitness_score, growth_rate` might be described as "Genome fitness metrics" when it's actually "Fitness assay results from transposon insertion sequencing." Wrong descriptions are worse than no descriptions because they become authoritative once applied.

### The Problem We Solve

Simple, natural, intelligent
```

**Technical Explanation:**

- JAMstack architecture (Cloudflare Pages + Convex backend)
- Use a separate payment wallet with minimal on-chain footprint
- Foundry for development and risk analysis
- ‚úÖ `requirements.txt` - Python dependencies
- No cold starts for Convex functions

---

## üìã TODO (Phase 2: Complete Multi-Agent System)

### Setup

```tsx
// Transaction A: Reads Alice's account (v1: $14)
2. Async processing where latency doesn't matter
public function getRelatedData($relatedKey) {
    try {
        \DB::beginTransaction();
        
        // Create or Update (determined by ID presence)
        self.ai_optimizer = MatchingOptimizer(
            prompt=f"""
            Analyze trading patterns and suggest parameter improvements:

            Data: {historical_data}

            Provide:
            logger.error(f"Error settling payment signature: {e}")
            else:
                logger.info(f"Payment signature verified for {payer_address}")
            else:
                logger.warning(f"Invalid signature from {payer_address}")
            return payment_completed

        context = self.get_relevant_context(question)

        if match.confidence > 0.8:
            raise ValueError(f"Amount {amount} above maximum {self.max_amount}")

        # Convert to Wei
        3. Position sizing
        if not private_key.startswith('0x'):
            private_key = f'0x{private_key}'
        self.account = Account.from_key(private_key)
        return {"liquidity_strategy": strategy}
```

**Tools Available**:
- `services/payment/x402_service.py` - Full coverage
  - `analyze_liquidity` - Check liquidity provider inventory
  - `execute_escrow` - Call escrow contract
  - `batch/` - AWS ParallelCluster recipes
  - `res/` - Research and Engineering Studio recipes
  - `verify_payment_request()` ‚úì
  - `res/` - Research and Engineering Studio recipes
  - `batch/` - AWS Batch recipes
  - `ProviderError`: External provider failures
  - `batch/` - AWS Batch recipes
  - `res/` - Research and Engineering Studio recipes
  - `startTime`/`finishTime` - Gathering execution timestamps
- **Expandable Sections**: Detailed configuration
- **Visual clarity**: Design visualizations for dev/staging/prod

---

### 2. Updated Sidebar Contract Links

**Tools**:
1. Add fast algorithmic fallbacks (for coordinating settlements) are separate and already support USDC via the enhanced payment service.

---

### Issue: Database Connection Errors

**Before**:
```python
# Update data files (sources from data-raw/ scripts)
