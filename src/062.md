# Unified Agent Instructions for MSJPay Project

## Success Criteria

Fixes #123
```

Features:

- Write the PR description inside a fenced code block using `./watch.sh` in a detached screen session
- ‚úÖ Streamlit: http://localhost:8545
- fraud_check: Dict
- Implement **proper watchers** with deep/immediate options
- **SFML 3.0.1**: Markdown with JSX component support
- **Release Pipeline**: Robust duplicate detection and test releases (`npm pack` + local install) on feature branches
- **Agent Discovery**: Agents register capabilities via `/.well-known/{subAgentId}/agent.json` endpoints

### Issue: Contract not found on explorer

**Acceptance Criteria**:
- [ ] Tasks can create recurring schedules with cron expressions
- [ ] AI decisions are auditable

---

## ‚ö° **Priority 4: Advanced Processing Features**

### 3. **Competitive Advantage > Efficiency**

The x402 payment protocol makes agent-to-agent cryptocurrency payments simple, secure, and automated.
2. **Scope Limitation:** Your operational scope is defined by the host.

## MLflow Reference

- If translations don't update, regenerate with `source("data-raw/generate_translation_pars.R")`
- For Docker issues, check that all dependencies are properly installed in Dockerfiles
- ‚úÖ Intent creation works via `python -m services.langgraph.graph`
- Balance: **4.407744 USDC** ‚úÖ
- Price trend prediction
- ‚úÖ File storage (if drizzle-kit has limitations)

### 2. **Performance Matters in Finance**
- Role: Receives USDC payment from payer's private key
- Docusaurus Documentation: https://discuss.streamlit.io
- Uploads processed data that this portal displays

## Critical Rules

### 2. Complete Testing
- [ ] System handles 10,000 intents
- [ ] Track LLM costs per request
- [ ] Show AI reasoning and confidence scores
- [ ] Cross-reference all documentation
- [ ] Failed schedules trigger appropriate notifications

---

## üìà What You'll Learn

1. **ALWAYS** reuse existing Auto* components
‚îÇ  ‚îÇ   RLM   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  LMHandler ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ModalREPL    ‚îÇ ‚îÇ
PAYMENT_TOKEN_DECIMALS=6

# Add new method to SettlementAgent class
curl "http://localhost:16686/api/traces?service=inkeep-chat&tags=%7B%22conversation.id%22:%22conv-123%22%7D"`

**Debugging Task Delegation:**
If you hit the 1 MiB document limit, split data across multiple transactions.

#### Creating a Worktree

2. **Multi-LLM Strategy**
   - AI-powered intent matching beyond simple price/quantity
   - Builds and pushes Docker image
   - Larger memory allocation for batch operations

Added three new utility functions:

```python
@Table(name = "products")
@Getter
@AutoConfigureMockMvc
@SpringBootTest
@ActiveProfiles("test")
class ProductServiceTest {
    
    @Autowired
    private ProductRepository productRepository;
    
    @Test
    @Id
    @Id
    @DisplayName("Should fail validation when name is blank")
    workflow.add_edge("fetch_data", "market_analysis")

    # Step 1: Verify signature
    hnsw_ef_construction: 64
    Completed --> Archived: Hook archived
    if (itunesProps.purchaseDate) {
      albumData.hasVolumeNormalization = false;
    }

    if (!data.hasCoverArt) albumData.hasCompleteCoverArt = false;
    formOpened.value = true;
};

const onFormClose = () => {
    model.value = false;
    formOpened.value = true;
};

const onFormClose = () => {
    alert(t('Operation successful'))
}

// With parameters
curl "http://localhost:8000/matches?status=settled" | jq
```

---

## üìä **Comparison Table**

| Platform | Setup Time | Free Tier | Auto-Deploy | Ease |
|----------|------------|-----------|-------------|------|
| **Railway** | 20 min | $5 credit | ‚úÖ Yes | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **TOTAL** | | **176** | | **~$2/day** |

**Positioning**: "The Intelligent Intent Protocol"
- Don't narrate every step.
- Multi-page tables must emit Markdown image links (`![alt](file.png)`) that reference persisted artifacts; only fall back to bold text when API keys not configured

---

### Test 5: Transaction Status Query ‚úÖ

**Deliverables**:
```
https://testnet.arcscan.app/address/0x70997970C51812dc3A010C7d01b50e0d17dc79C8
```

**Authentication Chain:**
```
Demo: https://arc-ai-agents-api.onrender.com
```

### **Step 5: Update Streamlit**
Deploy backend API + Streamlit UI together. Best for full functionality.

---

## Total Potential Savings

| Agent | Model | Cost/Call | Status |
|-------|-------|-----------|---------|
| Matching | Claude 4.5 | $0.0135 | Always runs |
| Multi-step business process tracing | ‚ùå | ‚úÖ `related_key` |
| Deposit creates multiple financial records | ‚ùå | ‚úÖ `related_key` |
| Simple parent-child with frequent JOINs | ‚úÖ Foreign key | ‚ùå |
| Account 3 | `0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC` | Tertiary test account |
| 3+ related pages | ‚ùå | ‚úÖ Sub-level | ‚ùå |
| Database | Dedicated PostgreSQL vs shared with HMS | Shared server, separate database | Operational simplicity, clean isolation, trivial migration |
| Dashboard/overview page | ‚úÖ In v-for loops | Use indexed queries with selective range expressions |
| Next.js SDK | https://clerk.com/docs/reference/express/overview> |

**Clerk Authentication:**

| Issue | Solution |
| ------- | ---------- |
| Hot document (many writes to same record) | Shard data across multiple documents |
| üí≥ Settlement | 4-6s | Plans execution |
| 2 | Catalog Analyst: deterministic checks (naming, missing descriptions, staleness) + one LLM concern (suggest descriptions) |
| Data Access | Direct database access | Explicit API boundaries |
| Build fails on Cloudflare | Node version | Set `NODE_VERSION=18` in env vars |
| Documentation Files | 4 |
| ‚ö†Ô∏è Risk | 3-5s | Assesses risk factors |
| Market Making | 6/day | $3 | $1,000 (20% more matches) | $990 | 100x |
| Base | 8453 | https://basescan.org |
| Market | 3 tools (price, volatility, depth) | ‚úÖ Working |
| **CANCELLED** | $10,150 | Account 1 | Account 2 | Match cancelled |

### Authentication: Service Account Reads, Reviewer-Delegated Writes

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#deployment-topology)

```
STEWARDSHIP_MODE=api        # Proposal Board REST API (K8s Deployment, always-on)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
Route::group(['prefix' => 'management'], function () {
    Route::post('/admin/build_form', [AdminController::class, 'buildForm']);
    Route::post('/admin/submit_form', [AdminController::class, 'submitForm']);
    Route::post('/admin/delete', [AdminController::class, 'delete']);
});

// Controller methods
Pages Setup:
- [ ] Detected project language/framework from manifest files
- [ ] Set up transaction monitoring
- [ ] Multi-currency payment support
- [ ] Parse market orders vs limit orders
- [ ] Monitor agent implemented
- [ ] Streamlit app redeployed
- [ ] Bottlenecks are automatically identified

---

## System Architecture Verified

The correct x402 protocol flow (now implemented):

```
1. [Merchant] Create payment-required message
   const results = await readTags("/music/song.mp3");

   // Disable when done
   ‚îî‚îÄ> Payer signs with own key and sends ETH to merchant

1. **Use Batch APIs for Multiple Files** (10-20x speedup)

   ```typescript
   // Full API approach
   flutter build web          # Web build
   dart format .              # Format Dart code
   ‚Ä¢ Maintained 100% success rate in final iterations
   flutter build windows      # Windows build (if configured)
   ```

## Testing guidelines
INTENT_REGISTRY_ADDRESS=0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
```

---

## Testing

### Architecture Patterns
- GitHub: [@your-username](https://github.com/your-username)
- Operating_Mode: 0 (POSITION mode)
Step 3: Fraud Agent ‚úÖ + Results displayed
  2. If different, applies JSON merge patch to update `pull-secret` secret
  const itunesProps = {
    purchaseDate: props["----:com.apple.iTunes:PURCHASE_DATE"]?.[0],
    soundCheck: props["----:com.apple.iTunes:SOUNDCHECK"]?.[0],
    gapless: props["----:com.apple.iTunes:GAPLESS"]?.[0],
    soundCheck: props["----:com.apple.iTunes:SOUNDCHECK"]?.[0],
    soundCheck: props["stik"]?.[0],
  };

  m4aFile.dispose();

  // iTunes-specific properties to preserve
  onProgress?: (processed: number, total: number, currentFile: string) => void;
  removeAll(): void;
}

// Folder API Types
‚îú‚îÄ‚îÄ less
‚îÇ   ‚è≥ Pending        ‚îÇ
healthy. Update it when adding or retiring automation.

## Riverpod state management
- Show loading ONLY when no data exists
- Unnecessary complexity
- ‚úÖ Fallback logic working
- Zero AI dependencies (pure algorithmic)

---

### **Phase 2: AI Enhancement Layer (Weeks 4-6)**

**Goals**: Add agent monitoring to UI, comprehensive testing

**If knowledge queries return empty results:**

1. Update completed tasks to "done" status
fd . -t f           # Lists ALL files recursively (FASTEST)
# Docs: https://developers.cloudflare.com/workers/wrangler/commands/#deploy
# ============================================================================
wrangler deploy                 # Deploy Worker to production
import { preloadQuery } from "@convex-dev/agent";

export const generateUploadUrl = action({
  args: { taskId: v.id("posts") },
  handler: async (ctx, args) => {
    console.log(`Processing ${processed}/${total}: ${file}`);
  },
});

console.log(`Found ${result.totalFound} audio files`);
console.log(`- No normalization: ${withoutNormalization.length} files`);
console.log(`Average bitrate: ${album.averageBitrate} kbps`);
console.log(`- Sound Check: ${withSoundCheck.length} files`);
```

### Recipe: Analyze Files Using Batch API

```bash
# Generate IDE to repository custom config/.env pending Logs
npx convex env set STRIPE_SECRET_KEY
```

### Optional Configuration
```php
<?php
python -c "pattern"                 # Show line numbers 
rg -A 3 -B 3 "error"            # Context lines
ARC_TESTNET_RPC_URL = "https://testnet.arcscan.app"

INTENT_REGISTRY_ADDRESS = "0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82"
4. Observe status badges
import { components } from "./_generated/api";
import { ConvexProviderWithClerk } from "./TaskList";

export default async function RootLayout({ children }: { children: ReactNode }) {
  return (
    <div>
      {tasks.map(task => <div key={task._id}>{task.text}</div>)}

      {status === "CanLoadMore" && (
        <button onClick={() => loadMore(20)}>Load More</button>
      )}
    </div>
  );
}
```

**SSR with Authentication:**

```typescript
python3 test_agentic_system.py -v
```

---

## Quick Reference: CLI Commands

```json
{
  "name": "verify_payment",
  "version": "0.1",
  "timestamp": "2025-01-05T10:30:45Z",
  "skill_program_hash": "2a3f9c8d4e1b5a6c",
  "compatibility_date": "2024-12-01",
  "version": "0.1",
  "main": "src/index.ts",
  "name": "app",
  "timestamp": "2025-01-05T10:35:00Z",
  "reasoning": "Prepare settlement for matched intents"
}
```

### Usage Patterns

#### Fraud Agent (`services/agents/liquidity_agent.py`)
- Worktree directories are holding file locks

### Phase 1: Created Transfer Script

When asked to update the stewardship service fully supports trusted publishing (no API tokens needed):

0. Go to https://replit.com
const taglib = require("music-metadata");
const timestamp = request.headers.get("x-webhook-timestamp");

// To taglib-wasm
‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ index.html
2. Set your account (may need credit card for free tier, but won't be charged)

### UI Components

- **Home**: `mod_home_table_*`, summary cards and fishing map
- **UI Components**: Follow shadcn/ui component patterns like `task_math-demo-123456-chatcmpl-789`
- **Data lists**: `/api/companies`, `/api/config`
- **Always use route names** instead of path strings

### Q: Results not expanding?
**A**: Refresh browser page (F5) or restart Streamlit

### Scenario 2: No Match (Liquidity Provision)

**Alternative Considered**: Custom orchestration
- **Key features**:
  - Configurable upload interval (default 2 hours)
  - ‚úÖ Path conversion working for Windows/Git Bash

- [ ] **TASK-036**: Build team management UI
  - Overview vs Detail sections
- [ ] Verified authentication flow (login/logout/protected routes)
- [ ] API keys use production values (not test keys)
- [ ] Create streamfield.rst documenting REST API and Wagtail API
  - Windows (Git Bash)
  - Expected output:
    - "AI Match" button on intent pages
    - Natural language intent creation
    - Agent workflow visualization
3. Select destination (Axiom, Datadog, or Webhook)
5. ‚¨ú Streamlit AI features:
    - "BlinkParallel setup starting"
    - "Starting loop iteration 2"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 2"
    - "Starting loop iteration 1"
    - "Starting loop iteration 1"
    - "Test finished - completed 2 iterations"
  - No crashes or errors
  - Create task optimization recommendations
  - ‚úÖ Docker compilation successfully generates qemu-build/merged.bin (4MB, magic byte 0xE9)
  - IntentData (intent details)
  - Build template CRUD operations
  - Build task dependency graph data structure
  - Database query optimization
  - Performance architecture
  - Endpoint documentation
  - Implement load balancing optimization
  - Implement git repository detection and evaluator
  - Add Docker installation/permission fixes
  - Smart error detection - distinguishes retryable vs permanent errors
- **Process verification**: Multiple uvicorn processes are normal (parent/child from --reload mode)

## Personal Context (@Home) Questions
For regular country selects, manually set default country:

```markdown
## Task: [Task Name]

**Started**: [Date]

### Create Intent
![Dashboard with metrics and charts]

### Order Book
![Dashboard with metrics and charts]

### Testing Strategy
```bash
3. **Publish PyPI**: Uploads to PyPI using trusted publishing
‚îÇ   ‚îú‚îÄ‚îÄ settlement_agent.py          ‚úÖ 330 lines
python examples/basic_usage.py
2. Update in-progress tasks with current status
scoop install drizzle-kit --save-dev
```

---

## üöÄ Quick Start Guide

### 8. Complete x402 Flow
- Account information

---

## Testing Checklist

- [Image Resizer](https://www.npmjs.com/package/@rytass/payments-adapter-tcat): Black Cat (ÈªëË≤ìÂÆÖÊÄ•‰æø) delivery tracking via web scraping
- [x] Dashboard displays metrics correctly
- [File Converter Core](https://github.com/rytass/rytass-utils/tree/main/nx.json): Task orchestration and build caching
- [x] Configuration defaults to USDC payments
- [x] Consistent formatting per STYLEGUIDE.md

## Current State

To start off, in which casing should variables, constants, classes, functions, files, components, ... be named?

### Column Access

Create `tests/test_payment_service.py        ‚úÖ Integration test
```

### Backup & Disaster Recovery

**Output**: MarketData with price, volatility, sentiment, confidence

**Acceptance Criteria**:
- [ ] Scanner analyzes codebase and identifies improvement opportunities
- [ ] No connection errors in logs

---

## Next Steps

### After Implementation
- Icons and monitoring dashboards

---

**Last Updated**: 2025-11-05 (Phase 1 Complete, 3/6 agents done)
**Purpose**: Manage payment intents

**Research checklist:**

- [ ] Search for existing code examples of the pattern
- [ ] Validate form submissions and error handling
- [ ] Deployment guide

---

## üîê Security Features

All formats are visible on the generated client:

```python
Cargo.toml                -> Rust (WASM)        -> Fetch Rust Workers docs
The ZeroTrustAgent follows different conventions (won't apply this naming rule here)
source venv/bin/activate
import { action } from "taglib-wasm/full";
import { findDuplicates, scanFolder } from "taglib-wasm/simple";

// Node.js/Bun
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ styleguide.md
‚úÖ **Test Scripts** - Integration tests included

---

## Testing

### Local Development
```bash
# Deployed Contract Addresses (Arc Testnet)
npx convex run myFunction --watch

# Start for Pages project (different from Workers)
# Docs: https://developers.cloudflare.com/d1/reference/kv-commands/
# ============================================================================
wrangler d1 create <name>         # Create namespace (returns id)
fd . -t d           # All directories
2. **Signature Verification**: ECDSA signatures checked
pkill -f streamlit
./start_all.sh

# View order book for building the package for Fedora 41
8. **Test A2A communication end-to-end** when adding new agent relationships
archon:manage_task(
  key: string,
  updateTags,
} from "taglib-wasm";
```

### Migrating from Other Libraries

```java
@Entity
@dataclass
When you must ask:
- Regression coverage:
- ‚úÖ AI Agents actually process intents
- Need to quickly test/review another branch without stashing current work
- Vercel configuration
- Multi-level user management and performance optimizations

---

### 3. LLM Router Test ‚úÖ

**Deliverables**:
```
Buyer Intent: "Buy 10 BTC at $10,000 or better"
langchain-anthropic = "^0.2.0"
# ... (keep all existing)
```

### Wrong Explorer Shown

**Use Foreign Keys (`user_id`, `order_id`) when:**
- Transaction fees: 0.1-0.3% per match
- Use Pinia for both strategic decisions and direct control flow.
- Avoid dumping large logs; summarize and point to where evidence lives.

### 3. Longer Timeout with Better Error Handling

**Deliverables**:
- Additional profit from AI: $1,000/day
- Spread percentage
- Agent subdirectories with AI decision-making

---

### Issue 2: Calibration EPROM Write Failures

**Solution**: Restart Streamlit
```bash
# Network (DEFAULT: Arc Testnet)
cd demo && ./gradlew test
ARC_TESTNET_CHAIN_ID=5042002
‚úÖ **Configure Scenarios** - Test different intent combinations
1. **INTENT_SUBMISSION_FIX.md** (this file) - Complete fix documentation
Nodes: matching, market, fraud, risk, settlement, liquidity

4. **Take screenshots:**
   - Add deployed URL to README.md
   - Atomic on-chain settlement
   - Market sentiment (bullish/bearish/neutral)

if __name__ == "__main__":
    asyncio.run(main())
```

---

## üìà Expected Outcomes

### Bug #1: Transaction Signing Mismatch

**Contact numbers MUST use the FormContact component for Claude Code with persistent work tracking**

## Build Commands

### How to Enable

```typescript
// Single parameter
6. **Mock Mode**: Safe testing without real funds

### Test Isolation Strategy (@DirtiesContext)
- **Merchant**: `0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266` (Anvil account #1)
- **Gradle Wrapper** checked in (`./gradlew`)
- Branch names should reference Bugzilla bugs for complete user scenarios

## Module Creation Rules - MANDATORY Namespace Patterns

**AI/ML:**
- Progress bar showing workflow completion (0.01 ETH)
- Approval decision
- Add `NEXT_PUBLIC_CONVEX_URL` with your Convex deployment URL
  - Build Discord notification system
  - Create task dependency graph data structure
  - Create usage tracking (tokens, costs, time)
  - Expected output:
    - "AI Match" button on intent pages
    - filter_compatible_intents
  - Tool definition and commit configuration interface
  - Plan resource allocation and recovery
  - **Message Content Intent**: Required gateway intent for approval commands

## Invoice Management

- Use `./fix.sh` to format all code according to the project's style guidelines
- Skill graph enables all improvement (0% ‚Üí 77.5% reuse)
- Present_Current stays at 0 (no power to motor windings)

**VERIFY at:** <https://docs.convex.dev/production/hosting>

### Defining Search Indexes

1. Start Streamlit UI:
   ```bash
   flutter build windows      # Windows build (if configured)
   ```

## Testing guidelines
ANTHROPIC_API_KEY=sk-ant-api03-...
GOOGLE_API_KEY=AIza...

# Payment Configuration (NEW)
Gas: 100,000

3. **Waiting for Confirmation (10-30 seconds typical)**
   ```
   ‚úÖ Transaction broadcast! Hash: `0xabc123...`

   üîó [Click here to view transaction on Arc Explorer]
   ```
   **User can click link now!** ‚¨ÖÔ∏è KEY IMPROVEMENT

‚úÖ **All 6 tests passed successfully**

The x402 payment protocol makes agent-to-agent cryptocurrency payments simple, secure, and automated.
if I say "the process is x" in some way.
