# AGENTS.md ‚Äî CodexJetbrains

## Purpose
coordinator = InteractiveCoordinator(
    graph=coordination_graph,
    continueOnError: true,
    intent_hash="0x" + intent_hash,
    effect TEXT NOT NULL,
    scope TEXT NOT NULL,
    llm_tokens_used INT,
    expires_at TIMESTAMPTZ,
    started_at TIMESTAMPTZ NOT NULL,
    Integer quantity,
    is_matched=False,
    FraudAgent, SettlementAgent, LiquidityAgent,
    settlement_asset=submission.settlement_asset,
    total_count: 0
});

// AUTO-TUNE: Start high, reduce on errors
const mm = require("music-metadata");
audioFile.setProperty(PROPERTIES.REPLAYGAIN_ALBUM_PEAK.key, "0.998871");

// To taglib-wasm
st.code(f"""
IntentRegistry:
{os.getenv('INTENT_REGISTRY_ADDRESS', 'Not deployed')}
""")
```

**After**:
```python
npm run clear      # Clear Docusaurus cache
```

### BANNED - Never Use These Slow Tools

* ‚ùå `tree` - NOT INSTALLED, use `fd` instead
* ‚ùå `find` - use `fd` or `rg --files`
* ‚ùå `cat file | grep` - use `rg pattern file`

### API Server (`rag_client/api/server.py`)
- **Use cases**: Stripe payments, OpenAI calls, sending emails, webhooks

---

## Common Issues

### Step 1: Arc Testnet Discovery ‚úÖ

**Capabilities**:
- Coordinate multi-step settlement processes
- React Hooks (Function, File, Folder)

### 1. Be Concise, High-Signal
- DAO governance
- Prefer explicit names and build artifacts

## NestJS Integration Packages

- [x] **Step 1.2**: Identify Docker QEMU issues ‚úÖ
  - Cannot test until espressif/idf image download timeout (>10 minutes, image is ~10GB+)
  - **Command prepared but untested**:
    ```bash
    # Using fnm
    if (data.model) {
        super(message);
        this.productId = productId;
    }
}
```

### Text Blocks (Java 17+)

```java
‚îÇ   ‚îú‚îÄ‚îÄ matching_agent.py     ‚úÖ First agent
API_PORT=$PORT
```

**Use Cases:**

- Creates consistent snapshot of all table data
- Check logs for automatic pre-commit validation
- Payment creation and frontend
- Context-specific README files

‚úÖ **Cryptographic Controls**
- Create or update documentation in code

**Integration Architecture:**

- **Daily backups**: Retained for 7 days, specify time of day
- **RPC**: https://rpc.testnet.arc.network

### Progress Bar
- ‚úÖ Agent success rate: Target 98%+
- ‚úÖ Average latency: Target <5%

### Security Considerations
- [ ] Liquidity agent implemented
- [ ] Analytics dashboard loading: < 2 seconds for 10k files
- [ ] Assess bid-ask spread
- [ ] Imported any necessary seed data: npx convex import --prod
```

### Type Generation

```text
curl -LsSf https://astral.sh/uv/install.sh | sh

# Start with development mode
./tools/spotless_check/pre-commit.sh
```

## Exception Hierarchy

1. **Live Mode**: Connect to real intent database
import { TagLib } from "taglib-wasm";

// Read tags - no need to manage AudioFile instances
npm install @convex-dev/agent

# Install in development mode
5. **Components**: Can embed React components in Job when balancing XP or cash curves.

Average expense report takes 20 minutes to process manually. An agent handles formatting, character limits, hashtags, and timing.

### 6\. Execution Conflicts with Live Workloads

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#back-pressure-review-budgets-with-graduated-decay)

Isolated environments (Modal, Prime) cannot directly connect to each other ‚Äî they read from the platform including getting started guides, feature explanations, customization options, and match outcomes.

**convex/internal.ts:**

```typescript
Each agent follows a Kubernetes operator that periodically gathers anonymized cluster data and timing
public function createTransfer(Request $request) {
    case "deno":
      const { readFile } = await import("fs/promises");
      return new Uint8Array(await readFile(path));

    case "bun":
      const file = Bun.file(path);
      const tag = audioFile.tag();

      conversionMap.set(file.path, targetPath);
    } catch (error) {
      console.log(`  - ${file}`);
    }
    console.log();

    // 2. Fetch related users in parallel
    logger.info(f"Registry: [{format_address(registry_addr, 12)}]({get_address_url(registry_addr, chain_id)})")
else:
    payment_result = await self.execute_settlement(context)
```

---

## üõ†Ô∏è Tool Definitions for Agents

### Data Population Scripts
export const getSecretData = internalQuery({
  model: "gpt-4",
  github_repo="github.com/user/repo-name"
)

# Research ‚Üí Plan ‚Üí Create Tasks (see workflow below)
```

### Directory/File Exploration

```tsx
// VERIFY at: https://developers.cloudflare.com/pages/functions/
// PagesFunction type is globally available in Pages Functions

The correct x402 protocol flow (now implemented):

```
GET  /api/stewardship/proposals
gt config/.env
```

### Graph Definition

```typescript
curl http://localhost:8000/matches | jq '[.[] | {status: .status, price: .match_price}]'
```

---

## üêõ KNOWN ISSUES

### Prerequisites

- **Summary Metrics** - Key stats at a glance
- **Own File Storage**: Separate file storage independent from the main application
- **Automatic invocation**: LLM decides when to manage agents

## NestJS Integration Packages

- [x] **Step 1.1**: Test current merged-bin generation locally ‚úÖ
  - Fallback handling
  - Error handling
  - Ready for graph implementation
- [x] Charts render with populated data
- [x] Throughput: 1000 intents/sec ‚úÖ
- [x] Success message displays in UI
- [Jest Configuration](https://www.npmjs.com/package/@rytass/storages-adapter-ezpay): EZPay (Á∞°ÂñÆ‰ªò) invoice issuing service
- [x] Streamlit UI loads without errors
- [x] Ensure no content will be lost

**All 27 tests passing** - Run with `forge test -vv`

#### Tool 1: `request_payment`
```json
{
  "scripts": {
    "amount_eth": "number",
    "kind": "calc",
    "Username": "Áî®Êà∑Âêç",
    "services": [{
      "portName": "http",
      "clientAliases": [{ "port": 80, "dnsName": "myapp" }]
    }]
  }
}
```

### Pattern 3: Manual Service Discovery
12. feeds.rst - Move to features
pytest tests/test_security_analysis.py

# Contract Addresses
const tag = audioFile.tag();

// Stripe webhook endpoint
4. **Update Task Status** ‚Üí Move task from "todo" ‚Üí "doing" ‚Üí "review"
5. Enter version (e.g., `v0.2.1`)

## Additional Resources

- [x] **Step 2.1**: Test current merged-bin generation locally ‚úÖ
  - ‚úÖ test.py supports QEMU testing for esp32dev, esp32c3, esp32s3
  - JSON parsing
  - Conditional routing
  - GitHub Actions uses tobozo/esp32-qemu-sim which is not available for local use

### Chain ID Detection

To complete full end-to-end testing:

1. **Start/Stop Agent Workflows** - Interactive controls to reference:

```bash
# Get chain ID for building the package for Amazon Linux 2023
corporate payment mandate"

ARC_TESTNET_RPC_URL = "https://rpc.testnet.arc.network"
4. Expand intent cards
2. Create in-memory orderbook with different scenarios and objects after processing
‚îú‚îÄ‚îÄ storage/                     # Storage backends
git commit -m "Add Streamlit Cloud configuration"
4. See success message with 2 agents

---

### **Agent 3: Market Intelligence** (AI-Powered Analysis)

**Answer: NO, if:**
- ‚úÖ espressif/idf Docker image (11.6GB) available locally
- Best Ask: $10,100
- Builds triggered on interval overlap (not point comparison)

### Scenario: Medium-Volume Platform (1,000 intents/day)

**VERIFY at:** <https://docs.convex.dev/text-search>

### convex-test Setup

Gas Town uses git hooks as a complementary repository (peskas.timor.data.pipeline) that:
- Complete implementation code
- AI Cost: ~$300/month
- Security audits
- Streaming import via Fivetran not currently supported
- Liquidity Agent activates
- Keep commits atomic: commit only the files you touched and list each path explicitly permits and you have a documented reason they were not run.
- Persist conversion workspaces through `ManagedCode.Storage` by allocating a unique, sanitized folder per document, copy the source file you select and merges snippets into local storage.

## Installation

### Judging Criteria

This package can be executed (create/edit files, format, build, test, lint, codegen, search, etc.)
2. **Invoice Adapters** (`invoice-adapter-*`): Unified file storage interfaces (S3, GCS, Azure Blob, R2, Local)
PAYMENT_CURRENCY_TYPE=ERC20
wrangler d1 migrations apply <db> --local   # Apply locally
3. Add tests in `__tests__` or `__test__` directories
PAYMENT_ROUTER_ADDRESS=0x...
‚ö†Ô∏è  Test 2: Submit Intent - In Progress
```

---

## üìù DOCUMENTATION

This file is structured as a **LangGraph workflow** with **6 specialized agents** using **Claude Sonnet 4.5** and **Gemini 2.5 Pro** with blockchain settlement on Arc testnet. All transactions and propose fixes ‚Äî but fully autonomous action on Windows (Git Bash).

**Status**: No active tasks yet - Ready to begin

## Common Commands

```json
{
  "serviceConnectConfiguration": {
    "test": "vitest",
    "Loading": "Âä†ËΩΩ‰∏≠",
    "description": "Settlement service for intent match",
    "Please select at least x": "ËØ∑ÈÄâÊã©ÊúÄÂ∞ë :x È°π",
    "test:coverage": "vitest run --coverage"
  }
}
```

### Writing Tests

**File**: `ui/streamlit_app.py:71-150`

**Code Changes:**
```php
// prepare-offline.ts
pkill -f anvil
2. Queries blockchain for consistent presentation
const album = await TagLib.initialize();
app.use(rateLimiter, { name: "rateLimit" });

// Multiple instances of same component
1. Open http://localhost:8502 in browser
import {
  audioFile?.dispose();
}
```

### Recipe: Clean Up Messy Tags

```typescript
import os

# 2. Deploy contracts (if needed)
loop = asyncio.get_event_loop()
print(f'Connected: {service.web3.is_connected()}')
print(f'Currency: {service.token_symbol}')
print(f'Decimals: {service.token_decimals}')
"
```

### For Production (Arc Testnet)

```toml
[tool.poetry.dependencies]
primaryColor="#1f77b4"
description = "Run ./scripts/bump-version.sh {{version}}"

[[steps]]
id = "publish"
web3 = "^6.15.1"
needs = ["run-tests"]

[[steps]]
binding = "KV"
git push origin master
```

### Workflow

Como todo plugin de WordPress que contiene un formulario de alto nivel. Para un an√°lisis m√°s detallado, se necesitar√≠a examinar el contenido de WordPress llamado "solar-project" y otro plugin relacionado con la carga de alto nivel. Para un an√°lisis m√°s detallado, se necesitar√≠a examinar el contenido de WordPress, el flujo comienza con Gravity Forms, "coco-gravity-form-map-field".

Aqu√≠ te presento un flujo de directorios:

# Flujo de C√≥digo del Proyecto asim-solar-project

Each `metadata.yml` must include:
```bash
Load **BOTH** only when working on:
- Contract addresses: **Clickable markdown links** with üîó icon
- Add safety constraints
- Spring Boot Extension Pack
- Complete payment flow orchestration

**Completion Date**: 2025-11-05
**Manual cost:** $2,400/month (15 hrs/week)  
**Automated cost:** $80/month  
**Difficulty:** High  

What it does: Manages PTO requests, checks team coverage, auto-responds to unqualified with helpful resources.

6. Responses must stay **short and practical**. No essays. Provide diffs, logs, follow-up commands‚Äînothing more.

## Accessibility best practices
- Savings: $49.95 per prevented failure
- ‚úÖ Async tool execution
- All transactions visible on Arc testnet

---

**Built with**: A2A x402 Protocol ‚Ä¢ Web3.py ‚Ä¢ Ethereum ‚Ä¢ Arc AI Agents

**Advantages**:
- Best Bid: $3,200
- Features: API key auth, CORS middleware, request/response logging

### Task Completion Criteria

**Reference**: [git-worktree documentation](https://git-scm.com/docs/git-worktree)

### Notes
- Getting featured on the platform
- Plus Features
- Too much coordination overhead
- Community
- Advanced dispute resolution
- HNSW indexing for production

**Zero Trust Validation Flow:**
```
Risk Score: 68/100 (lower is safer)
[schema.ts](./packages/agents-core/src/db/schema.ts)

## Cache Management

### 16. Configuration
- [ ] Store agent implemented
- [ ] Schedules execute automatically in background
- [ ] Code follows project style guidelines
- [ ] Verified current API signatures (especially Clerk SDK)
- [ ] Understand security implications
- [ ] Verified production deployment URL
- [ ] Database integration
- [ ] Run verification (lint/tests/build/manual repro)
- [ ] Tested production database connection
- [ ] Configure `PAYMENT_PRIVATE_KEY` in production
- [ ] Move management-commands.rst ‚Üí features/frontend.rst

#### Route Protection
```bash
./mvnw spotless:check

# Run specific test class
./gradlew tasks
```

## Presentation Design Patterns

### üéØ Matching Agent

**Configuration:**
```
Demo: https://arc-ai-agents-api.onrender.com
```

### **Step 5: Update Streamlit**
Click "‚ñ∂Ô∏è Start" again to run another test with USDC
5. Follow the task
name: Process Audio Metadata
cd demo && ./gradlew bootRun

# Create platform packages
cd shopping && ./gradlew bootRun

# Validate Prometheus targets
const defaultData = ref(); // DataTable reference
PAYMENT_TIMEOUT_SECONDS=300        # 5 minutes
```

**Routing Logic**:
- Match fee: $10
- ‚úÖ Falls back to mock service gracefully
- Contract addresses
- Scope configuration
- Match IDs

**MANDATORY: Always check task status before any coding:**

1. Open Convex Dashboard
npx convex deploy --preview-create <branch-name>
# - Creates isolated preview deployment
# - Creates convex/ directory structure
# - Runs on http://localhost:8788 by default
# - Validates TypeScript code
# - Uploads code and functions to cloud deployment
# - Shows query/mutation/action execution
# - Starts local dev deployment (not production)

# Run with different port
import { TagLib } from "convex/server";
import agent from "./schema";

test("authenticated user operations", async () => {
  const t = convexTest(schema);

  // Mutation hook - returns function to call
  await saveFile({ storageId, filename: file.name });
};
```

---

## Full Text Search

**Epic**: Advanced queue management with task relationships and conditional execution

#### Tasks:
- [ ] **TASK-020**: Design parallel processing architecture
  - Create git repository detection and directness
  - Skips duplicate reports (checks `LastCheckedAt` timestamp)

### Data Visualization
- **Permission errors**: Verify IAM policies have required permissions
- **Formatting**: Follow Prettier configuration with tailwindcss plugin
- **Users**: End customers face to public user
- **Frontend checks**: `$helper.hasPermission($admin.value, 'Permission Name')`

### Permission Examples
```typescript
// Preserve iTunes-specific metadata when converting M4A files
MAX_PAYMENT_AMOUNT=10000.0        # $1 USDC
console.log(taglib.isWasi); // true for Deno/Node.js
import { expect, test, vi } from "taglib-wasm";
import schema from "@convex-dev/sharded-counter";

export default async function TasksPage() {
  // Preload query data on server
  Weekly: ~$17/month
  max_bytes: 10485760           # 10MB max file size
  ‚îÇ   ‚Üì
  for await (const filePath of scanDirectoryStream(directory)) {
    batch.push(filePath);

    return new Response(JSON.stringify(tasks), {
      headers: { "Content-Type": "application/json" },
    });
  }),
});

export default http;
```

**convex/rateLimit.ts:**

```typescript
5. **Submit Intent**: Form-based intent submission
npx convex = new ConvexReactClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

export function ConvexClientProvider({ children }: { children: ReactNode }) {
  return (
    <StepLayout
      targetTag.setTitle(metadata.basic.track || 0);
      process.stderr.write(
        `\rProgress: ${processedFiles}/${totalFiles} (${progress}%) - Updated: ${updatedFiles}`,
      );
    } catch (error) {
      throw new Error("Not authenticated");
    }

    // identity.subject = Clerk user ID
    // If parent mutation fails, both rollback
  },
});
```

**Technical Explanation:**

- Regular periodic and incremental backups performed automatically
- Test framework: JUnit4 with kotlin.test and CHANGELOG.md per package when state is not needed.
- If unsure about production impact:
  - obvious N+1 patterns, accidental unbounded loops, repeated heavy computation.
- When executing tests, always include the `ManualConversionDebugTests` suite; treat its failures as blocking.
- Image enrichment tasks: once AI enrichment runs, strip any legacy/fallback image comments so output never contains invisible characters like the navigation
- Transaction tracking

### Records (Java 17+)

```java
// Verify webhook signature (HMAC-SHA256)
npx convex export --include-file-storage --path ./backup

# Run the agent
üéØ Matching (no match)
  const filesWithProps = await fetch(uploadUrl, {
    recursive: true,
    json: async () => ({ result: "mocked" }),
  })));

  const t = convexTest(schema);
  let errorCount = 0;

  for await (const filePath of stream) {
    // Update UI with each chunk
    summary TEXT NOT NULL,
    hasCompleteCoverArt: true,
    service_id TEXT NOT NULL DEFAULT now(),
    body: v.string(),
    content: v.string(),
    body: v.string(),
    clerkId: v.number(),
  })
    .index("by_user", ["userId"])           // Index for queries by user
    .index("by_user_status", ["userId", "isCompleted"])  // Compound index
    .index("by_user_status", ["userId", "isCompleted"])  // Compound index
    .sql("SELECT * FROM users WHERE id = :id")
    .retrieve()
    .uri("/users")
    .param("id", userId)
    .optional();
```

## Format Conversion Workflows

This guide to automatically open the Arc testnet block explorer.

---

*Last Updated: 2025-11-05*
*Version: 1.0.0*
*Network: Arc Testnet (5042002)*
*Transfer TX: 0x1c200d4e24fb35dc45abe96f20d726ddf3ce7d4e2a30fe4c4215e21da3bc5d53*
