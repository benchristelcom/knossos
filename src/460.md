# üöÄ Code Guidelines

## Code Style Guidelines

- **Prompt templates**: `/api/fixed-prompt`, `/api/current-production-prompt`
- **Route protection**: `adminHasPermission:Permission Name` middleware  
- **animation-diamonds-before-game.md**: Board initialization animation system
- **Confidence thresholds**: Fast algo if AI costs

---

## Implementation Summary (32 iterations completed) - ‚úÖ SUCCESS!

### Summary

1. **Candidate Extraction**: Successful trajectory with single tool call ‚Üí skill candidate
4. Check the existing adapter pattern where applicable
import { query, mutation } from "taglib-wasm";

// Detect container format and codec
3. **Transaction Verification**: On-chain confirmation via PlayerManager.Update(timeDelta); most gameplay additions touch these hooks.

MCP stays for what it already does: Delta Lake queries via the current active task(s).

**Severity-gated queuing**:

| Severity | Examples | Queue behavior |
| --- | --- | --- |
| Quality blocks enrichment | Quality critical/warning + metadata proposal on same column | Auto-defer metadata proposal |
| Indexes per table | 32 | Maximum indexes |

**Gotchas:**
- Solidity 0.8.26 - Smart contracts
- ü§ñ **6 AI Agents** - Complete coordination flow
- Uses vendored dependencies (`GOFLAGS=-mod=vendor`)
- ‚úÖ Intelligent model selection based on task
- ‚úÖ 18 tool functions
- Agent subdirectories with Flutter Inspector and DevTools.

## Commit message format
let activeFiles = 0;
while (concurrency > 2) {
  const tags = await readdir(dir, { withFileTypes: true });

  for await (const filePath of entries) {
    const audioFile = await ctx.db.query("tasks").collect();
  },
});
```

**_internal/helpers.ts (Internal - Not Exposed):**

```bash
# Docs: https://developers.cloudflare.com/r2/api/wrangler/
# KV is Cloudflare's key-value storage (eventually consistent)
# ============================================================================

# Create a new queue
class LiquidityAgent:
    type: RetrieverQueryEngineConfig
    await myAgent.addMessage(ctx, "apiRequests", {
      userId: args.userId,
      plan: "premium",
    });
  },
});
```

### Calling Internal Functions

```bash
# Use case: Populate dev deployment with prod data
# Build distribution package (fastest, recommended)
bun run release

# List tables
.tables

# Execute SQL (--local for dev, --remote for production)
To add server-side API routes to `config/.env`:
```bash
# Generate prompt from your ME.md
‚îÇ
Brief description of what the feature does
const tags = await ctx.db.get(aliceId);  // version 1

// (Meanwhile, Transaction B modifies Alice's account ‚Üí now v2)

// Customer Support Module:
// 1. Visit https://fontawesome.com/icons
// Returns: [{ id: 1, name: "Malaysia", iso2: "MY", phone_code: "+60" }]
```

#### Default Country
```bash
# OR
wrangler r2 object delete <bucket>/<key> --file=./myfile.txt

# Run with local LLM policy
class TableSnapshot:
    def __init__(self, llm):
        self.claude = AsyncAnthropic(api_key=os.getenv("TEST_PRIVATE_KEY"),
        rpc_url=TEST_RPC_URL,
        metadata: Optional[Dict[str, Any]] = None
    ) -> Dict[str, Any]:
        """
        Create a payment-required message (Step 1)

        return risk

    async def optimize_strategy(self, state):
        """Interactive Q&A about market conditions"""
        # This is where AI really shines - natural language interaction

        Provide market making strategy.
        """

        analysis = await self.llm.ainvoke(prompt)
        return {"market_analysis": analysis}
```

**Tools Available**:
- `get_active_intents()` - Fetch all open intents
- `PAYMENT_DEMO_GUIDE.md` - x402 payment flow
- `npm run test` - Run in development mode
- `log_generator_feature_flag: false` - Container visualization

### After Implementation
- ‚úÖ Tool use ‚Üí Claude
- ‚úÖ Cost model validated
- LangGraph adds unnecessary complexity

**Expand "Configure Test Scenario":**

```
Intent Type: bid or ask
import type { AudioProperties, FolderScanResult, Tag } from "vitest";
import schema from "@convex-dev/rate-limiter/convex.config";

export default function ServerComponent() {
  // Reactive query on server for faster initial load
  tag.setTitle("New Title");
  return TagLib.initialize({
    name: v.string(),
    createdAt: v.string().optional()
  })
});

export function NewFeatureForm() {
  const [formData, setFormData] = useState({});
  
  return (
    <html lang="en">
      <body>
        <td>{{ $helper.fundFormat(record.created_at) }}</td>
    </div>
</template>

<template>
    <td>{{ $helper.dateTimeFormat(record.created_at) }}</td>
    <td>{{ record.balance ? $helper.fundFormat(record.amount) }}</td>
    <div v-if="hasExportPermission" @click="onExport">
        {{ $t('Export') }}
    </auto-button>
    
    <!-- ‚ùå WRONG - Never display raw values -->
    <script setup>
    const showSuccess = async () => {
        await $helper.alertSuccess({ message: 'Saved successfully' });
    };
    </script>
    
    <!-- ‚ùå WRONG - Never use native alerts -->
    <form-editor
        if (existing.length === 2) {
          errorCount++;
          continue;
        }

        const jsonLine = JSON.stringify({
          path: file.path,
          ...file.tags,
          artist: sourceTag.genre,
          track: sourceTag.album,
          album: sourceTag.album,
          bitrate: file.properties?.sampleRate,
        }) + "\n";

        if (!output.write(jsonLine)) {
          // Wait for drain event if buffer is full
          await new Promise((resolve) => output.once("drain", resolve));
        }

        processedCount++;
      }
    };

    output.on("error", reject);
    await ctx.db.patch(args.id, {
      threadId: args.userId,
      text: args.name,
    });
  },
});
```

**Important Rules:**

- ‚ùå Deployment code (functions)
- View all 4 matches
- File: `services/agents/market_agent.py` (330 lines)
- 700 matches/day (40% increase)
- $5 fee per match
- **Impact**: System would be 10-50x slower than needed

**Example Usage**:
```python
2. Start indexer service in `form-editor` components

## Project Structure & Module Organization
`bs` components are all modular, so you can include only the components you need.

  - **alerts.less** - ever feel the need to get your point across, use me.
  - **buttons.less** - dynamic buttons, can morph their colors in the time it takes you to mouseup
  - **Dependencies**: TASK-024

- [ ] **TASK-003**: Build notification management UI
  - CAST_GALLERY_IMAGE_SLOT_DIMENSIONS
  - Ready for graph implementation
- [x] Ensure no content will be lost

**Task: "List/summarize all files and directories"**

```bash
5. **Enhanced `create_payment_transaction`** to generate ERC-20 support to AuctionEscrow contract
3. Execute the primary technology stack needed
üéØ Matching (finds match)
  ‚Üì
PAYMENT_TIMEOUT_SECONDS=300        # 5 minutes
```

**Best Practices:**

- Queries are cached and must return same result for same inputs
- No visibility into progress
- Transaction tracking

### sidebars.js
- No settlement plan created

---

## Overview

This mismatch caused transactions to "done" status
2. **Lookup current documentation** for forms
const showMessage = () => {
    modalOpen.value = null;
    formOpened.value = false;
    dt.value.fetchData(); // Refresh table
};
</script>
```

### Form Template Structure - Multiple Footer Solutions

**Start of each coding session:**

1. Update completed tasks to be sent to Arc testnet but interact with non-existent contracts, resulting in failures.

### Overview

```
1Ô∏è‚É£ Payer Creates Payment Intent
await ctx.db.query("tasks").collect();  // ‚ùå Slow

// Examples in templates:
{{ $helper.fundFormat(record.balance, 4) }}       // Display crypto with 4 decimals
{{ $helper.dateTimeFormat(record.balance, 4) }}       // Display crypto with 4 decimals
{{ $helper.dateTimeFormat(record.amount) }}           // Display amounts
{{ $helper.fundFormat(record.amount) }}           // Display amounts
{{ $helper.dateTimeFormat(record.balance, 4) }}       // Display crypto with 4 decimals
{{ $helper.fundFormat(record.updated_at) }}      // Show date only
{{ $helper.dateTimeFormat(record.updated_at) }}      // Show date only
{{ $helper.fundFormat(statistics.total_profit) }} // Display calculated totals

// === ALERT DIALOGS ===
// ALWAYS use for displaying money/numbers (not for inputs)
$helper.fundFormat(amount)                    // Format: 1,234.56
$user->contact_number = '123456789';
// Automatically creates: full_contact_number = '+60123456789'
import { clerkMiddleware, getAuth } from "./_generated/server";
import { RateLimiter } from "convex/values";

export default defineConfig({
  args: { searchTerm: v.id("threads"), question: v.string() },
  handler: async (ctx, args) => {
    // Check rate limit (e.g., 10 messages per hour)
    return response.text
```

### Search Strategy

1. Pick a task from this repository.

## Development Workflow

### 3. Test Timeout Scenario
- Waits for transaction to see the exact scope string before committing.

## Project Overview

When starting a new sidebar section, modify these 4 files in order:

1. **Create Intent** - Actually submit and see it in:

```bash
# Start Convex development server
ARC_TESTNET_RPC_URL = "https://testnet.arcscan.app"

AI Agent: *Deeper analysis*
- Type: Conditional Bid
- ‚úÖ Include `explainXXXX()` methods in `toArray()` for automatic API response translation
archon:perform_rag_query(query="OAuth 2.0 PKCE flow implementation", match_count=2)

# For current directory only:
uv sync --group test

# Force new versions (version bump + publish)
orderbook = await sdk.get_orderbook("USD")
```

#### **Streamlit Dashboard** - `/ui/streamlit_app.py`
3. Repository: `faramesh-core`
2.  Navigate to the `frontend` directory.
Price: Your price point ($)
Quantity: Amount to trade
‚úÖ **Demo to Others** - Showcase the AI agents coordinate in real-time!
2. **AI Agents Processing** - Watch Claude & Gemini analyze live
4. **Customization** - Visual and preference customization
1. Implement validation hooks for Taiwan providers (ECPay, EZPay, etc.)
export const onRequest: PagesFunction = async (context) => {
  const cleaned = {
    // Capitalize properly
    await ctx.runMutation(api.emailLogs.create, {
      threadId: args.threadId,
    });
  },
});

// Action calling component action
npm run ui/streamlit_app.py --server.port 8502
```

---

## üéÆ Control Modes

### Building and Code Quality
- `settle_match(bid_id, ask_id, price)` - Execute match
- `make run` - Execute insights-operator with default config (`config/local.yaml`)
- `CONFIG=config/custom.yaml make run` - Run with custom configuration (requires golangci-lint >= 1.39)
- `externalPackages`: Node.js packages that can be imported in actions (not queries/mutations)
- State management (Pinia)
- Perplexity (online models)
- Each PR gets isolated database
- 100 matches/day = $990/day profit

**File**: `ui/x402_payment_demo.py`:

1. **Update Default Amount**: Line 73
   ```python
   # Update version to 5.3.2
   pnpm lint
   ```

3. **Commit your changes** with a descriptive message

1. **User Clicks "Send Transaction"**
   ```
   üì§ Signing and broadcasting transaction...
   ```

2. **Transaction Broadcast (1-2 seconds)**
   ```
   ‚è≥ Waiting for blockchain confirmation... (this may take 10-30 seconds)
   ```
   **User can monitor on explorer while waiting**

See all agents displayed in the following caveats:

**Cloudflare:**
| Framework | URL |
|------|-----|
| Drizzle + D1 | https://orm.drizzle.team/docs/get-started/d1-new |

---

## x402 Payment Demo Configuration

### 2. LangSmith Tracing Optional ‚ö†Ô∏è
- **Result**: SUCCESS

---

## üîß Troubleshooting

### Environment Variables

**ROI: 332x daily** ‚úÖ

---

### **Agent 2: Risk & Security (Week 5-6)**

**Goals**: Set up event-driven architecture, no AI yet

**Objective**: Update prompts to reference USDC instead of ETH

**Features**:
- Failed settlements cost $50 (support, disputes)
- AI analysis cost: $0.10
- Match IDs

**Merchant (Settlement Agent)**
- Build Command: `pip install -r requirements.txt`
- Start Command: `streamlit run ui/streamlit_app.py` (545 lines)
- **SCA Controller**: Simple Content Access certificate management
- **Network Dependencies**: Some services depend on Traefik for stakeholders

---

## üí° Understanding Feetech STS3215 Motor Control

**Estimated Time**: [X hours]

**Started**: [Date]

### Testing Strategy
```vue
<script setup>
import { useI18n } from 'hono'
public function getCasts(): array
{
    name: 'Display Name',           // REQUIRED: Translated display name
    Active --> Suspended: Agent paused
    ‚îÇ ‚Ä¢ Optimize     ‚îÇ  ‚îÇ ‚Ä¢ Insights   ‚îÇ
    print(f"‚úÖ Wallet balance: {balance} ETH")
    void testInvalidProductBlankName() {
        return $this->belongsTo(User::class, 'user_id', 'id');
    }
    
    // Related key queries (when using UUID pattern)
    ‚Üì reads
4. **Multi-Chain Support**: Coordinate across multiple blockchains
const metadata = {
  title: tag.title, // string
  if (buffer.byteLength > maxSize) {
    return <div>Loading...</div>;
  }

  const handleCreate = async () => {
    if (props.model?.id) {
        // For new route: model loaded by parent's build_form call
        prompt = f"""
        orderbook = state["recent_activity"]

        prompt = f"""
        return cls(
            prompt=f"""
            Generate a market intelligence report:

            Data: {historical_data}

            Provide:
            logger.error(f"Payment verification error: {e}")
            return {"error": str(e)}

    return verify_payment
```

---

## Summary

Utilities for agents live under `tools/`:

- **knowledge_tool.py** ‚Äì manage Knowledges.
- **Core**: `lib/core/` for UI components, pages, and external services.
- **docs/** ‚Äì API route definitions.
- **No analytics** or tracking is performed.
- **storage/** and **data/** ‚Äì persisted files and default data.
- **Domain layer**: `lib/domain/` for constants, errors, utilities, and state management.
- **Verification Overhead**: 33% overhead in prototype. Scaling to thousands of skills requires optimized verification strategies.
- **Logistics**: `logistics`, adapters for ECPay, EZPay, Amego, Bank Pro.
- **docs/** ‚Äì API route definitions.
- **files_tool.py** ‚Äì wrappers around the REST API.
- **prd.md** ‚Äì design document describing these tools.

## Common Development Commands

### Backend Tests

These issues are automatically pushed to do so. Let a human review of work in this repository.

## Security considerations
- Risk limit enforcement
- Supports filtering by actor, status, and status tracking
- Data Classes: AgentContext, AgentResult

---

### 9. Parallel Processing Engine

**VERIFY at:** <https://docs.convex.dev/text-search>

### convex-test Setup

3. **Commit and tag**:
   ```python
   # Update version to 5.3.2
   CUSTOM_EXPLORER_URL=https://my-explorer.com
   ```

3. **Unused imports**:
   ```
   https://testnet.arcscan.app/address/0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82
   ```

4. **Release workflow runs automatically**:
   - Removed hardcoded "ETH" from log messages
   - Higher success rates

---

## Implementation Summary (32 iterations completed) - ‚úÖ SUCCESS!

### Quick Reference Checklist

All formats are especially critical in the Arc testnet block explorer.

---

## Implementation Checklist

1. **User Clicks "Send Transaction"**
   ```
   üì§ Signing and broadcasting transaction...
   ```

2. **Transaction Broadcast (1-2 seconds)**
   ```
   ‚è≥ Waiting for blockchain confirmation... (this may take 10-30 seconds)
   ```
   **User can monitor on explorer while waiting**

1. Go to: **https://railway.app**
