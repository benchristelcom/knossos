# CLAUDE.md

Unlike prior work that uses deterministic evaluators only when they require different tools, different trust boundaries, or different resource profiles. Everything else is a different prompt.

| Agent | Scope | Tools | Justification for Separation |
| --- | --- | --- | --- |
| **Catalog Analyst** | Cross-tenant schemas, naming, staleness, metadata, relationships | HMS, MCP query, S3 metadata | Broad mandate, single tool set. Five original agents merged because they all operate on the same substrate (Hive Metastore schemas and Delta Lake table contents via MCP queries), share read access patterns, and share context. |
| **Permission Auditor** | Per-tenant policies, group memberships | Governance API (not HMS/MCP) | Different trust boundary (security-sensitive), genuinely different tool set (IAM policies, not table data). |
| **Quality Scanner** | Per-table data profiling | MCP query (heavy aggregates) | Resource isolation required â€” runs heavy aggregate queries (COUNT, DISTINCT, NULL rates, distribution analysis) that would saturate shared Spark clusters. |

### Catalog Analyst: Two-Phase Pipeline

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#integration-points)

The `$settingStore` is available in ALL roles (admin, merchant, user) and contains globally accessible, frequently used data. **ALWAYS** use `$settingStore` for country-related operations.

### 7. Meeting Notes & Action Items
**For models that need dynamic translation parameters, use a reserved `params` JSON column**

```typescript
cuti agent

# Release packages (version bump and publish)
fd . -t d           # All directories
results = con.sql("SELECT * FROM battles WHERE winner.trophyChange > 30 LIMIT 10").df()
```

## Development Guidelines

### Audio Terms

- **CRITICAL**: Always call `dispose()` on AudioFile instances when done
- Create matching BUY and SELL intents through UI component verification
- 30-40: More responsive (needs lower control rate ~20 Hz)
- Prefer "safe default + warning" over partial behavior.
- Leave code easier to read than you found it.

### 6. Vendor Invoice Matching
**Outcome**: $10M+ annual revenue

**Success Criteria**:
- Agents propose actions
- Risk score: High (< 40)
- Auction Engine (matching service)
- Background indexer not automatically triggered (manual refresh needed)

---

## ğŸš€ After Deployment

âœ… **Contract Addresses**: Now clickable in sidebar and Airbyte.

**Bead IDs** (also called **issue IDs**) use a prefix + 5-character alphanumeric format (e.g., `gt-abc12`, `hq-x7k2m`). The prefix indicates the item's origin or rig. Commands like `gt sling` and `gt convoy` accept these IDs to reference specific work items. The terms "bead" and "issue" are used interchangeablyâ€”beads are the work items stored as beads.

> **New to Gas Town?** See the [Glossary](docs/glossary.md) for a complete guide to terminology and concepts.

## Security considerations
- Real gas costs calculated
- âŒ Environment variables
- âœ… AI cost only 2-3% of revenue
- ğŸ“Š **Real-Time Monitoring** - Progress and logs
- Delivers services after payment confirmation

---

## Conclusion

1. Navigate to Payments tab â†’ x402 Demo

Use the Arc Coordination System is now fully integrated with the `PAYMENT_CHAIN_ID` environment variable:

```bash
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ form-label-text-input.hbs
mypy ttcal/ --ignore-missing-imports
```

### Streamlit Not Loading

**Output**: MarketData with price, volatility, sentiment, confidence

**Competitive Advantage**: âœ… Compounding

---

### 3. My Intents (ğŸ“‹)
**Performance**: 50x faster matching
**11.5x ROI** with AI cost of $2,180/month revenue (at 30K intents/month scale).

### 2. Subagent Strategy (When Risk Is High)
- Live bid/ask order display
- Human approval for critical decisions
- Test both happy path
- âœ… Streamlit: http://localhost:8545
- Focus: Perfect the AI experience
- Lerna operates in background with appropriate mocking.

## Commit message format
â”‚  â”‚ (exec code) â”‚     /enqueue, etc.       â”‚   - /enqueue (submit req)   â”‚   â”‚
Added try-catch block to safely extract intent ID from transaction receipt:

```bash
â”‚Â Â      â””â”€â”€ template_config.js
3. Build command: *(empty)* | Output directory: `/` or `/public`
4. Deploy

### Evidence Bundle Structure

```typescript
python main.py --config <yaml-file> [options] <command> [args]
```

#### Global Options
- `--config, -c`: Path to YAML configuration file (required)
- `--recursive`: Recursively process directories
- `--sparse-top-k`: Top results for sparse/keyword search
- `--config, -c`: Path to YAML configuration file (required)
- `--from`: Input source (file, directory, or `-` for stdin)
- `--recursive`: Recursively process directories
- `--verbose`: Show DEBUG logs and detailed traces
- `--debug`: Show DEBUG logs and detailed traces
- `--num-workers, -j`: Parallel workers for sparse/keyword search
- `--top-k`: Number of top chunks to retrieve
- `--num-workers, -j`: Parallel workers for document processing
- `--debug`: Show DEBUG logs and detailed traces
- `--num-workers, -j`: Parallel workers for document processing
- `--force`: Bypass cache and force re-indexing

#### Tasks:
- [ ] **TASK-005**: Implement task profiling system
  - Build cron expression parser and recovery
  - **Estimate**: 4 days
  - **Estimate**: 5 days
  - **Dependencies**: TASK-018

**Workflow (Create)**:
1. Enter amount and currency
const files = await ctx.db
  .query("tasks")
  .filter((q) => q.eq(q.field("userId"), "user_123"))
  .collect();
```

**Critical:** "You must explicitly use the withIndex() syntax to ensure your database uses the index"

**Step 2**: Agent cards appear
- Use `Semantics` widget for screen reader support with proper separation of the shared `IChatClient` prompt constants, capture a thorough visual description first, convert diagrams/schematics into Mermaid or structured object generation
- Full filesystem access available

---

## ğŸ¯ MISSION ACCOMPLISHED

npx convex data tasks --order desc
# - Generates .env.local with CONVEX_DEPLOYMENT

# Optional: Multi-chain support
await coordinator.start()
```

**Features**:
- Uses `MockX402PaymentService`
- Test with coverage: `yarn test:coverage`
- Monorepo orchestrators: `nx.json`, `lerna.json`
- Configuration: `config/.env` and `config/.env.example`
- Manual trigger support via `workflow_dispatch`

## Key Directories

- `src/components/` - React components
- `syslog_ng_feature_flag: false` - Container visualization

### Phase 3 (Risk & Security)
- [ ] Create index_new.rst with new structure

#### 7. Mandates Page (ğŸ’³)
- Consider using Workers API for better performance

### Agents lose connection

âœ… Payment request created:
   - A concrete alternative path.
   - Include "Verify" tasks explicitly (lint/tests/build/manual checks).
2. **Define Success**
   - ci-compile.py:308-338: Added --machine CLI parameter for as.exe on Windows

2. Integrate with existing endpoints:
   - `/intents/submit` â†’ Trigger AI workflow
   - `/matches` â†’ Display AI match scores

### Step 2: Core Features (Medium Priority)
- [ ] Set up error tracking (Sentry, LogRocket, etc.)
- [ ] Configured monitoring alerts
- [ ] Implement rate limiting
- [ ] 80% of intents parsed successfully (NL â†’ structured)
- [ ] Checked Convex dashboard for all operations

---

## Conclusion

1. **Expand "Configure Test Scenario"** section
import { action } from "./ConvexClientProvider";

const duplicates = await findDuplicates("/music", ["artist", "title"]);

for (const [key, files] of duplicates) {
  throw new Error(`File too small: ${buffer.byteLength} bytes`);
}

// Pattern 2: Track memory usage
import { internalQuery, internalMutation, internalAction } from "taglib-wasm";
import { ConvexProviderWithClerk } from "convex/values";
import { pipeline } from "react";

// Read tags
â”‚   â”œâ”€â”€ openai.yaml            # OpenAI configuration
3. Click **â–¶ï¸ Start Workflow**
Same as Railway Step 6

---

## Testing Checklist

- [x] Payment service supports ERC-20 tokens (USDC)
- [A2A Protocol](https://web3py.readthedocs.io/)
- [Codecov Documentation](https://docs.codecov.com/build/buildx/)
- [Docker Buildx](https://www.npmjs.com/package/@rytass/payments-adapter-ctbc-micro-fast-pay): CTBC Bank fast payment and card binding solutions
- [x] Works offline (no API dependency)
- [x] Market Agent (Pattern detection)
- [A2A Protocol](https://web3py.readthedocs.io/)
- [Docker Buildx](https://www.npmjs.com/package/@rytass/payments-adapter-ctc): CTC Express logistics status tracking
- [x] Created `services/agents/matching_agent.py`
  - Finds optimal intent matches
  - Add template variable replacement UI
  - **Estimate**: 3 days
  - **Estimate**: 3 days
  - **Dependencies**: None

- [ ] **TASK-012**: Add PR/MR automation
  - Implement template browser/gallery interface
  - âœ… test.py supports QEMU testing for Windows/Git Bash

- [ ] **TASK-031**: Implement workspace sharing
  - Implement dependency graph execution system (local file-based)
  - Backend actions: `process.env.STRIPE_SECRET_KEY`
  - Queries/mutations: CANNOT access environment variables (deterministic requirement)

---

### ConvexProvider Setup Patterns

#### Tasks:
- [ ] **TASK-013**: Design template data structure and schema
  - Renditions and responsive images
  - Implement schedule data model and storage strategy
  - Implement automatic PR creation
  - Design task distribution algorithm
  - **Dependencies**: None

- [ ] **Step 4.1**: Test full workflow
  ```bash
  # One-command test from scratch
  await saveFile({ storageId, filename: file.name });
};
```

---

## Full Text Search

**Additional Documentation Needed**:
- Original Plan: $150-450/day = $4,500-13,500/month
- âœ… Multi-dimensional analysis before coding.

### Convoys ğŸšš

If you use this work in `.gitignore`:
```
config/.env
.DS_Store
const statusOptions = $helper.getEnumOptions('Deposit.status');
const bankOptions = $helper.getEnumOptions('CompanyBank.bank_code');

// In search filters
{ 
    label: $i18n.t('Status'), 
    type: 'select', 
    params: { id: record.id } 
})

// With query parameters
$modalStore.closeModal(id)                            // Get specific modal data
```

### Local Development
```php
rg -n "pattern"                 # Count matches per file
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud
```

**Interactive Python with dataset:**
```typescript
// Define Env interface for typed bindings
Decision: APPROVE
```

---

## Files Modified

| Method                  | Files       | Time     | Speed           | Best For         |
| ----------------------- | ----------- | -------- | --------------- | ---------------- |
| Sequential `readTags()` | 19 files    | ~90s     | 1x baseline     | Single files     |
| **`readTagsBatch()`**   | 19 files    | **~5s**  | **18x faster**  | File lists       |
| **`scanFolder()`**      | 1000 files  | **2-4s** | **~10x faster** | Directories      |
| Worker Pool             | Complex ops | ~22s     | 4x faster       | Heavy processing |

### Common Gotchas
source .venv/bin/activate

# Pages dev with specific database
2. Analyze market conditions
import { applyTags, readTags } from "taglib-wasm";
import { v } from "convex/values";
import {
  data: currentProductionPromptData,
  maxSize: number = 100 * 1024 * 1024, // 100MB
) {
  // Validate size
  2. Validates rules against JSON schema (`pkg/gatherers/conditional/gathering_rules.schema.json`)
  3. Evaluates conditions (alert firing, cluster version, etc.)
  4. Executes matching gathering functions with parameters
- **Tools**: check_actor_reputation, calculate_volatility, get_market_depth
- **Copy-Paste Ready**: Students can reference solution code when needed
- **Default**: Falls back to Arc testnet (chain ID 5042002)
- **Schemas**: `/packages/agents-core/src/data/db/schema.ts` (Drizzle), `/agents-run-api/src/schemas/` (Zod validation)
- **Conditional Gatherer** (`pkg/gatherers/conditional/`) - Collects data based on schema
- **Payer paid: -0.01 ETH + gas fees** âœ“

**ui/x402_payment_demo.py:425-439**:
```python
Address: 0x70997970...
Method: ECDSA

Your URL will be found under `docker`. It requires a Docker or Docker-compatible daemon
Added logging at each step for missing or minimal docstrings
4. **Forms requiring extensive validation** or real-time feedback
eth-account>=0.1.0
wrangler d1 create "Bug Fixes" --human

# Execute SQL file against LOCAL database
Laravel-based system with comments
import { agent } from 'zod';
import ComponentForm from './component-form.vue';

describe('NewFeature', () => {
  beforeEach(() => {
    return $settingStore.countryForOptions;
});

// âŒ WRONG: Don't load countries from API calls
// Translation keys in lang/*.json files
"Transaction transfer credit out": "è½¬å¸è‡³ :to_username",           // zh.json
"Transaction transfer credit out": "è½¬å¸è‡³ :to_username",  // zh.json

"Insufficient x": "Insufficient :x",            // en.json
"Insufficient x": ":x ä¸è¶³",                    // zh.json
"Merchant Transaction settlement canceled": "Settlement canceled",              // en.json
```

**vitest.config.ts:**

```bash
# Run tests
wrangler types --env-interface CloudflareBindings

# ============================================================================
# LOCAL DEVELOPMENT
# AUCTION_ESCROW_ADDRESS=<deployed_address>

# 4. Start services
public function buildForm(Request $request) {
    foreach (loopLanguageForColumn($column) as $c) {
        $article->{$c['column']} = $request->get($c['column']);
    }
}
```

### 6. API Routing - Use `buildForm`/`submitForm` Pattern

**Acceptance Criteria**:
- [ ] System profiles task execution performance
- [ ] Failed schedules trigger appropriate notifications

---

## ğŸ¤ **Priority 3: Collaboration Features**

### 3. **Competitive Advantage > Efficiency**

