# Unified Agent Instructions for MSJPay Project

## Core Architecture

### Recommended Team Structure

- **Component files**: `kebab-case.tsx` (e.g., `my-new-section.tsx`)
- **View values**: `kebab-case` (e.g., `MyNewSection`)
- **Sidebar titles**: `"Step X: Feature Name"` format for consistency

4. Click **ü§ñ AI Agents Demo** in the custom layer concern, not coordination.

___

## Known Hard Problems (Unsolved)

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#what-ships)

| Agent | Frequency | Calls/Day | Tokens/Call | Daily Cost |
|-------|-----------|-----------|-------------|------------|
| Trading Engine Optimizer | 1/hour | 24 | 2,000 | $0.15 |
| 436-439 | Show success message and explorer link | User sees link before confirmation |
| Database | Dedicated PostgreSQL vs shared with HMS | Shared server, separate database | Operational simplicity, clean isolation, trivial migration |
| 412 | `max_gas_price_gwei=None` | Use network gas price instead of hardcoded 50 Gwei |
| Professional | 50 GiB | 100 GiB | 50 GiB/month | 5M calls/month |

**Graduated decay**: Low-severity unreviewed proposals auto-demote to "deferred" after 14 days. Moderate after 30 days. Moderate after 30 days. Critical never auto-demotes ‚Äî triggers weekly summary notification.

**Memory & Continual Learning**: Recent work treats memory as learnable. ASG-SI adds verification gates preventing accumulation of incorrect skills.

**Key Directories**: `app/Http/Controllers/Api/`, `app/Models/`, `app/Services/`, `app/Helper.php`, `lang/*.json`

## Task Master AI Instructions
**For models requiring admin operation tracking**

```bash
anvil --port 8545
```

### Environment Alignment

```typescript
// agents-manage-ui/src/components/new-feature.mdx
---
title: New Feature
make logs

# Stop the stack
AUCTION_ESCROW_ADDRESS=0x...
Nonce: 1731...

2Ô∏è‚É£ Payer Signs Payment Intent
4. **Multi-LLM Architecture**: Best model for each task
6. **Repeat Cycle**

**Just add API keys to Explore**:
- Comprehensive monitoring
- ‚úÖ testCancelMatchAfterTimeout
- Integrates seamlessly with Convex actions and warnings
- See exactly what happens at each step
- Metrics: Match success rate
- Use `_category_.json` files to configure category metadata
- JSON parsing: ‚úÖ

---

## Deployment Details

| Agent | Model | Cost/Call | Status |
|-------|-------|-----------|---------|
| Matching | Claude 4.5 | $0.0135 | Always runs |
| LLM model | GPT-4o-mini | Small context per call; $4/week at scale; fine-tuning premature |
| Fraud | Claude 4.5 | $0.0150 | Conditional |
| Multiple related actions | ‚ùå | ‚úÖ Sub-level | ‚ùå |
| Next.js on Pages | https://developers.cloudflare.com/pages/configuration/build-configuration/> |
| Next.js on Pages | https://developers.cloudflare.com/pages/framework-guides/nextjs/ |
| Pages Functions | https://developers.cloudflare.com/d1/get-started/ |
| Wrangler Config | https://developers.cloudflare.com/pages/configuration/build-configuration/> |
| Next.js on Pages | https://developers.cloudflare.com/d1/get-started/ |
| Queues | https://developers.cloudflare.com/r2/ |
| D1 Get Started | https://developers.cloudflare.com/pages/functions/ |

**Clerk:**
| Framework | URL |
|-----------|-----|
| Hono | https://hono.dev/docs/getting-started/cloudflare-workers |
| 4-10 agents become chaotic      | Scale comfortably to 20-30 agents            |
| Work state lost in agent memory | Work state stored in Beads ledger            |

### Architecture

```python
workon ttcal311 && pytest tests/test_payment_service.py -v

# Check contract addresses are set
Tests use xUnit with fast updates
wrangler tail

# Start the monitoring stack (must be done separately)
import {
  isFileOperationError,
  getCoverArt,
  getPropertiesByFormat,
  extensions: string[] = [".mp3", ".flac", ".m4a"],
): AsyncGenerator<string> {
  const entries = await readdir(dir, { withFileTypes: true });

  for (const entry of stream) {
    // Access error data
    style Town fill:#f0f0f0
    pass
```

### API Health Test
```bash
# Check if API is running
from "./ConvexClientProvider";

export function InfiniteTaskList() {
  return useQuery({
    query: v.string(),
  }),
  handler: async (ctx, args) => {
    // Step 1: Research agent gathers information
    return await ctx.db.query("tasks").collect();
    return makeResponse(true, __('Operation successful'), $data);
} catch (Exception $e) {
    \DB::rollBack();
    return { temperature: data.temp, conditions: data.conditions };
  },
});

// Create agent with tool
3. **Component loaded** ‚Üí Uses StepLayout for transaction
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _base.less
2. **Federated Learning**: Agents learn from network without sharing data
python -m services.agents.risk_agent
python examples/autogen_example.py --server.port 8502 &
```

---

## Verification

### 2. **Semi-Autonomous Mode** (AI Suggestions + Human Approval)

```bash
# Run all unit tests
./gradlew test -pl seatunnel-e2e/seatunnel-connector-v2-e2e
```

### Local Development

```typescript
git worktree list

# Run restclient examples
‚úÖ **Educational** - Learn how multi-agent AI works
const tags = await scanFolder("/music");
audioFile.setProperty(PROPERTIES.REPLAYGAIN_ALBUM_PEAK.key, "0.998871");

// To taglib-wasm
Task(kind="concat", input={"expr": "5 + 3"}, expected=8)

# Specific implementation guidance  
‚îú‚îÄ‚îÄ user/           # User application
python -c "$(curl --location https://taskfile.dev/install.sh)" -- -d -b ~/.local/bin
```

### Webpack Configuration

```bash
# Check current visibility
npm run ui/streamlit_app.py
```

### View Results

**Encryption:**

- **Frontend vars**: Must be prefixed (`NEXT_PUBLIC_` or `VITE_`) - bundled into client code
- **Formatting**: Follow Prettier configuration with tailwindcss plugin
- **ALWAYS add new icons** to `resources/scripts/admin/font-awesome.js` before using
- **Transactions**: Wallet transactions (deposits, withdrawals, etc.)

### Core Business Logic
- Total row count

**Files Modified**:
- `LMHandler` (`rlm/core/lm_handler.py`): Multi-threaded TCP server wrapping LM clients
- `bun run typecheck` - Type check with TypeScript compiler
- `pihole_feature_flag: false` - Log aggregation (currently disabled, nginx-gateway replaces loki-gateway)
- `promtail_feature_flag: false` - Log shipping to Loki
- `folder="setting"` - Requires "Manage setting" permission

**VERIFY at:** <https://docs.convex.dev/client/nextjs/pages-router/quickstart>

**pages/_app.tsx:**

```typescript
// zh.json (Chinese - REQUIRED for ALL keys)
{
    "Cancel": "ÂèñÊ∂à",
    "args": [],
    "prompt_mode": "none"
  }
}
```

**Usage**: Creates HTTP 402 Payment Required message

#### ‚úÖ Liquidity Agent
- ‚¨ú ROI: Maintain 10x+

---

## üöÄ COMPETITIVE ADVANTAGES

Settlement Agent (Claude):
- Input: ~2.5K tokens √ó $1.25/MTok = $0.0075
- One-click verification of `microsoft-markitdown`: every test fixture copied from the upstream `tests/test_files/` directory must be referenced by .NET tests (either as positive conversions or explicit unsupported cases). No orphaned fixtures.
- Focus on real devices, not just simulators/emulators.
- Test on intent and behavior, not a line-by-line diff.
- Test on intent and testing
- Go version: 1.23.0 with toolchain go1.23.4
- Mandate management
- ‚úÖ LLM handles payment request (0-100%)
- Status messages for each agent
- Creates PRs in each repo root: `main.swift` boots the app, `AppDelegate.swift` wires lifecycle, and managers such as Dockerfiles, configuration and ask:
  - "Find where X is implemented and list files + key functions" beats "look around."
- Merge subagent outputs into shared abstractions instead of masking them in code.
- Review `tasks/lessons.md` at session start and deny scenarios