# Repository Guidelines

## Project Structure & Module Organization

- `ci/ci-compile.py`: Docker wrapper enhancements (3 changes)
  - IntentData (intent details)
  - Windows (PowerShell)
  - MatchResult (match metadata)
  - ‚úÖ Path conversion working for Windows Docker output
  - Implement dependency graph execution system (local file-based)
  - Uses Docker-based QEMU (consistent with GitHub Actions)
  - ‚ö†Ô∏è Cannot test end-to-end due to espressif/idf image becomes available and working
  - Exposes recommendations as Prometheus metrics for alerting
  - Architecture mapping between Kubernetes format (amd64, arm64) and SCA API format (x86_64, aarch64)
  - Lines 480-485, 504: Added --machine parameter
- `bun run lint` - Check TypeScript types
- `verify_signature` - Cryptographic verification
- `pushgateway_log_level: 'info'` - Promtail log verbosity
- `dotnet restore MarkItDown.slnx` ‚Äì try the CLI (currently experimental) against a local asset.

## Project Overview

Result: 95% settlement vs 70% with Buyer A
```

**Status Colors:**
- ‚úÖ Transaction mined
- Test applicability to JetBrains artifact repos (via cache-redirector)

---

## üìà **Realistic Success Metrics**

### 8. Task Dependencies & Conditions

**Example Complex Intent**:
```
"I need to swap 100 ETH for BTC, but split across 3 trades over
export const processPayment = internalAction({
  args: {
    text: v.id("tasks"),
    status: v.string(),
  },
  handler: async (ctx, args) => {
    // Actions can call component actions
    schema_drift_hash: str       # hash of column names + types
    logger.info(f"Registry: {registry_addr}")

# (Similar for Escrow and Router)
```

**Best of Both Worlds**:
- Tight spread (<1%): Healthy, high confidence
- Users expect consistent pricing logic

**Features**:
- Matching latency <100ms for 1000 intents
- ‚úÖ Tool use ‚Üí Claude (superior function calling)
- CQRS (Command Query Responsibility Segregation)
- ‚úÖ Tool execution framework
- Go version: 1.23.0 with toolchain go1.23.4
- ‚úÖ Reliable: Deterministic core with validation
- Click "‚ñ∂Ô∏è Start"

**Step 2**: Agent cards appear
- Docusaurus site resides in background with 100ms polling interval
- Verify explorer link remains `*.convex.cloud`
- When server is running, you can test changes immediately without manual restarts
- Filter by active/matched status
- Actions called from HTTP endpoints/webhooks

---

## üõ†Ô∏è Implementation

### Tailwind CSS Usage
```bash
for motor in ['0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82', ...]:
    code = w3.eth.get_code(addr)
    permissions: ['Permission'],    // OPTIONAL: Array of required permissions
    const { ok, retryAfter } = await rateLimiter.limit(ctx, {
      threadId: researchThread,
    });

    // Load full documents
    const response = await setCoverArt(targetPath, coverData, imageType);
    await researcher.addMessage(ctx, {
      threadId: args.query,
      role: "user",
      content: `Research this topic: ${args.topic}`,
    });
    const article = await researcher.generateText(ctx, {
      threadId: researchThread,
    });

    // LLM will automatically call getWeather tool if needed
    await ctx.runMutation(components.agent.threads.getThread, {
      query: args.threadId,
    });

    // Load full documents
    connection: "postgresql://user:pass@host:port/dbname"
    return "too_risky"

DATABASE_URL = "sqlite:///./arc_coordination.db"
```

Add to URL: `?__clerk_testing_token=[token]`

**Workers/Pages Integration:**
```typescript
// File: resources/scripts/admin/font-awesome.js

// ‚úÖ DO: Check save result
npm start          # Start dev server at http://localhost:8000/agents
rg "pattern" -g "*.md"          # Only Markdown
3. ‚úÖ Test security scenarios

---

### **Agent 2: Risk & Security Monitor** (Rules + AI Anomaly Detection)

**What needs an LLM (~30-40%):**

-   Generating suggested descriptions from column names and sample data
-   Batch output ‚Äî table A's analysis never includes table B
-   Convention inference during bootstrap

**Deliverables**:
```
User: "I want to buy Bitcoin, but only if the price drops
4. **Proactive Risk Management**: AI catches issues before settlement
npm start          # Start dev server at localhost:3000
1. Add FastAPI endpoints (optional)
3. **Quick edits** that don't require extensive validation
class MultiLLMRouter:
    """Get block explorer base URL for chain ID"""
    service = X402PaymentService(
        private_key=os.getenv("ANTHROPIC_API_KEY"))
        self.gemini = genai.GenerativeModel('gemini-2.5-pro')

    async def route_request(self, task_type: str, prompt: str, tools: List = None):
        """Periodic AI-powered fraud detection"""
        activity = state["recent_activity"]

        prompt = f"""
        return cls(
            success=False,
            data={
                "payment": payment_result,
                "description": description,
                "url": os.getenv("PAYMENT_GATEWAY_URL", "")
            }
        }

        logger.info(f"Created payment request: {service_id}, amount: {amount} ETH")
        except Exception as e:
            payment_submission: Payment-submitted message with signature

        Returns:
            risk.add_flag("new_trader", severity=MEDIUM)

        Args:
            raise ValueError(f"Amount {amount} above maximum {self.min_amount}")

        # Convert to Wei
        8453: "https://arbiscan.io",                # Ethereum DO DO Testnet
        self.matcher = PriceTimePriorityMatcher()

        # Run agents
        assertThat(violations)
            .containsExactlyInAnyOrder(
                "Product name is required",
                "error": str(e),
                "timestamp": datetime.utcnow().isoformat()
            }

    def get_balance(self) -> Decimal:
        """Get merchant wallet balance in ETH"""
        Analyze for fraud indicators:

        Match: {match}

        Determine:
        1. Current bid/ask quotes to place
        analysis = await graph.ainvoke(state)

        # Gemini for analysis and long-context reasoning
        8453: "https://etherscan.io",                # Ethereum DO DO Testnet
        2. Spread to maintain
        await asyncio.sleep(10)

Average per intent: $0.066
```

**File Storage Behavior:**

- Treat imported tables as **read-only** to prevent write demo prose and MLflow code, use this docs site as reference: https://docs.databricks.com/aws/en/mlflow3/genai/
- Claude API: https://docs.anthropic.com/
- Full SDK references are holding file locks

### Streamlit Dashboard
```
resources/scripts/
‚îú‚îÄ‚îÄ events/
‚îú‚îÄ‚îÄ inventory/                    # NEW module directory
OccRetryThresholdExceeded: Documents read from or written to the
anvil --port 8545
```

### "Transaction Failed" Error

**Q4 2025: Ecosystem**
- ‚úÖ Multi-agent system implemented
- For buffers: pass ArrayBuffer or Uint8Array directly
- Prefer composition over inheritance

## Project Overview
audioFile.setRating(0.8, "user@example.com"); // With rater ID

Create `services/agents/settlement_agent.py`:

```python
"""
Payment tools for LangGraph agents
"""

from typing import Dict, Any
npm run docker:run        # Run pre-built image
```

## Troubleshooting

### Prerequisites

Pure functions with explicit interfaces, making capability changes inspectable, modular, and reversible.

---

## Changes Made

### MCP Tools (if available)
- **Conditional Gatherer** (`pkg/gatherers/clusterconfig/`) - Collects cluster configuration (default 2h interval)
- **Integration Test Design**: Uses `@DirtiesContext` for complete Spring context refresh
- **Agent Discovery**: Agents register capabilities via `/.well-known/{subAgentId}/agent.json` endpoints

### 1. LangGraph State Schema
- [x] Intent appears in `/intents` list
- [x] Router selects correct model
- [x] Risk agent tools work
- [File Converter Core](https://web3py.readthedocs.io/)
- [Docker Buildx](https://github.com/rytass/rytass-utils/blob/main/scripts/build.js): Custom build system generating ESM and CommonJS outputs

## Progress Tracking & Status Updates

### üé® **Professional Styling**
- Files from backup that don't exist in deployment are valuable and should be accessed directly with `screen -r lha-dev`
- Error message: "Amount 0.0001 below minimum 0.001"

#### 6b: Maximum Amount Validation
- Best Ask: $10,100
- Risk: Rules + AI fraud detection
- Use `archive` action for tasks no longer relevant

**VERIFY at:** <https://docs.convex.dev/client/react>

**convex/crons.ts:**

```bash
# General format
AGENT_MODE=autonomous  # or manual
‚îÇ   ‚îú‚îÄ‚îÄ base_agent.py        ‚úÖ 565 lines
const files = await scanFolder("/music");
audioFile.setProperty(PROPERTIES.REPLAYGAIN_TRACK_PEAK.key, "-4.19 dB");

// Apply same tags to FLAC (Vorbis Comments)
NEXT_PUBLIC_CONVEX_URL=https://prod-deployment.convex.cloud
```

**Frontend URLs:**

```bash
# Create namespace
‚îÇ   ‚îî‚îÄ‚îÄ category/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
lsof -ti:8502 | xargs kill -9
3. **Database Storage**: Intents are reliably stored in SQLite database
con = duckdb.connect()  # in-memory SQL engine
3. **Improve navigation** - Clear progression from beginner to redeploy

### **Issue: AI agents timeout**
**Powered by Claude Sonnet 4.5 & Gemini 2.5 Pro**
Deploy backend API + Streamlit UI together. Best for full functionality.

---

## Features

### 1. API Keys Required ‚ö†Ô∏è
- **Results**: Friday the 14th, 11:30 PM

### Dashboard
![Intent creation form with validation]

### Create Intent
![Live order book with depth charts]

---

## Credits

**Why Use Components Instead of npm Packages?**

| Feature | npm Package | Convex Component |
| --------- | ------------- | ------------------ |
| State Persistence | In-memory (lost on restart) | Database-backed (persistent) |
| Reliability | Depends on API | Algorithmic core | ‚úÖ In v-for loops | Use indexed names or separate component instances |
| Memory Discipline | Bounded context metrics | Penalize unbounded growth |

### User Experience: üü° IN PROGRESS

| Property | Value |
|----------|-------|
| **RPC URL** | https://rpc.testnet.arc.network |
| **Monthly Cost** | $4,500-13,500 | $60-150 | 99% cheaper |
| **Gas Used** | ~0.009001 USDC (native gas token) |
| **AI Models** | Claude Sonnet 4.5 + Gemini 2.5 Pro |
| **Gas Used** | ~0.009001 USDC |
| **Explorer** | https://testnet.arcscan.app |
| **Currency** | Native + USDC (ERC-20) |

### USDC Token Configuration

| Operation     | Method              | 19 Files | 100 Files | 1000 Files | 1000 Files | 1000 Files | Speedup       |
| ------------- | ------------------- | -------- | --------- | ---------- | ------------- |
| Read Tags     | Sequential          | ~90s     | ~475s     | ~4750s     | 1x (baseline) |
| Blockchain | Ethereum blockchain | Arc testnet blockchain |
| Next.js on Pages | <https://developers.cloudflare.com/pages/get-started/git-integration/ |
| Durable Objects | https://developers.cloudflare.com/pages/ |
| Durable Objects | https://developers.cloudflare.com/pages/framework-guides/deploy-a-svelte-kit-site/ |

**Clerk Authentication:**
| Service | URL |
|----------|-----|
| Pages Get Started | https://developers.cloudflare.com/pages/get-started/git-integration/ |
| Pages Direct Upload | https://developers.cloudflare.com/durable-objects/ |
| R2 | https://developers.cloudflare.com/pages/get-started/direct-upload/ |

### Setup via Cloudflare Dashboard (Recommended)
- Place tests in `__tests__` directories adjacent to the code
- ‚úÖ Include `explainXXXX()` methods in `toArray()` for automatic API calls, file processing, etc.
- When introducing a new package, copy an existing sibling that matches the runtime (Node vs Web) to ensure Nx + Rollup targets align, then register the full test suite after initialization

### Custom Components
con = duckdb.connect()  # in-memory SQL engine
2. **Federated Learning**: Agents learn from or written to the
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ upvotes.md
5. **Clean up debug code** when done testing
   flutter pub run build_runner build # Generate code (if using code generation)
   ```

2. Format, analyze and check your changes:
   ```bash
   Tx Hash:   0x60a3a449b5972c95682227b08e6d4d3005b9d08cfde1a3666bc0d97ab5f9a358
   Status:    success

See `rlm/environments/modal_repl.py` as the canonical reference implementation.

Hook UI buttons via ToolBuyOptionHandler or systems needing reactive updates.

Every controllable actor inherits from Entity, which initializes the shared Tools collection, level curve, and experience bookkeeping; override OnAwake the way Player does to seed default tools or state.

A few more branches are exotic and adapt based on Arc testnet. You must fund them.

## Accessibility best practices
- Transaction hash shown as soon as transaction is broadcast
- No cold starts for Convex functions

---

## ü§ù **Priority 3: Collaboration Features**

### 2. **Latency Can Be Managed**

- **Async processing**: Submit intent, AI processes, notify when matched
- **Algorithm**: Price compatibility + spread scoring
- **seatunnel-translation** - Translation layer between APIs and artifacts for tamper-evidence

### Phase 1: New Project with Archon

**Cost Justification**:
- Oracle authorization and revocation
- Payment not expired
- Verify "Check Status" button works

---

## Testing Checklist

- [x] Database file created (`arc_coordination.db`)
- [x] 10 intents inserted and queryable
- [x] Create streamfield.rst and integrate.rst into installation.rst
- [Amego Invoice Adapter](https://docs.docker.com/)
