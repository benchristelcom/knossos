# CLAUDE.md - Cloudflare Platform Project Template

## Troubleshooting

- Use `AWS::Partition` pseudo-parameter for ARNs to support all code according to the project's style guidelines
- Maximum 1024 documents scanned per query
- Cost: $0.0135/intent

When building a new isolated environment (e.g., copy `step2-evaluation.tsx`)
3. Select repos to a static site, create a `functions/` directory:

```
/
├── index.html
app.use(agent, { name: "customerSupport" });
app.use(rateLimit, { name: "rateLimit" });

// Multiple instances of same component
3. Add to Matches page
Settlement Agent: $0.0150
│   │   │   │   ├── alerts.hbs
const documentRAG = rag({
  args: { threadId: v.id("users"), amount: v.string() },
  handler: async (ctx, args) => {
    let searchQuery = ctx.db
      .query("tasks")
      .withIndex("by_user", (q) =>
        q.eq("userId", identity.subject)
      )
      .collect();

    console.log(`Processed ${totalProcessed} files...`);
  }
}
```

### Memory-Efficient Scanning

```typescript
2. **Why decisions are made** - AI reasoning displayed
5. **Logging**: All payment actions logged
python examples/test_autogen.py --server.port 8502
# Dev environment
sh -c "
from services.agents.settlement_agent
st_autorefresh = st.experimental_rerun
1. Click your app → Settings → Secrets
2. Lock parameter must be 0 to allow EPROM writes
1. Complete current stack work first
docker/build-docker-image.sh fc42

# Specific test file
│ Finding matches...  │
wrangler tail --env staging

# Build specific script (overrides config)
5. Add ERC-20 support to AuctionEscrow contract
import { TagLibWorkers } from "taglib-wasm/simple";
import { expect, test } from "vitest";
const tags = await readMetadataBatch(tracks, { concurrency: 8 });
console.timeEnd("Batch"); // ~5 seconds (20x faster!)
```

## Security Considerations

### Ready for Deployment ✅

Good luck!
const file = taglib.open(buffer); // This will fail

// FAST: Batch approach
Initialize CoordinationState
    else:
        return st.secrets[key]
    # Fall back to environment variables (for local)
    policy.update(trajectories, rewards)
```

### URL Generation

**VERIFY at:** <https://docs.convex.dev/production/monitoring>

### Convex Dashboard Features

2. **Merged Binary Generation** (`ci/ci-compile.py`)
   - `--merged-bin` flag creates single flash image
   - Dynamic pricing based on inventory
   - API endpoint reference
   - Creates GitHub release

### Environment Variable Management

**Why Use Components Instead of npm Packages?**

| Feature | npm Package | Convex Component |
| --------- | ------------- | ------------------ |
| State Persistence | In-memory (lost on restart) | Database-backed (persistent) |
| Overlay Network | AWS Cloud Map / Service Connect |
| 420 | `tx_params['gasPrice'] = current_gas_price` | Override transaction with current network price |
| Risk Fraud Detector | 4/hour | 96 | 3,000 | $1.20 |
| Liquidity | Static | Dynamic optimization |
| Match Quality | 70-80% | 90-95% |
| Settled | 1 | 25% |
| Fraud Detection | Manual review | Real-time AI |
| Suggestion | Metadata enrichment; relationship discoveries; unreferenced stale table | Queued only if budget remaining > 5 |
| Catalog backbone | Build from scratch vs OpenMetadata vs DataHub | Hybrid with OpenMetadata | Use OM for catalog/lineage/change detection; build custom agent+review layer |
