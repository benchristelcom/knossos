# CLAUDE.md

Add to the host's instructions. Do not add unsolicited information, analysis, or suggestions unless explicitly asked to do so. Let a human review of work in this repository.

## Local workflow
forge create src/AuctionEscrow.sol:AuctionEscrow \
  --legacy
```

### Configuration Validation
```typescript
// Options format for form-select
$router.push({ name: 'admin.deposit.list' })

// With parameters
$router.push({ name: 'admin.deposit.list' })

// With parameters
$router.push({ 
    name: 'admin.management.admin.edit', 
    permissions: ['Manage settlement'], 
    notification: 'pending_settlement'
},
```

**First-Level Guidelines:**
- **Parent requires** FontAwesome icon
- **Test modal chaining** functionality if nested modals are needed

## Common Recipes

### Arc Testnet Documentation
- **Empty Task Messages**: Ensure task messages contain actual text content
- **Entry**: `src/index.ts`
- **Lock files**: `uv.lock` should be committed to ensure reproducible dependency versions across all documentation

### Vector Database Specific
- Spread: $100 (1.0%)

**USDC Market**:
- Best Bid: $30
- Test agent interactions in `/agents-manage-ui/src/app/`
- Robots: `/Users/drew/.cache/huggingface/lerobot/calibration/teleoperators/so101_leader/`
- Fingerprinting: file content hashes + config settings
- Testing: 5 minutes
- ‚úÖ Use `Category::loadAllFromCache()` instead of `Category::all()` for reference data
- ‚úÖ Integrates with AWS ecosystem (Secrets Manager, CloudWatch, etc.)
- ‚ö†Ô∏è No built-in overlay network (use host networking + Traefik/Service Connect)
- Address 41: `Acceleration` (acceleration rate)
- Decision (Approve/Reject)
- Approval decision
- Place tests when changing functionality
- Merchant address: `0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266`
- Track per-model usage (calls, input/output tokens)
- 500 matches/day (40% increase)
- $5 fee per match
- **TypeScript First**: All packages are written in TypeScript with transparency for version management
- **Network effects**: Quality attracts quality

**Location**: `services/agents/settlement_agent.py`
**Location**: Lines 1042-1066

**Result**: The x402 payment demo now works correctly on Arc testnet with proper user feedback and fraud prevention

**Phase 3 (Integration)** - TODO:
- [ ] UI loads without errors
- [ ] Dependency cycles are configurable per project

---

## ‚úÖ **Validation Checklist**

### Mode 1: **Pure Algorithmic** (No AI)
```javascript
// Inventory Management Module:
// ü§î Think: Data, trends, graphs, insights, measurement
// Install - Choose based on runtime
export GMAIL_CREDS="your-gmail-creds"     # for Gmail agents
```

### Template Management
```bash
./gradlew verifyPlugin
```

### Development Commands

```text
class IntentCoordinator:
    st.text("IntentRegistry: Not deployed")

# (Similar for AuctionEscrow and Router)
```

**Task: "Search for content in files"**

```bash
2. **Dashboard Pages** - Use specific dashboard endpoints
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ style.css
import { defineApp } from "taglib-wasm";

// Automatically handles compiled vs development mode
export const addDocument = action({
  wasmUrl: "https://cdn.jsdelivr.net/npm/taglib-wasm@latest/dist/taglib.wasm",
});

// Your application logic
python examples/autogen_example.py --server.port 8502 &
```

---

## Next Steps

### 3. Test Timeout Scenario
- Trigger: Price < $9,500
- ‚úÖ Defaults to Arc testnet explorer
- Payment verification via router
- Full AP2 integration
- Best Ask: $31
- Off-chain anchoring through PaymentRouter
- Configurable scope and branch name should match (e.g., `pull-instrument` matches `feat/pull-instrument`)
- Avoid Noise Words such as Info, Data, Variable, Object, Manager, ... They might sound cool, but lead nowhere.

---

## Task Management (File-Based, Auditable)

Configurations use dataclass-wizard for type-safe YAML parsing with union discrimination.

### 3. GitHub Container Registry

Additional formats supported by TagLib but less commonly used:

- **Scaling**: Optimizing verification for large skill graphs
- **Edit Links**: Direct GitHub edit links for all developers
- **Competitive Moat**: AI decisions create training data
- **Monitoring Setup**: Track agent performance and number fields
- **Database Indexes**: Performance optimization for semantically appropriate icons
- **Address**: `0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82`
- **Data lists**: `/api/companies`, `/api/config`
- **Payment Demo Guide**: `PAYMENT_DEMO_GUIDE.md`
- **Dev**: `pnpm dev` (root) or `pnpm lint:fix` (Biome fix)
- **All tests passed**: 6/6 (100%)

---

## Security Validation

5. **What's your preferred work communication style?**

---

# Common Next Steps

VTS (Vector Transport Service) is an open-source tool for easy verification and next steps
5. Plan settlements
‚îÇ     ‚Üì                                                    ‚îÇ
import { isDenoCompiled, TagLib } from "jsr:@charlesw/taglib-wasm";

// CommonJS (older Node.js projects)
RatingUtils.POPM_STAR_VALUES; // [0, 1, 64, 128, 196, 255]
```

### Testing
```bash
$ python3 test_intent_submission.py

============================================================
  ‚úÖ ALL TESTS PASSED!
============================================================
```

### Verification

**Best for:** Predefined, repeatable processes

üîç Verifying intent in database...
   ‚úÖ Intent found in database!
   Actor: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
   flutter doctor             # Check Flutter installation
   ‚îî‚îÄ> Method: create_payment_transaction()

5. [Payer] Sign and broadcast transaction on-chain and can be extended with additional features simultaneously without running out of memory:

### Runtime Detection Pattern

```typescript
const taglib = await TagLib.initialize();
const users = await ctx.db
  .query("tasks")
  .withIndex("by_user", (q) => q.eq("userId", "user_123"))
  .collect();
```

**‚úÖ Use indexes explicitly:**

```typescript
make

# Run Streamlit app
gt completion fish > ~/.config/fish/completions/gt.fish
```

## Architecture Overview

### Files to Explore

- **Iteration 0**: Agent relies on direct tool calls (81.2% tool actions, 18.8% direct)
- **Payments**: `payments`, adapters for ECPay, EZPay, Amego, Bank Pro.
- **No advertising** SDKs are used.

## PowerShell

Ensure these are in your deployment! üéâ
goal_acc = {motor: 600 for motor in goal_pos}       # Smoothness
AUCTION_ESCROW_ADDRESS=0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
```

---

## Quick Reference: CLI Commands

```bash
# Edit config/.env with your API keys

# Or use direnv
4. Update existing task priorities (`task_order`)
4. Deploy

### Building and Installation
```bash
# Get chain ID for load testing
import asyncio
PAYMENT_PRIVATE_KEY = "0x123abc..."

# ‚úÖ GOOD - Use environment variables
‚îÇ   ‚îî‚îÄ‚îÄ category/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ Error Handling  # error-handler.h/cpp - Rules and state management
5. **Evidence Generation**: JSON audit trace with balloons! üéà
‚úÖ **Backend Services** - All import successfully
‚îú‚îÄ‚îÄ restclient/        # External API integration examples
curl http://localhost:8080/api/v1/products/1 \
     -H "Content-Type: application/json" \
     -d '{
       "name": "New Product",
       "quantity": 20,
       "description": "A new product",
       "quantity": 10,
       "sku": "UPD-123456",
       "price": 149.99,
       "description": "Updated description",
       "contactEmail": "updated@example.com"
     }'

# Update product
‚îÇ     ‚Üì                                                    ‚îÇ
‚îÇ                                           ‚îÇ   - /respond (return resp)  ‚îÇ   ‚îÇ
await coordinator.start()
```

**Benefit**: If transaction is pending, user can click "Check Status" to refresh and see if it's been confirmed.

---

## üìä Project Statistics

- **IntentRegistry**: Standalone contract (no dependencies)
- **Merchant**: `0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266` (Anvil account #0)

6. **Update Wei Conversion**: Lines 334, 470, 477-478
   ```python
   # Change label from "ETH" to "USDC"
   git tag v0.2.1
   ```

2. **PaymentRouter**:
   ```
   https://testnet.arcscan.app/address/0x0DCd1Bf9A1b36cE34237eEaFef220932846BCD82
   ```

2. **PaymentRouter**:
   ```
   https://testnet.arcscan.app/address/0x0B306BF915C4d645ff596e518fAf3F9669b97016
   ```

### Service Health Check

```typescript
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ top-readers.md
‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ public
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ buttons.hbs
rg -c "pattern"                 # Show line numbers 
fd -e md -x ls -la {}           # Example with ls 

# jq - JSON processing 
jq. data.json                   # Pretty-print 
fd -e md -x ls -la {}           # Example with ls 

# fd - file finding 
jq -r .name file.json           # Extract field 
rg --files                      # List files (respects ‚Ä¢gitignore)
CCREMOTE_MAX_RETRIES=3                         # Error retry limit
streamlit cache clear

# 4. Run integration tests
sequenceDiagram
    if ($request->filled('id')) {
        $data['model'] = Model::find($request->get('id'));
    }
    
    // Load related data
    $data['countries'] = Country::all();
    $data['categories'] = Category::all();
    $data['categories'] = Category::all();
    $data['statuses'] = YourModel::getStatusLists();
    
    return makeResponse(true, null, $data);
}
```

**Route Naming**: 
- Paths: `/{prefix}/{module}/{action}` using snake_case
- Accept different tokens (USDC, DAI, etc.)
- Auto-loaded via Grafana provisioning system

## Development Commands

### 3. Better Error Handling ‚ö†Ô∏è
- Total row count

**Write Conflict Error:**

1. Redeploy code: `npx convex deploy --prod`
7. **GitHub Release**: Creates release with changelog and artifacts

### Technical Metrics
- Follow existing components and share the results with the user-facing messages
- After: 4.407744 USDC
- Timeout-based QEMU runs firmware and executes Arduino sketches
- Attempted to create payment for 100.0 ETH (below 0.001 minimum)
- LiteLLM (multi-provider)
- Perplexity (online models)
- Correctly raised `ValueError`
- TypeScript configs: `tsconfig.json`, `tsconfig.base.node.json`, `tsconfig.base.web.json`, `tsconfig.base.web.json` (Node resolution, decorators enabled).
- Use HTTPS for state management
- Follow Clean Architecture principles with clear layer separation.
- Use package aliases in "pending" state on explorer

### 1. Test Intent Matching
- Pydantic - Type safety & validation
- Load testing (10,000 intents)

**Changes from Original Plan**:
1. `get_market_price` - Fetch current market price
st_autorefresh()
```

### Conditional Routing

```typescript
// Direct access
2. Update `AuthenticationManager` to register provider
const taglib = await TagLib.initialize({
  args: { userId: v.id("tasks") },
  handler: async (ctx, args) => {
    await myAgent.addMessage(ctx, args.threadId);
  },
});
```

**Limited Observability:**

- Cloudflare Pages handles frontend domains automatically
- ‚úÖ State management functional
- ‚úÖ Base classes accessible
- The dev server runs both the FastAPI backend (port 8000) and React frontend (Vite dev server) with hot reload
- Merchant verifies payer identity

Legacy/Compatibility:
1. Click "Secrets" (üîí icon)
import { TagLib } from "taglib-wasm/simple";
import { api } from "./_generated/api";

// Deno (NPM)
5. ‚¨ú Test full multi-agent flow (2 hours)

### Agent Decomposition: 3 Agents, Not 7

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#recommendation)

The initial design proposed 7 specialized agents (Schema Drift Detector, Naming Convention Auditor, Staleness Monitor, Metadata Enricher, Relationship Discoverer, Permission Auditor, Data Quality Scanner). The research consistently shows **each agent executing in real-time** with visual feedback at each stage:

### 1. **Simple API** (`taglib-wasm/simple`)

- **Best for**: Quick reads, one-off operations, cover art handling, batch processing
- **Total**: $2,180/month

**Foundation** (100%)
- [x] All agents imported successfully
- [x] AI calls <200/day
- [Google Cloud Storage Adapter](https://www.npmjs.com/package/@rytass/file-converter-adapter-image-watermark): Add watermarks to images with positioning options
- [x] No surprise bills

### Release Commands

```mermaid
2. Queries blockchain for consistent presentation
const sendMessage = useMutation(api.agents.streamChat);

const onSubmitForm = async (file: File) => {
  // 1. Get upload URL
  errors: Array<{ path: string; updates: Partial<Tag> }> = [];
  const QUEUE_SIZE = 100;

  let totalFiles = 0;
  const filesWithSoundCheck =
    result.files.filter((f) => f.dynamics?.replayGainTrackGain).length;

  for await (const batch of processAudioStream(directory)) {
    console.log(`Duplicate found: ${duplicate.key}`);
    for (const file of duplicate.files) {
      yield { key, files };
    }
  }
}

// Usage
‚îú‚îÄ‚îÄ _internal/         # Internal functions (not exposed)
5. Deploy contracts to target systems

### Phase 4: Verification
- [ ] Verified authentication provider integration (Clerk / Convex Auth / Custom)
```

### What Existing Tools Can't Do

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#what-gets-cut)

-   Permission Auditor and Quality Scanner (add after v0.1 feedback)
-   Overprivileged sharing (policy joins with access patterns)

**Key Changes**:
1. Add Prometheus metrics
2. Rate limiting and delivery
2. `filter_compatible_intents` - Filter by type and artifacts

### Reliability
- [x] Configuration defaults to USDC payments
- [x] Backward compatibility maintained

### 4. Seamless User Experience ‚ú®
- Verify auction escrow logic
- ‚úÖ Tool use ‚Üí Gemini, Default ‚Üí Claude

---

### Actions (External API Calls)

**Setup via Dashboard:**

When retries exceed threshold (high contention), you'll see:

```typescript
test_agentic_system.py

# Or run complete workflow
cuti agent

# Gas Configuration
5. Update all documentation with new parameters

---

## Interactive Payment Flow

1. Make changes to call external functions as part of their reasoning process.

**Fine-Grained Control**: Skills can be inspected, disabled, or rolled back individually without retraining the entire model.

**Current Version: 0.10.0-pre.1 "Lighting Effects Development"**  
**Technology Stack: SFML 3.0.1, CMake, C++17**  
**Code Quality: A+ Grade (97/100) - Professional implementation with latest state management fixes**

## Build Commands

### Default Behavior

2. **Market Intelligence**
   - User submits intent via UI/SDK
   - Quantity: Any number
   - Intent Registry with minimal footprint
   - Results display
   - Payment not received ‚Üí Abort settlement
   - [existing error handling...]
```

**What it does**:
- Excellent reasoning capabilities
- available_intents: List[IntentData]
- Type: [bid/ask]
- risk_assessment: Dict
- ‚úÖ 2 LLM clients (Claude + Gemini)
- ‚ùå Forget to index `related_key` columns for performance (`$table->uuid('related_key')->nullable()->index()`)
- Updated .gitignore for temporary files and build artifacts

## Email Generation Feature

- **CDN Loading**: Smallest binary, uses streaming compilation, requires network
  const tasks = useQuery(api.tasks.create, { text: "Bob's task" });
  await asBob.mutation(api.tasks.list);

  // Keep best quality, mark others for removal
  3. TodoWrite is ONLY for personal, secondary tracking AFTER Archon setup
  2. Scanning deploy.sh output for "Error installing requirements" messages
  4. If different, applies JSON merge patch to update `pull-secret` secret
  3. Use Archon task management as PRIMARY system
  ‚îÇ   risk_agent
  track: tag.artist, // string
  Status: Success
  maxFiles?: number; // Max files to process
  SELECT * FROM read_csv_auto('battles.csv',
    icon: 'fa-boxes-stacked',       // FontAwesome icon required
    const audioBuffer = await ctx.db.insert("items", { name: args.data.name });

    if (existingMessages !== undefined) {
      // Component writes rollback, but parent continues
      if (isUnrecoverableError(error)) {
        if (isCompatibleProperty(key, sourceExt, targetExt)) {
          targetPropMap.set(mapPropertyName(key, sourceExt, targetExt), values);
        }
      }

      targetFile.save();
      const sourcePropMap = sourceFile.propertyMap();

      // Apply basic tags
      args:
        - -y
        - '@gongrzhe/server-gmail-autoauth-mcp'
```

## GitHub Actions Workflows

You can customize:
- Is this primarily a backend, frontend, or full-stack task?
- What specific technologies are in `src/components/homepage/`
- Use SVG format for function calling
- Current branch: `feature-disable-loki` - demonstrates disabling Loki stack
- React Hooks (Function, File, Folder)

### Running the Operator
- `get_inventory(asset)` - Get bid-ask spread
- `verify_payment(payment_id)` - Confirm payment
- `VERBOSE=-count=1 make test` - Run in development mode
- `README.md`, `prd.txt`: Product requirements
- `config/.env` - Updated with live Arc testnet settings

**Files Modified**:
- `services/payment/x402_service.py` - Prompts and logs updated

**Solution**: Restart Streamlit
```vue
<template>
    <!-- ‚úÖ ALWAYS specify folder prop -->
    <form-editor
        42161: "https://polygonscan.com",           # Polygon
        42161: "https://polygonscan.com",           # Polygon
        self.notify_subscribers(report)

    st.info("Transaction has been broadcast to the network.")
    if explorer_url != "#":
        st.markdown(f"### [üîç View Transaction Status on Explorer ‚Üó]({explorer_url})")

    # ‚úÖ Add button to recheck status
    pass
```

### Backup Database
```bash
# Docs: https://developers.cloudflare.com/workers/wrangler/commands/#dev
# Set custom agent command
3. **Update chain ID** - Set correct chain ID for Django Cast. The goal is to inform dependent values like the codebase. Never make any claims about code before proceeding. State what part of the original report.

### Back-Pressure: Review Budgets with Live Workloads

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#cost-at-scale)

```
STEWARDSHIP_MODE=api        # Proposal Board REST API (K8s Deployment, always-on)
npx convex deploy --prod
# - Useful for full database migrations

# Frontend environment variable (accessible in browser)
# Metrics available in CloudWatch automatically
```

---

## Quick Reference

### Real-Time Monitoring

- **Arc Testnet Explorer**: https://testnet.arcscan.app
- **form-date-picker.vue** - Text input with improvement tracking
- **RPC**: https://faucet.circle.com
- **Memory efficient** batch processing
- **JSR**: JavaScript Registry - Deno's package registry
- **Error Detection Strategy**: Since programmatic log access requires auth, use deployment output and suspicious activity flagging
- **Production-Ready Configuration**: Comprehensive application.yml with logging and deploying AI agents
- **Error Handling**: Use try/catch blocks, provide meaningful error messages/fallbacks
- **Automatic updates**: Types regenerate when schema or functions change
- **Single source of truth**: `version.txt` contains current version
- **Company Banks**: Banking institutions for processing
- **Audit Coverage**: 27 tests passing (100%)
  - IntentRegistry: 8 tests PASS
  - Fallback handling

**Payer (Customer)**:
- 1,000 intents/day
- Spread calculation and optimization
- ‚úÖ Mock service for efficiency

**The dashboard is ready for demonstration and testing!** üöÄ

---

**Total Estimated Development Time**: 16 weeks
**Objective**: Ensure reliable, repeatable local QEMU testing

- [ ] **TASK-023**: Build notification management UI
  - Add README in `ci/docker/` if needed

## Best Practices

Use available tools to:
uv run pre-commit install
```

### Slack Notifications

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#5-scale-cliff)

Multi-tenant scientific data tasks --order desc
# - Creates separate dev with hot reload
# - Uses .dev.vars for local secrets
# - Exports all tables

3. **Client Interfaces** ‚úÖ
   - qemu_esp32_docker.py:480-485: Added --merged-bin and -o flag pass-through to Docker compilation
   - BlinkParallel reaches setup completion
   - Path conversion problems
   - Streamlit UI for as.exe on Windows

5. **Settlement Agent** = Payment receiver (merchant)
1. **Reproduce** reliably (test, script, or minimal steps).
2. **Define Success**
   - Foundation for NL intent parsing
   - Page walkthroughs
   - AP2 Mandate ID: Generated or custom
   - Comprehensive testing

---

## üéØ **Recommended Next Steps**

### 4. Usage Analytics Dashboard

**Features**:
- Agents propose actions
- Difficult to debug and view transaction in "pending" state on explorer

### Backend build_form Endpoint Pattern
```bash
# In config/.env
