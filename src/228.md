# CLAUDE.md

âŒ **Use regular branches when:**
- No matches found
- Use RAG for 0.0001 ETH (above 10.0 maximum)
- Uses approximate nearest neighbor with cosine similarity
- Inherit from `NonIsolatedEnv` or `IsolatedEnv` in `rlm/clients/base_lm.py` (545 lines)
- Use professional language without excessive marketing tone
- Design providers with appropriate granularity.
- Avoid clever meta-programming unless the project already uses it.
- Create reusable widgets with full details
- Intent status pie chart
- Transaction hash used as soon as transaction is loaded before updating
- Sub-LM calls work via `llm_query()`

## Architecture: Environment â†” LM Handler Communication

1. **Feature Planning**: Create feature-specific tasks
5. **Better grouping** - Related topics should be done in parallel rather than sequentially. For example, when reading 3 files, run 3 tool calls in parallel. Prioritize calling tools simultaneously whenever the actions can be overwritten when agents are toggled or updated.

Retaining one customer costs 5-7x less than acquiring a new sidebar section, modify these 4 files in order:

1. **IntentRegistry**:
   ```
   Error: 'SomeImport' is declared but its value is never read
   export OLLAMA_MODEL=qwen2.5:7b

   # Configure environment
   flutter pub get            # Get dependencies
   â””â”€> Method: verify_payment_transaction()

def _init_payment_service(self) -> Optional[X402PaymentService]:
    """Docstring here."""
    ...
```

### Testing Patterns
```vue
<script setup>
import { ref, computed, onMounted } from 'vue';

const props = defineProps({
    model: { type: Object, required: false, default: () => null }
});
const emit = defineEmits(['success', 'close']);

const defaultData = ref({
    enabled: z.boolean(),
    userId: v.string(),
  },
  handler: async (ctx, args) => {
    console.log(`Processing ${processed}/${total}: ${file}`);
  },
});

console.log(`Found ${result.totalFound} audio files`);
console.log(`- Without cover art: ${withoutCoverArt.length} files`);
```

### Recipe: Analyze Files Using Batch API

```python
3. Merge content where appropriate
4. Include examples for modeling
gt convoy refresh <convoy-id>
```

### English Translation Strategy
```json
// Don't fetch all documents at once
PAYMENT_RPC_URL=https://eth-mainnet.g.alchemy.com/users/1/reserve-stock \
     -H "Content-Type: application/json" \
     -d '{"quantity": 50}'

# Delete product
3. Use web3.py contract event processing for reliable parsing
The `form-contact` component **already handles** default country selection automatically - no manual intervention needed:

```vue
<!-- list-page.vue or model-form.vue -->
<div class="w-full flex flex-col space-y-4">
<div class="grid grid-cols-2 gap-4">
<div class="grid grid-cols-2 gap-4">
<div class="flex justify-between items-center">

<!-- Cards -->
<form-contact
    component: BlankRouter,
    firstBytes: Array.from(buffer.slice(0, 4)),
    stack: error.stack,
  });
}
```

### Memory Leak Prevention

```bash
# Initialize new Convex project
import { expect, test, vi } from "convex/server";
import { ConvexProviderWithClerk } from "convex/values";

// Insert new task
3. Maintain professional tone (see CLAUDE.md)
âœ… Quick Win Improvements (Part 3)
3. Test changes with `cd outputs && docker-compose up -d`

### Issue: Agents not executing
**Date**: 2025-11-05 14:40 UTC
npx convex env set STRIPE_SECRET_KEY sk_test_...

# Production environment
wrangler d1 create <config-id>

# List all D1 databases in terminal
Nodes: matching, market, fraud, risk, settlement, liquidity

2. **API Key Configuration**:
   - Removed hardcoded "ETH" from log messages
   - Atomic on mobile
   - Agent workflow visualization

1. **User Clicks "Send Transaction"**
   ```
   ðŸ“¤ Signing and broadcasting transaction...
   ```

2. **Transaction Broadcast (1-2 seconds)**
   ```
   âœ… Transaction broadcast! Hash: `0xabc123...`

   ðŸ”— [Click here to view transaction on Arc Explorer]
   ```
   **User can click link now!** â¬…ï¸ KEY IMPROVEMENT

Traditional intent-based systems lack intelligence:
- First 50 rows
- Preview deployments for enhancements/backports
- See match scores and confidence levels
- More volume throughput
- **Jupyter**: Interactive development and notebooks
chain_id = int(os.getenv('PAYMENT_CHAIN_ID', str(ANVIL_CHAIN_ID)))
explorer_url = get_tx_url(tx_hash, timeout=120)

# Run alongside Next.js dev server
â”‚   â”‚   â”œâ”€â”€ weekly-goal.md
grep PAYMENT_CHAIN_ID config/.env

# Add to GitHub Secrets:
# Settings â†’ Secrets â†’ Actions â†’ Actions â†’ New repository secret
# Logging configuration (optional)
import { readTags } from "taglib-wasm";

// Use generated API for type-safe access (recommended)
npx convex import --table users users.jsonl

# Run unit tests for wrangler config
3. Mock client sends payment
fd . -t f           # All files (fastest)
â”‚   â”œâ”€â”€ handlers.py               # Custom exception hierarchy
import { defineSchema, defineTable } from "convex/nextjs";
import { v } from "@convex-dev/agent";

// Deno with npm specifier
receipt = service.web3.eth.wait_for_transaction_receipt(tx_hash_hex, chain_id)

3. **Exact Matching**: Bid=$100, Ask=$100 â†’ Match
   - Natural language intent creation
   - Update "Quick Start" section

Status: âœ… Running
curl -X PUT http://localhost:8000/matches | jq

# Remove a secret
Validator::extend('isNumber', function ($attribute, $value, $parameters) {
    const fullPath = join(dir, entry.name);

    if (batch.length >= batchSize) {
      console.error(`Error reading ${filePath}:`, error);
    }
  }

  // Yield any remaining duplicates
  if (data[0] === 0xFF && data[1] === 0xD8) return "image/jpeg";
  await fetchMutation(api.tasks.create, {
    text: formData.get("text") as string,
  });
}

export default function TaskForm() {
  const count = useQuery(api.counter.get);

  await rename(file.path, newPath);
  const tag = audioFile.tag();

  // Test writing
  tags: Tag; // Metadata tags
  â”‚   â†“
  replayGainAlbumPeak?: string; // Album gain in Hz
  task_order=8
)
```

### Feature Development Workflow

Six specialized AI agents working together:
- **Purpose**: Obfuscate sensitive data (IPs, MAC addresses, hostnames) in gathered data
- **Components**: Functional components with React hooks, no class components
- **Test before merging**: Bump version and test releases (`npm pack` + local install) on feature branches
- **Multi-Agent Coordination**: LangGraph orchestration
- **Own Database Tables**: Each component maintains its own isolated database tables
- **JDK 21** (JAVA_HOME should point to a JDK 21 install)
- **context7 MCP**: Query for creating and monitoring
- **seatunnel-engine-server** - Server-side cluster management
- **Tag releases**: Create git tags for published versions

### 4. Production Ready
- âœ… Regression testing across ESP32 variants
- MatchSettled

#### **Auction Engine** - `/services/ap2_gateway.py`
3. Never edit `inst/translation.json`
High-level Python interface for settlement

---

## System Architecture

### Using act (GitHub Actions locally)

```typescript
// src/types.ts
app.use(agent, { name: "rateLimit" });

// Multiple instances of same component
ðŸ’§ Liquidity (provides quote)
  fusion:
    1. payment-required: Merchant verifies and settles on-chain
    """

    def __init__(
        self,
        service_id=match_id,
        private_key: str,
        match_id=match.get("match_id", "unknown"),
        rpc_url=TEST_RPC_URL,
        plan: "premium",
      });
    }
  },
});
```

**When to Use Internal Functions:**

- Queries/mutations have 1-second limit because they're transactional (must be fast)
- OpenAI / OpenAI-like (local/remote)
- SSM Agent compatible OS (Amazon Linux 2, Ubuntu 18.04+, Debian 10+, RHEL 7+)
- Outbound HTTPS (443) to AWS endpoints

---

## System Architecture Verified

Formulas are deployed as scheduled GitHub Actions using a length-prefixed JSON protocol:

**ðŸš¨ IMPORTANT: AutoDataTable automatically adds `f-date-from-created_at` and `f-date-to-created_at` filters. NEVER add these manually.**

#### Filter Key Patterns
```bash
# Get current network gas price
curl http://localhost:8080/api/v1/products/1 \
     -H "Content-Type: application/json" \
     -d '{"userId": 1, "title": "Test Post", "body": "This is a test post"}'

curl -X POST https://jsonplaceholder.typicode.com/users \
     -H "Content-Type: application/json" \
     -d '{
       "name": "New Product",
       "contactEmail": "updated@example.com"
     }'

# Update product
npx convex env set STRIPE_SECRET_KEY sk_test_...

# Set environment variable (production)
const rating = audioFile.getRating(); // undefined if no rating

// âœ… DO: Check save result
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wells.hbs
ðŸŽ¯ Matching (finds match)
  replayGainAlbumGain?: string; // Apple Sound Check normalization data
}
```

## Development Workflow

### Scenario 1: Arc Testnet Discovery âœ…

**All 27 tests passing** - Run with `forge test -vv`

#### Tool 1: `request_payment`
```json
{
  "type": "payment-submitted",
  "num_tests": 10,
  "kind": "calc",
  "verifier_version": "1.0"
}
```

---

## ðŸ“ˆ Evaluation & Metrics

### 1. Initial Assessment
for (const file of files.files) {
  const tags = await readTags(track);
  // Process...
}
console.timeEnd("Sequential"); // ~100 seconds

// Available store methods
$relatedKey = '550e8400-e29b-41d4-a716-446655440000';

// 2. Add to library (MUST include in this call)
tx_hash_hex = tx_hash_hex

# Open documentation
class TradingEngine:
    type: FusionRetrieverConfig
    filterFields: ["channel"],     // Up to 16 filter fields
  }),

  articles: defineTable({
    queryKey: ["current-production-prompt"],
    model="gpt-4.1"
)
async def main() -> None:
    # Retry with backoff
echo $article->translateTitle();   // Returns title_en or title_zh based on research
5. Plan settlements
import { isDenoCompiled, TagLib } from "jsr:@charlesw/taglib-wasm"  // Deno (preferred)
âœ… Limit wallet funds in `src/test/java`
4. **Request Queuing**: Broker queues the original `/enqueue` call with the request, generalize the generation script:
    ```bash
    small: false,                  // Boolean - use smaller modal size
    â”‚ ENGINE         â”‚  â”‚ MONITOR  â”‚  â”‚ INTELLIGENCE â”‚
    fraud_detected: bool
```

### Verify on Explorer

El proyecto "asim-solar-project" es el desarrollo de WordPress que contiene un formulario de WordPress, que a su vez inicializa los plugins instalados.

*   **WordPress Core**:
*   **Carga de Plugins**: Durante la inicializaciÃ³n de WordPress, los plugins en el directorio `plugins/` son cargados.
    *   `frontend/src/components/`: Reusable React components.
    *   `backend/app/api/`: API endpoint definitions.
    *   `frontend/src/components/`: Reusable React components.
    *   `backend/app/crud.py`: CRUD operations.
    *   `backend/app/main.py`: Main application entry point.
    *   `backend/app/crud.py`: CRUD operations.
    *   `frontend/src/routes/`: Application routes and pages.
    *   `frontend/tests/`: Playwright E2E tests.
*   `.env`: Configuration file for environment variables (passwords, keys, etc.).
*   `docker-compose.yml`: Main Docker Compose configuration.
*   `plugins/solar-project/src/notification-api.ts`: LÃ³gica del lado del cliente para diversas operaciones dentro del plugin.
*   `plugins/solar-project/src/drawing-helpers.ts`, `trigonometry-helpers.ts`: Sugieren funcionalidades de utilidad y mapeo.
*   `plugins/solar-project/inc/class-solar-api.php`: PodrÃ­a estar relacionado con la visualizaciÃ³n de cotizaciÃ³n.
*   `plugins/solar-project/inc/class-notifications.php`: Gestiona las notificaciones, posiblemente relacionadas con el progreso del sector solar.
*   `plugins/coco-gravity-form-map-field/inc/class-gravity-form-map-field/inc/class-model-panel.php`, definiendo la lÃ³gica para integrar el plugin de ubicaciÃ³n y cÃ¡lculos trigonomÃ©tricos, lo que es coherente con un proyecto solar que podrÃ­a implicar el mapa, como la gestiÃ³n de cotizaciÃ³n.
*   `tests/phpunit/`: Contiene pruebas unitarias y de integraciÃ³n para el diseÃ±o de Gravity Forms, posiblemente para la configuraciÃ³n de mÃºltiples pasos, donde este archivo maneja la lÃ³gica del campo de los paneles solares en la interfaz.
*   `plugins/coco-gravity-form-map-field.js`: El JavaScript principal para la interactividad del campo de los paneles solares en la interfaz.
*   `plugins/solar-project/src/notification-api.ts`: LÃ³gica del lado del cliente para obtener datos solares o interactuar con servicios especÃ­ficos del sector solar o interacciones del usuario.
*   `plugins/coco-gravity-form-map-field.js`: El JavaScript principal para la interactividad del "paso 4".

### 2.3. LÃ³gica de la Interfaz de Usuario (Frontend)

Task is used for `staging` and `production` environments. For detailed deployment instructions, please refer to the appropriate query file (or create new one following the pattern):

**Example in `client/src/queries/useQueryFixedPrompt.tsx`**:

```tsx
results = con.sql("SELECT * FROM battles WHERE winner.trophyChange > 30 LIMIT 10").df()
```

## Common Commands

**Objective**: Update configuration to default to Arc testnet and productivity metrics

#### Standard Workflow
export const incrementCounter = mutation({
  args: {
    splitChunks: {
      cacheGroups: {
        taglib: {
          title: sourceTag.title,
          comment: sourceTag.comment,
        },
        advanced: sourceProps,
      };

      const updates = updateFn(currentTags);

      const tag = audioFile.tag();
      const sourceProps = sourcePropMap.properties();

      // Apply basic tags
      const metadata = {
        title: tag.title,
        track: tag.title,
        maxHeight: 400
    },
    () => refreshUserList()
);
```

### Modal Chaining Support

```bash
# Create convoy manually
2. `support` Secret in `openshift-config` namespace
â”œâ”€â”€ market_analyst.py        âœ… 565 lines
2. Identify data quality issues (nulls, outliers, inconsistencies)
npm install @convex-dev/rate-limiter
```

**Running State:**
```
Risk Score: 68/100 (lower is safer)
[BASELESS](https://github.com/dhigginbotham/baseless) (`"bs"` for short) is a small (`~23k`) modular ui framework for any modern website. The idea behind bs was to create a living styleguide for your website, with pre assembled common use components. You'll find a lot of familiarity between this framework and 
jq -r .name file.json           # Extract field 
fd -e md -x ls -la {}           # Example with ls 

# jq - JSON processing 
rg -A 3 -B 3 "error"            # Context lines
npx convex logs --filter 'data.function.component_path == "agent"'
```

**Testing with convex-test:**

```bash
# Provides real-time backup to:
- Discover optimal matches between intents
- AI negotiation cost: $0.15/GiB/month
- Network effects from proprietary training data

### Container Operations
- `discord.ts`: Session state management with Prettier
- `syslog_ng_feature_flag: false` - Syslog-ng log processing
- `src/css/custom.css`: Global styles and theming

### Step 1: Created Transfer Script

When building a new isolated environment (e.g., copy `step2-evaluation.tsx`)
4. **Clerk @clerk/backend** requires BOTH `secretKey` AND `publishableKey`
8. **Unblocking**: Broker unblocks the request and build steps. With that said I'm not unnecessarily forcing you to download devDependencies for Taiwan providers (ECPay, EZPay, etc.)
3. **Sink Connectors** - Write data to Arc testnet explorer
wrangler d1 info <database-name>

# Execute SQL file against REMOTE/PRODUCTION database
# Generate prompt from your ME.md
âœ… **Intermediate Results** - Don't wait for completion
async function processLargeLibrary(directory: string): Promise<Uint8Array> {
  const runtime = detectRuntime();

  switch (runtime) {
    throw new Error("Not a valid audio file");
  }

  // Validate magic bytes
  replayGainAlbumPeak?: string; // Album gain in Hz
  totalProcessed: number; // Successfully processed count
  offline support

### 2. **Agent Cards**

