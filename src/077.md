# CLAUDE.md

5️⃣ Execute Payment on Arc testnet. The merchant account only had 0.000648 USDC from Merchant to Payer...
Explorer: https://testnet.arcscan.app/tx/0x1c200d4e24fb35dc45abe96f20d726ddf3ce7d4e2a30fe4c4215e21da3bc5d53
curl http://localhost:8080
```

1. **Broad data dependencies (reading entire tables):**

```bash
transfer_amount = 5_000_000  # 5 USDC (6 decimals)

# ✅ Show transaction sent status with clickable link
✅ **Professional** - Production-ready demo for Insights data gathering (TechPreview):
- **Purpose**: Trigger and configure individual data gathering operations
- **600: Fast, smooth (recommended)** ✨
- No blockchain transaction yet (off-chain)

**Original Plan Said**: "Low operating cost"
**Reality**: Should use deterministic algorithms with AI enhancement

#### ✅ CORRECT - Form Page Usage
```vue
<!-- In list-page.vue -->
<auto-button type="plain">{{ $t('Cancel') }}</auto-button>
<auto-button type="success">{{ $t('Approve') }}</auto-button>

<!-- ✅ NEW PATTERN - Use this approach -->
<form-contact
    await ctx.db.patch(args.counterId, {
      userId: args.question,
      role: "user",
      content: `Write an article based on this research:\n${research.text}`,
    });
    const research = await writer.generateText(ctx, {
      threadId: args.threadId,
    });

    // 3. Generate response with context
    const usersPromises = tasks.map(doc => doc.content).join("\n\n");
    const prompt = `Context:\n${context}\n\nQuestion: ${args.question}`;

    await myAgent.addMessage(ctx, {
      threadId: writerThread,
    });

    return response;
  },
});
```

**Technical Explanation:**

- **JWT verification**: Convex automatically verifies Clerk JWT tokens
- **Financial Systems**: Trading agents that adapt to market conditions with verifiable skill validation
- **USDC token**: Arc testnet ✅

Complete multi-agent AI system is **fully operational** with **persistent test data**. The system includes:

- **Demo App**: http://localhost:8080
- **Durable execution**: Workflows persist across interruptions
- **Cluster Transfer Controller**: Handles cluster transfer operations

### ❌ **Major Issues Identified**

#### 1. **Latency Problem** (CRITICAL)
**Issue**: Financial systems need predictable behavior
- Update `PAYMENT_DEMO_GUIDE.md` with USDC setup steps
- Error handling on tool failures

### How to Enable

```python
# Docs: https://developers.cloudflare.com/workers/wrangler/commands/#login
# ============================================================================

# Stream real-time logs from deployed Worker
# Check existing Anvil
│   ├── settlement_agent.py        ✅ 565 lines
import { action } from 'zod';
import { Button } from '../ui/button';
import { useRoute, useRouter } from "@convex-dev/agent";
import { api } from "@/convex/_generated/dataModel";

// Copy WASM file for embedding
npx convex deploy --prod --project my-app-prod

# Clean restart
5. Test Streamlit dashboard UI

---

## Interactive Payment Flow

Pure functions with explicit interfaces, making capability changes inspectable, modular, and reversible.

---

## Quick Assessment

If deployment fails:
- Verification performed:
- Tool functions execute normally
- 200-400: Moderate, responsive
- **MCP Protocol**: Standardized way for agents
- **Error Detection Strategy**: Since programmatic log access requires auth, use deployment output and error handling.

## Build, Test, and Development Commands
- `GET /health` - Health check

### Transactions
```
GOOD: "I need to work on the merchant dashboard (Vue.js). Let me load frontend instructions."
BAD: "Let me load both backend and frontend instructions just in case."
```

### 4. Progressive Loading
const headers = [
    { label: '#', column: 'id' },
    { label: $i18n.t('Username'), type: 'text', name: 'f-has-like-country-name_en' },
]"

// ✅ CORRECT: DataTable loads its own data automatically
