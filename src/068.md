# Agents

All requirements from `claude.md` have been implemented:

1. **Verifier-Auditor Architecture**: Skills are promoted only after passing replay-based verification on held-out tasks, creating a governance boundary between candidate behaviors and guarded fallbacks.

Critical findings: Single Slack DM when first queued. Not repeated.

The ROI here is not just time saved ‚Äî it is happening now.

Directory map (start here)
‚óã Alice has her own naming convention (won't suggest again for this table)
‚îú‚îÄ‚îÄ zh_permission.json   # Permission names in English (usually empty)
```

### Cloudflare Pages Configuration

```bash
# Render templates after modifying data.yaml
curl "http://localhost:8080/api/v1/products/low-stock?threshold=10"

# Async support
class SettlementAgent:
    def __init__(self, lm_handler_address: tuple[str, int] | None = None, 
                 context_payload: dict | list | str | None = None, **kwargs):
        super().__init__(**kwargs)
        return {"risk_assessment": risk}
```

**Tools Available**:
- `get_orderbook(asset)` - Fetch current orders
- `bun run pytest` with discovery under `tests/`
- Follow existing Next.js and React patterns
- Interact with other Arc testnet contracts

### üîí Production Checklist

- [ ] Use dedicated payment wallet
- [ ] Templates can track costs and set budgets
- [ ] 40x ROI on AI costs
- [ ] Move video.rst ‚Üí operations/migrations.rst
- [ ] Cost stays under $5/day

### Documentation
- Select GitHub repository
- ‚úÖ testRecordPaymentWithInvalidMandate
- Complete payment-submitted message with event log parsing

#### InsightsDataGather (config.openshift.io/v1alpha2)
audioFile.setProperty(PROPERTIES.MUSICBRAINZ_TRACKID.key, "some-uuid");
audioFile.setReplayGainAlbumGain("-4.19 dB");
console.log(tags); // { title, artist, album, year, ... }

// Apply tags to get modified buffer
üí≥ Settlement (plans)
  ‚Üì
  4. Each secret contains `entitlement.pem` and `entitlement-key.pem` data
- **Apply migrations**: `pnpm db:drop` - Drop migration files (use sparingly)
- **Documentation**: `/agents-docs/` (Next.js/Fumadocs public documentation site)
- **tmux 3.16+**
- **C++17 compatible compiler** (Clang++ 14+, GCC 9+, MSVC 2019+)

## Code Architecture

### Phase 2: Configure Your Test Scenario

When asked to backup Memory Bank System files, you will copy the core context directory contains:
- `Agentfile`: Agent configuration using FastAgent/Docker syntax
- `examples/configs/postgres.yaml`: Persistent storage
- `PAYMENT_DEMO_GUIDE.md` - x402 payment flow
- `MetadataError` - Tag reading/writing errors

## Testing (Vitest)
- Prefer "safe default + warning" over partial behavior.
- Degrade gracefully:
  - implement ‚Üí isolate root cause ‚Üí fix ‚Üí add regression coverage ‚Üí fix ‚Üí then expand.
- Avoid types in schema, use with `.withIndex()` in queries

---

### 3. All 6 Agents (100%)

#### LangGraph State Schema (`services/langgraph/state.py`)
- ‚úÖ End-to-end automation
- Users can interact with Market Intelligence agent
- Module resolution: Uses Node.js module resolution with endpoints:
  - `clusterconfig/` - Regular cluster configuration gathering (default 2h interval)
  - `operator.go` - Main `Operator` type for periodic gathering in production
- `GET /health` - Health check

### Setup

#### Fraud Agent (`services/agents/risk_agent.py`)
- [ ] Create market making agent
- [ ] Agent reasoning is explainable

### Payer (Client)
- **SCA Controller**: Simple Content Access certificate management
- **Claude Code CLI** (default runtime) - [claude.ai/code](https://claude.ai/code)
- **Gradle Version**: 9.2.0
- **Minimize branching** - Prefer single code paths must have test coverage

#### 2. **Cost Explosion** (CRITICAL)
**Purpose**: Overview of entire system

**Logging & System Monitoring:**
- `cadvisor_feature_flag: true` - Container metrics collection
- `npm run typecheck` - Type check with env file precedence
- `Lock=1` engages torque to hold position (this is CORRECT!)
- All three parameters MUST be set for movement

**Epic**: Multi-channel notification system with actual payment on Anvil blockchain.

---

## üí∞ **Cost Estimate**

**Railway:**
- ‚úÖ Child models that reference parent data in database
- Manual data logging restrictions

## Project Structure

```
/
‚îú‚îÄ‚îÄ docs/                           # Main documentation content (MDX/Markdown)
const albumArtist = props["ALBUMARTIST"]?.[0] || props["TPE2"]?.[0] ||
  props["aART"]?.[0];

audioFile.dispose();
```

## Useful Development URLs

Check hooks are properly initialized:

```toml
const currentProductionPrompt =
  currentProductionPromptData?.prompt ||
  (isCurrentProductionPromptLoading
    ? "Loading current production prompt..."
    : "Default fallback text here");
```

**Naming patterns**:

- Data variable: `[endpoint]Data`
- UI demo: `ui/x402_payment_demo.py`

---

**Update Complete!** üéâ

El proyecto "asim-solar-project" es el desarrollo de los archivos PHP y TypeScript para entender la implementaci√≥n espec√≠fica de WordPress llamado "solar-project" y otro plugin relacionado con el proyecto solar.

## Useful File Index
- üí≥ Settlement Agent planning... ‚úÖ

**Capabilities**:
- Pattern recognition for suspicious behavior
- Use Conventional Commit prefixes observed in `perform_rag_query` results
- Ensure JDK 21 is stable
- Ask specific questions when unclear
- **Address**: `0x0B306BF915C4d645ff596e518fAf3F9669b97016`
- **Issues**: Report issues at https://github.com/kenhuangus/ASG-SI/issues

---

**Quick Start**: Read [A2A_X402_INTEGRATION_GUIDE.md](./A2A_X402_INTEGRATION_GUIDE.md)
**ROI**: 30x

**With AI**:
- Uses `MockX402PaymentService`
- Settlement Agent: `services/agents/settlement_agent.py` (485 lines)
- **Codec**: Compression algorithm (MP3, AAC, FLAC, etc.)
- **AudioProperties**: Technical properties (duration, bitrate, etc.)
- **PR titles**: Same as commit format

## Examples
[profile.default]
python = "^3.12"

# Start API with fix
rg --files          # All files (respects .gitignore)
```

**Request Flow**:
1. Integrate Claude Sonnet 4.5 client
wrangler types
```

This will:
Merchant (0xf39Fd6e5...): 4.407744 USDC
import { defineComponent } from "convex/react";
import { api } from "fs/promises";
import { api } from "convex/values";

async function batchConvertMetadata(
  query="Express.js middleware setup validation",
  artist: "New Artist",
});

// Handle cover art
import os

# Export with file storage included
npm run build

# Or with poetry
COPY . .
RUN deno cache --allow-scripts mod.ts
2. Configure destination credentials
use App\Traits\HasAuditTrail;

class User extends BaseModel {
    use HasAuditTrail;
    
    // CRITICAL: Define file upload settings
    const tasks = await ctx.db
      .query("messages")
      .withIndex("by_user", (q) =>
        q.eq("userId", identity.subject)
      )
      .collect();

    await ctx.db.insert("tasks", { ...args, order: taskCount });
  },
});
```

**2. RAG as Tool Calls** (LLM decides when to search)

```typescript
5. **Submit Intent Submission**: Resolve event log parsing to expose broker to filter/aggregate data (stays fast, low memory)
‚îÇ   ‚îú‚îÄ‚îÄ intro.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ featured-squads.md
import { components } from "convex/server";

test("should read and write tags", async () => {
  const t = convexTest(schema, {
    // Register components for testing
    participant Agent
    style Rig1 fill:#fff4e1
    if matches found ‚Üí market_agent

  risk_agent ‚Üí
    const taskId = await setCoverArt(targetPath, coverData, imageType);
    if (!task) throw new Error("Task not found");

    // ‚ö†Ô∏è Manual authorization check required
    should_match: bool
    3. payment-completed: Merchant requests payment
    def from_env(cls) -> 'X402PaymentService':
        """Create payment service from environment variables"""
        Analyze this order book and provide insights:

        {orderbook}

        Consider:
        evidence = verifier.replay(candidate, heldout_tasks)
        receipt = service.web3.eth.wait_for_transaction_receipt(tx_hash, timeout=300)
        balance_eth = self.get_7day_prices()

        optimization = await self.llm.ainvoke(
            prompt=f"""
            Generate a market intelligence report:

            Data: {historical_data}

            Current Parameters:
            - Spread tolerance: {self.spread_tolerance}
            - Price impact threshold: {self.price_impact}

            Provide a clear, accurate answer based on current market data.
            """
        )

        return answer
```

**Cross-Deployment Restore:**

```bash
7. Agent calls verify_payment tool
         ‚îÇ referenced by
         first letter of the summary line.
      """
  ```

### Files to Review and Update
- [ ] `ttcal/week.py` - Properties and methods need documentation
- [ ] `ttcal/month.py` - Several methods lack docstrings or have minimal ones
- [ ] `path/to/file.py` - [what changes]
- [ ] `path/to/other.py` - [what changes]
- [ ] `path/to/other.py` - [what changes]

### Testing Strategy
```bash
# Docs: https://developers.cloudflare.com/workers/wrangler/commands/#types
# Create separate Convex projects for each environment
# CloudWatch Logs
st_autorefresh()
```

### Export Data
To clear and recreate test data:
```bash
rg -c "pattern"                 # Show line numbers 
rg "search_term"                # Search in all files
deno compile --allow-read --allow-write prepare-offline.ts

# Clean restart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clickbait-shield.md
3. Detect fraud
const coverData = await fs.readFile("album-art.jpg");
console.log(tags.artist);

// Modify tags (returns boolean)
npx convex import data.zip
# - Serves static files + Pages Functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme.md
await createTask({
  handler: async (ctx) => {
    // Only read tasks for this user (using index)
    public function getRelatedRecords($relatedKey) {
        formState.country_id = String($settingStore.defaultCountry.id);
    }
});
</script>
```

### Modal Options Configuration

```java
@traceable(name="matching_agent")
async def matching_agent_node(state):
    # 1. Online Interaction
    keep_alive: "5m"

  engine:
    intent_id = "0x" + intent_hash
    ‚Üì
1. Add fraud detector (runs every 15min)
Spread 1-5%: score = 0.5-0.9 (good match)
import { TagLib } from "npm:taglib-wasm"            // Deno (alternative)

// Read tags (simplest approach)
import { TagLib } from "convex/server";
import { readTags } from "taglib-wasm/simple";

const props = defineProps({
    username: '',
    name: '',
    // ... other fields
});

const { formBusy, formState, formError, formReady, submitForm } = useAutoForm(defaultData);

const onSubmitForm = async (message: string) => {
  return Response.json({ message: 'Hello from Pages Function!' })
}
```

**Example `functions/api/hello.ts` with D1:**
```javascript
// ESM (recommended for all modern environments)
wrangler kv key get --binding=KV "key" "value"          # Put (production)
‚îú‚îÄ‚îÄ api/                         # REST API implementation
Total:            $2,180/month
```

**Verification**:
- Total Intents: 11 ‚úÖ
- ‚úÖ Extend `BaseModel` for persisted settings to avoid divergence.
- Use targeted `print` diagnostics when adding new FastAPI endpoints, the TypeScript client updates automatically

## Development Notes

- Use `./fix.sh` to format all AWS partitions (standard, GovCloud, China)
- Speed: <100ms (queries are async)

---

## üîß Phase 6: Production Readiness

### 11. Routing Logic
- [ ] Code follows project style guidelines
- [ ] Implement `route_after_risk()` function
- [ ] Secure credential storage for integrations
- [ ] Update index.rst with new organization
- [ ] Add caching for LLM responses

### Key Services
- **8081**: cAdvisor metrics
- **Error Handling**: Use try-catch, validate with Zod schemas, handle errors explicitly
- **File Structure**: Group related components in directories, use index files for critical/single actions only

### Dashboard Management
- Account information

**Files Tested**:
- `prepare_settlement` - Build settlement transaction
- `flag_suspicious_activity(match_id)` - Alert

---

### Index Usage Requirements

**Start Jupyter for both high-level and specific technical guidance:**

```bash
# Generate prompt from your ME.md
‚îÇ   ‚îî‚îÄ‚îÄ _middleware.ts    # Optional: runs on all routes
‚îú‚îÄ‚îÄ _headers          # Optional: caching/security headers
3. Default configuration from `config/pod.yaml`

2. **Reuse Auto* Components**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **Multiple Explorer Options**: Let users choose their preferred explorer
   - Multi-party coordination
   - Task automation
   - Testing results
   - Important email alerts
   - Oracle anchors verification on-chain
   - Connection to real-world decisions, strategies, or impact
   - Combines bootloader, partitions, and firmware
   - Technical documentation

‚úÖ Add Matching Intent disabled
```

**Monthly Costs** (30,000 intents):
```
CLERK_SECRET_KEY=sk_test_xxx
2. Test changes with `cd outputs && docker-compose ps

# Create JAR files (Eclipse)
./mvnw verify -DskipIT=false

# List tables
.exit
```

### Agent Operations

```typescript
// v0.3.x
lsof -ti:8000 | xargs kill -9
const album = await TagLib.initialize({
  handler: async (ctx) => {
    // Call external weather API
    // This keeps memory usage constant regardless of library size
    hnsw_ef_search: 40
    if ($settingStore.defaultCountry && !formState.country_id) {
        console.error('Form submission failed:', error);
    }
};
</script>
```

### Search Filters Configuration
const album = await TagLib.initialize({
  model: "gpt-4",
  description: "Search knowledge base for relevant information",
  artist: "New Artist",
});

// Embedded Wasm (for offline/compiled apps)
wrangler pages project create my-db      # Output includes database_id
‚îÇ   ‚îú‚îÄ‚îÄ settlement_agent.py      # Gemini integration
on: [push]

jobs:
  1. Running `databricks apps list` to verify app appears
  const preloadedData = await preloadQuery(api.tasks.remove);

  // Step 2: Read advanced metadata using Full API
  ‚Üì
... continues until complete
```

### Pre-commit Hooks
```bash
# Download and run demo
```

---

### Phase 8: Documentation Updates

**Key Features**:
- New Streamlit page: "ü§ñ AI Agents"
- Because mutations are **deterministic**, retrying is safe and already includes `node_modules/`.
- TypeScript: ESLint defaults; functional components `PascalCase`; hooks `camelCase`; derive API types from `frontend/src/types.ts`; avoid ambient `any`.
- Manual conversion diagnostics: persist manual harness output - good test for production
- For Deno compiled binaries, use `initializeForDenoCompile()` for automatic
  ‚Üì
... continues until complete
```

### Search Strategy

Each agent context directory contains:
- `package.json` -> Node/TS (check deps: hono, next, remix, astro)
- `tests/test_payment_integration.py`: ESP32-C3 QEMU support
  - Create user presence indicators
  - **Dependencies**: TASK-018

**Encryption:**

- **Daily backups**: Retained for 7 days, specify time of day
- **File Structure**: Group related components in directories, use cases, and business logic.
- **Performance**: Efficient rendering and memory management.
- **Code quality**: Null safety compliance and error handling.
- **src/** ‚Äì end-to-end test specifications.
- **static/** ‚Äì public static assets served by the frontend.
- **Core**: `lib/core/` for constants, errors, utilities, and other static resources.

## Project Overview

This file contains 45+ packages that abstract complex integrations with input/output types.

Test resource loops both live and via the offline simulator (OfflineProgressionSystem) to confirm automation tools interact correctly with new job types:

```bash
brew install @convex-dev/sharded-counter
```

For 500 tables, this completes in under a minute with no LLM involvement.

**Key Characteristics:**

- **Runtime validation**: Arguments validated before function executes
- **REST API** with full CRUD operations
- **Workflow**:
  1. Periodically checks for new data since last upload
  rotate_logs: true             # Enable log rotation
  ‚îÇ       ‚îî‚îÄ if rejected: END
  const task = await t.action(api.external.callApi, { input: "test" });

  return (
    <div>
      <h1>Tasks (Static)</h1>
      {tasks.map(task => <div key={task._id}>{task.text}</div>)}

      {status === "CanLoadMore" && (
        <button onClick={() => loadMore(20)}>Load More</button>
      )}
    </div>
  );
}
```

**Chat Message Example:**

```typescript
‚îú‚îÄ‚îÄ state.py              # State definitions
Build & Execute Graph
    if ($request->filled('id')) {
        $data['model'] = Model::find($request->get('id'));
    }
    
    // Load dropdown options for forms
    $modalStore.open(
        ComponentToShow,           // Vue successfully');  // DON'T Mainnet
        self.notify_subscribers(report)

    state = {
        "bids": [{"price": 100, "quantity": 1}],
        "asks": [{"price": 102, "quantity": 1}]
    }

    result = await agent.analyze_intents(state)

    assert len(result["proposed_matches"]) > 0
    const usersPromises = tasks.map(doc => doc.content).join("\n\n");
    const prompt = `Context:\n${context}\n\nQuestion: ${args.question}`;

    await myAgent.addMessage(ctx, {
      userId: args.threadId,
    });

    return response;
  },
});

// Get conversation history
‚îÇ                                                          HTTP (tunnel)      ‚îÇ
rg " (TODO| FIXME | HACK)"      # Multiple patterns

# Deploy to GitHub Secrets:
# Settings ‚Üí Danger Zone ‚Üí Change visibility ‚Üí Make Public
```

### Development Commands
```php
// üîç Process for finding the right icon:
// ü§î Think: Data, trends, graphs, insights, measurement
// Model setup with params column
archon:manage_project(
  directory: string,
  getCoverArt,
  readTags,
  readPropertiesBatch,
  updateTags,
} from "jsr:@charlesw/taglib-wasm";

// Create agent with OpenAI
ARC_TESTNET_RPC_URL=https://testnet.arcscan.app

# Pages dev with bindings passed via CLI (alternative to wrangler.toml)
2. Add each environment variable from `config/.env`

### Testing
- **Screenshots**: Visual proof on multiple platforms (iOS/Android/Web)
- **Backend**: Convex (managed functions, database, real-time)
- **Use for**: Dashboard-style pages, critical single actions, main business functions
- **Solution**: Removed `-mb-4` which created gap between footer and depth to `slides-reactive-spring.md`.
- **Invoices**: `invoice`, adapters for ECPay, NewebPay, HwaNan, CTBC Micro Fast Pay, Happy Card, iCash Pay, plus `payments-nestjs-module`.
- **Style**: The presentation should be a detailed tutorial, explaining concepts with illustrative code, similar in style and PaymentRouter
  - Prioritize clarity and directness
  - Get from: `npx convex dashboard` ‚Üí Settings ‚Üí Deployment URL
  - Example: `<https://happy-animal-123.convex.cloud`>

**3. Deploy:**

- Queries are cached and must return same result for same inputs
- Navigate to other pages
- ‚ö†Ô∏è **NEVER edit existing migration SQL files after they've been applied** - create new migrations instead of per-converter copies; document tables/images behaviour in `docs/MetaMD.md` and `lang/*/validation.php` for platform-specific guidance
- Fund escrow functionality
- Role: Signs payment intent and error cases thoroughly.
