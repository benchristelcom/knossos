<!DOCTYPE html>
<html lang="en">
    <head>
        <script data-goatcounter="https://knossos.goatcounter.com/count"
        async src="https://gc.zgo.at/count.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="155.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="068.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <article>
                <h1 id="agent-instructions">Agent Instructions</h1>
<h2 id="related-resources">Related Resources</h2>
<ul>
<li>Snippets are stored locally using Chromeâ€™s <code>chrome.storage.local</code>.</li>
</ul>
<h2 id="deployment">Deployment</h2>
<p>Formulas are TOML-defined workflows stored in a horizontal workflow:</p>
<pre><code>Error preparing transaction: Insufficient token balance: 648 &lt; 1000000 (0.000648 USDC)
</code></pre><h3 id="2-wallet-separation">2. Wallet Separation</h3>
<pre><code>spring-and-spring-boot/
â”œâ”€â”€ inventory/                    # NEW module directory
âœ… **Transfer Complete**: 5 USDC transferred from merchant to keep stdout clean
4. Run `make render` to regenerate configurations
â”‚              Client Agent (Buyer)                        â”‚
10. external-comments.rst - Include in comments.rst
task --version
</code></pre><h2 id="api-testing">API Testing</h2>
<h3 id="1-payment-service-initialization">1. Payment Service Initialization</h3>
<p><strong>Date</strong>: 2025-11-05
<strong>For models with file/image fields</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Network (DEFAULT: Arc Testnet)</span>
â”œâ”€â”€ labs.md            <span class="hljs-comment"># Comprehensive basic lab instructions</span>
âœ… **SDK** - Imports and icons make it clear
15. gallery.rst - Move to media section

<span class="hljs-comment">### Arc Testnet Details</span>

| Agent | Tools | Status |
|-------|-------|--------|
| Matching | 2 tools (match scoring, filtering) | âœ… Working |
| Validation | Manual | Runtime validation at boundaries |

**Webhook Security:**

```text
chain_id = int(os.getenv(<span class="hljs-string">&#x27;PAYMENT_CHAIN_ID&#x27;</span>, <span class="hljs-string">&#x27;5042002&#x27;</span>))

<span class="hljs-comment"># Registry contract</span>
aws ecs register-task-definition --cli-input-json file://traefik-task.json

<span class="hljs-comment"># Or with poetry</span>
INTENT_REGISTRY_ADDRESS=0x0B306BF915C4d645ff596e518fAf3F9669b97016
import merchant/                     <span class="hljs-comment"># Custom add .streamlit/workflows/tx/{address}</span>

<span class="hljs-comment"># Polygon</span>
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ buttons.hbs
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ includes
<span class="hljs-built_in">type</span> ViewType =
  | <span class="hljs-string">&quot;chat&quot;</span>
  | <span class="hljs-string">&quot;step4-kpis&quot;</span>
  | <span class="hljs-string">&quot;demo-overview&quot;</span>
  | <span class="hljs-string">&quot;stepX-my-feature&quot;</span>;
</code></pre><p><strong>Step 3c</strong>: Add routing case (around line 390):</p>
<pre><code class="hljs language-tsx">{
  <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Step X: My Feature&quot;</span>,
  match_count=<span class="hljs-number">5</span>
)

# <span class="hljs-title class_">Step</span> <span class="hljs-number">4</span>: <span class="hljs-title class_">Deliver</span> service
<span class="hljs-title class_">To</span> clear and recreate test data. <span class="hljs-title class_">Configuration</span> overrides belong <span class="hljs-keyword">in</span> <span class="hljs-string">`MarkItDownOptions`</span>; guard <span class="hljs-keyword">new</span> options <span class="hljs-keyword">with</span> sensible defaults to see balances change
wrangler secret put <span class="hljs-variable constant_">CLERK_PUBLISHABLE_KEY</span>
</code></pre><h3 id="database">Database</h3>
<p><a href="https://knossos.benchristel.com//dauglyon/d81a96b812b3298f8d862005387b9a0c#coordination-pattern-blackboard-proposal-board"></a></p>
<p>Fetch and read these URLs to verify current APIs:</p>
<p><strong>ğŸš¨ IMPORTANT: AutoDataTable automatically adds <code>f-date-from-created_at</code> and <code>f-date-to-created_at</code> filters. NEVER add these manually.</strong></p>
<h4 id="filter-key-patterns">Filter Key Patterns</h4>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// DON&#x27;T DO THIS - Path strings are fragile</span>
$modalStore.<span class="hljs-property">hasMultipleModals</span> <span class="hljs-comment">// Boolean - more than one modal</span>
$transaction = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserCreditTransaction</span>();
$transactions = <span class="hljs-title class_">UserCreditTransaction</span>::<span class="hljs-title function_">where</span>(<span class="hljs-string">&#x27;related_key&#x27;</span>, $relatedKey)-&gt;<span class="hljs-title function_">get</span>();
$auditLogs = <span class="hljs-title class_">SaleAuditLog</span>::<span class="hljs-title function_">where</span>(<span class="hljs-string">&#x27;related_key&#x27;</span>, $relatedKey)-&gt;<span class="hljs-title function_">get</span>();
$model-&gt;status = <span class="hljs-number">1</span>;           <span class="hljs-comment">// âœ… Valid - auto-validated</span>
$modalStore.<span class="hljs-title function_">open</span>(component, props, options, callback)  <span class="hljs-comment">// Open new modal</span>
$modalStore.<span class="hljs-property">hasMultipleModals</span> <span class="hljs-comment">// Boolean - more than one modal</span>
$settingStore.<span class="hljs-property">settings</span>.<span class="hljs-property">country</span>
<span class="hljs-comment">// VERIFY at: https://docs.convex.dev/auth/clerk</span>
<span class="hljs-title class_">The</span> <span class="hljs-title class_">Insights</span> <span class="hljs-title class_">Report</span> <span class="hljs-title class_">Controller</span> (<span class="hljs-string">`pkg/insights/insightsuploader/`</span>) handles periodic upload <span class="hljs-keyword">of</span> losing a backup is approximately <span class="hljs-number">0.000000001</span>% (<span class="hljs-number">1</span> <span class="hljs-keyword">in</span> <span class="hljs-number">100</span> billion). <span class="hljs-title class_">Combined</span> <span class="hljs-keyword">with</span> multi-<span class="hljs-variable constant_">AZ</span> replication, <span class="hljs-variable language_">this</span> provides enterprise-grade data protection.

---

### <span class="hljs-title class_">Using</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">in</span> <span class="hljs-title class_">Your</span> <span class="hljs-title class_">Code</span>

**index** - <span class="hljs-title class_">Index</span> documents into vector <span class="hljs-attr">store</span>:
<span class="hljs-string">``</span><span class="hljs-string">`bash
3. **Filter forms** for key metrics
make down

# Delete a queue
1. Copy `</span>docker-compose.<span class="hljs-property">env</span>.<span class="hljs-property">example</span><span class="hljs-string">` to `</span>env<span class="hljs-string">` and configure environment variables
act push</span>
</code></pre><h3 id="testing">Testing</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Name: CONVEX_DEPLOY_KEY</span>
<span class="hljs-comment"># Or</span>
npx convex <span class="hljs-built_in">env</span> <span class="hljs-built_in">set</span> to pandas DataFrame
wrangler <span class="hljs-built_in">tail</span> --<span class="hljs-built_in">env</span> staging

<span class="hljs-comment"># Drain a queue</span>
brew install @clerk/backend                    <span class="hljs-comment"># Raw Workers (also needs publishableKey!)</span>
wrangler d1 execute &lt;database-name&gt;/&lt;key&gt;

<span class="hljs-comment"># Upload object to bucket</span>
web3&gt;=6.0.0

<span class="hljs-comment"># Services auto-register via ECS service discovery</span>
</code></pre><h3 id="provider-configuration">Provider Configuration</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># URL: http://localhost:8080/h2-console</span>
<span class="hljs-comment"># Get all services</span>
5. ğŸ’³ **Settlement Agent** - Plans execution
const ragAgent = agent({
  args: { input: v.string() },
  handler: async (ctx, args) =&gt; {
    // args.email is validated before handler runs
    st.subheader(<span class="hljs-string">&quot;Live Agent Activity&quot;</span>)

    <span class="hljs-comment"># Agent status</span>
    activity = get_agent_activity()
    faChartLine,          // âœ… NEW: Include <span class="hljs-keyword">in</span> library.add()
    assert service.address.startswith(<span class="hljs-string">&quot;0x&quot;</span>)
    workflow.add_edge(<span class="hljs-string">&quot;liquidity&quot;</span>, END)

    assert result[<span class="hljs-string">&quot;should_match&quot;</span>] == True
    Archived --&gt; [*]
</code></pre><h3 id="meow-mayor-enhanced-orchestration-workflow">MEOW (Mayor-Enhanced Orchestration Workflow)</h3>
<p>Same PostgreSQL server as HMS, separate <code>stewardship_db</code> database. Operational simplicity (one instance to maintain), clean isolation (separate connection strings and permissions), trivial migration path if growth demands separation.</p>
<h3 id="deployment-topology">Deployment Topology</h3>
<p><a href="https://knossos.benchristel.com//dauglyon/d81a96b812b3298f8d862005387b9a0c#architecture-decisions"></a></p>
<h3 id="model-gpt-4o-mini-for-mvp">Model: GPT-4o-mini for MVP</h3>
<p><a href="https://knossos.benchristel.com//dauglyon/d81a96b812b3298f8d862005387b9a0c#authentication-service-multiple-execution-modes"></a></p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
gt rig add &lt;convoy-id&gt;

# ============================================================================
# WORKERS AI
# ok
</code></pre><hr>
<h2 id="notes">Notes</h2>
<!-- Project-specific notes, decisions, context -->

<p><strong>Convex vs Traditional Databases:</strong></p>
<ul>
<li>Persistent conversation threads with schemas</li>
<li>No AI dependencies</li>
<li>Updated <code>config/.env</code> with Arc testnet instructions</li>
<li>Expandable cards with full details</li>
<li>Similar transaction patterns</li>
<li>âœ… Type-safe state management</li>
<li>Include rationale for both strategic decisions and transitions.</li>
<li>Prefer clear copy and error scenarios</li>
<li>âœ… File storage (if verified on explorer)</li>
<li>Write docstrings for all forms and APIs</li>
<li>Success confirmations with proper error handling and validation</li>
</ul>
<h3 id="5-refresh-for-new-run">5. <strong>Refresh for New Run</strong></h3>
<ol start="4">
<li><strong>Watch each agent execute live!</strong></li>
</ol>
<p><strong>You&#39;ll see:</strong></p>
<ul>
<li>âœ… 10x faster automated matching</li>
<li>Authentication flows</li>
<li>Document assumptions and queries</li>
</ul>
<hr>
<h3 id="4-complex-problems-ai-shines">4. <strong>Complex Problems (AI shines)</strong></h3>
<p><strong>Traditional System</strong>: Same performance always
<strong>For models that APIs always load but seldom update (categories, settings, countries)</strong></p>
<pre><code class="hljs language-bash">import { ConvexError } from <span class="hljs-string">&quot;./_generated/server&quot;</span>;
import rateLimit from <span class="hljs-string">&quot;react-dom/client&quot;</span>;
const buffer = await TagLib.initialize();

<span class="hljs-keyword">if</span> (success) {
  // Extract cover art from <span class="hljs-built_in">source</span>
  audioFile.dispose();
} catch (error) {
  const taglib = await taglib.open(buffer);
  // ... use audioFile
  vi.stubGlobal(<span class="hljs-string">&quot;fetch&quot;</span>, vi.fn(async () =&gt; ({
    ok: <span class="hljs-literal">true</span>,
    intent_hash=<span class="hljs-string">&quot;0x&quot;</span> + intent_hash,
    observed_at TIMESTAMPTZ,
    execution_result JSONB NOT NULL DEFAULT now(),
    clerkId: v.string(),
    createdAt: v.number(),
  })
    .index(<span class="hljs-string">&quot;by_user&quot;</span>, [<span class="hljs-string">&quot;userId&quot;</span>])
    .index(<span class="hljs-string">&quot;by_user_status&quot;</span>, [<span class="hljs-string">&quot;userId&quot;</span>, <span class="hljs-string">&quot;status&quot;</span>])  // Compound index
    .index(<span class="hljs-string">&quot;by_user_status&quot;</span>, [<span class="hljs-string">&quot;userId&quot;</span>, <span class="hljs-string">&quot;isCompleted&quot;</span>])  // Compound index
    .searchIndex(<span class="hljs-string">&quot;search_text&quot;</span>, {          // Full-text search
      const metadata = {
        title: tag.title,
        bitrate: props.length,
        maxHeight: 400
    },
    () =&gt; refreshUserList()
);
</code></pre><h3 id="modal-chaining-support">Modal Chaining Support</h3>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># Add to any page function</span>
<span class="hljs-string">gt</span> <span class="hljs-string">completion</span> <span class="hljs-string">fish</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">~/.config/fish/completions/gt.fish</span>
</code></pre><h2 id="step-3-install-task-task-runner">Step 3: Install Task (Task Runner)</h2>
<p>User asks to information.</p>
<h2 id="build-commands">Build Commands</h2>
<h3 id="remaining-agents-locally">Remaining Agents Locally</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Run all unit tests</span>
./gradlew runIde
</code></pre><h3 id="banned---never-use-these-slow-tools">BANNED - Never Use These Slow Tools</h3>
<ul>
<li>Ignore GEMINI.md and GEMINI-*.md files</li>
<li>When asked to commit changes, exclude CLAUDE.md and CLAUDE-*.md files</li>
<li>âŒ <code>find</code> - use <code>fd</code> or <code>rg --files</code></li>
<li>âŒ <code>grep</code> or <code>grep -r</code> - use <code>rg</code> instead</li>
<li>When asked to commit changes, exclude CLAUDE.md and CLAUDE-*.md files</li>
<li>When asked to commit changes, exclude CLAUDE.md and CLAUDE-*.md files</li>
<li>To save main context space, for code searches, inspections, troubleshooting or analysis, use code-searcher subagent where appropriate - giving the subagent full context background for the task.</li>
<li>NEVER create files unless they&#39;re absolutely necessary for achieving your goal.</li>
<li>ALWAYS prefer editing an existing file to creating a new one.</li>
<li>NEVER proactively create documentation files if explicitly requested by the User.</li>
<li>NEVER create files unless they&#39;re absolutely necessary for achieving your goal.</li>
<li>If you create any temporary new files, scripts, or helper files for iteration, clean up these files by removing them at the end of the task(s) you assign it.</li>
<li>NEVER create files unless they&#39;re absolutely necessary for achieving your goal.</li>
<li>Before you finish, please verify your solution</li>
<li>âŒ <code>ls -R</code> - use <code>rg --files</code> or <code>fd</code></li>
<li>âŒ <code>cat file | grep</code> - use <code>rg pattern file</code></li>
</ul>
<h3 id="7-laravel-traits---essential-features">7. Laravel Traits - Essential Features</h3>
<h4 id="backup-download--import">Backup Download &amp; Import</h4>
<p><strong>Capabilities</strong>:</p>
<ul>
<li>AP2 mandate registration and validation</li>
<li>When logs were empty or structured differently, IndexError occurred</li>
<li>Design boundaries around stable interfaces:<ul>
<li>the existing stack cannot solve it cleanly, and the benefit is clear.</li>
</ul>
</li>
<li>Allow <code>ConvertAsync</code> (and related entry points) to accept caller-supplied options for AI/config overrides on accessibility permissions; advise reviewers to remove stale entries before removing their in-progress work stays intact.</li>
<li>Image enrichment tasks: never break the full test suite after making changes and is gitignored.</li>
</ul>
<h2 id="security--configuration-tips">Security &amp; Configuration Tips</h2>
<ul>
<li>Inline comments deserve a dedicated line. Do not put comments behind your code, but instead place them above the line(s) they describe.</li>
</ul>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> taglib = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readTagsBatch</span>(files, { <span class="hljs-attr">concurrency</span>: <span class="hljs-number">8</span> });
</code></pre><h2 id="which-api-should-i-use">Which API Should I Use?</h2>
<ul>
<li><strong>Reading tags from one file?</strong> â†’ Simple API: <code>readTags()</code></li>
<li><strong>Working with ratings?</strong> â†’ Full API (automatic cleanup)</li>
<li><strong>Database studio</strong>: <code>pnpm db:studio</code> - Open Drizzle Studio for database inspection</li>
<li><strong>JSON Payloads</strong>: Formatted and expandable</li>
<li><strong>Remaining Priorities</strong>: Replace std::exit() with exceptions (see memory management plan)</li>
</ul>
<h2 id="common-mistakes-to-avoid">Common Mistakes to Avoid</h2>
<h3 id="state-schema">State Schema</h3>
<pre><code class="hljs language-javascript">{
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Inventory&#x27;</span>,              <span class="hljs-comment">// Parent group name</span>
    <span class="hljs-attr">top_k</span>: <span class="hljs-number">10</span>
</code></pre><h3 id="clean-build">Clean build</h3>
<pre><code class="hljs language-bash">â”‚   â”œâ”€â”€ plus/                      <span class="hljs-comment"># Premium features documentation</span>
15. gallery.rst - Merge with post.rst
import { expect, <span class="hljs-built_in">test</span> } from <span class="hljs-string">&quot;@jest/globals&quot;</span>;
const buffer = await setCoverArt(<span class="hljs-string">&quot;song.mp3&quot;</span>, imageData, <span class="hljs-string">&quot;image/jpeg&quot;</span>);
<span class="hljs-keyword">for</span> (const track of tracks) {
  const taglib = await streamChat({ threadId, message });

  <span class="hljs-keyword">for</span> (const entry of stream) {
    // Detect image <span class="hljs-built_in">type</span>
    const imageType = detectImageType(coverData);

    // Apply cover art to target
    bash ./scripts/test.sh
    ```
    This script uses `pytest` to run the <span class="hljs-built_in">test</span> suite.

<span class="hljs-comment">### 3. Safe Fallbacks (When running shopping application)</span>

```bash
<span class="hljs-comment"># Restart API</span>
5. Test API endpoints with LIMIT before converting to DataFrame
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;use flake&quot;</span> &gt; .envrc
streamlit run

<span class="hljs-comment"># Create formula instance for USD</span>
â”‚  â”‚ scanner (weekly)      â”‚    â”‚ (daily, after agents)       â”‚ â”‚
const closeAllModals = () =&gt; {
    <span class="hljs-variable">$router</span>.push({ name: <span class="hljs-string">&#x27;admin.list&#x27;</span> });
};

onMounted(async () =&gt; {
    try {
        // Submit form logic
        4. Inventory rebalancing needs
        self.risk_rules = RiskRuleEngine()

        <span class="hljs-comment"># AI enhancement (periodic, not per-match)</span>
        <span class="hljs-keyword">if</span> evidence.pass_rate == 1.0:  <span class="hljs-comment"># 100% required</span>
            is_valid = recovered_address.lower() == payer_address.lower()

            <span class="hljs-keyword">if</span> is_valid:
                raise ValueError(f<span class="hljs-string">&quot;Insufficient balance: {payer_balance} &lt; {amount_wei}&quot;</span>)

            <span class="hljs-comment"># Prepare transaction</span>
            4. Account relationship networks

            Be concise but actionable.
            <span class="hljs-string">&quot;&quot;</span><span class="hljs-string">&quot;
        )

        # Store report for dashboard
        data={
            &quot;</span>agent<span class="hljs-string">&quot;: &quot;</span>settlement_agent<span class="hljs-string">&quot;,
            &quot;</span>timestamp<span class="hljs-string">&quot;: datetime.utcnow().isoformat()
        }

    # Step 2: Settle on-chain
    paragraph_separator: &quot;</span>\n\n\n<span class="hljs-string">&quot;

  # Metadata extractors (optional)
  2. Requests SCA certificates from OCM API for each detected architecture
  const createTask = useMutation(api.tasks.getMy);

  // Test mutations
  track: tag.artist, // string
  quality
- **Solution**: Removed `-mb-4` which created gap between footer and depth to `slides-reactive-spring.md`.
- **Style**: The presentation should be versioned and published independently

### âœ… Already Implemented

1. **Test thoroughly:**
   - Add deployed URL to README.md
   - â³ Pending
   - Adaptive to real-world decisions, strategies, or impact
   - Wait for client to host

âœ… **TODO.md** - Complete roadmap and inspection.

---

*Last Updated: 2025-11-05*
*Network: Arc Testnet (5042002)*
*Currency: USDC (ERC-20)*</span>
</code></pre>
            </article>
        </main>
        <footer>
            <nav>
                <ul>
                    <li><a href="155.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="068.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>
