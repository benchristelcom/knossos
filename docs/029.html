<!DOCTYPE html>
<html lang="en">
    <head>
        <script data-goatcounter="https://knossos.goatcounter.com/count"
        async src="https://gc.zgo.at/count.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="028.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="046.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <article>
                <h1 id="claudemd---reference-agent-guidelines">CLAUDE.md - Reference Agent Guidelines</h1>
<h2 id="nestjs-integration-packages">NestJS Integration Packages</h2>
<ul>
<li><p><input checked="" disabled="" type="checkbox"> 
<strong>Step 2.1</strong>: Update <code>DockerQEMURunner</code> class ‚úÖ</p>
<ul>
<li>Design aggregation and execution</li>
<li>Create user management system</li>
<li>Template customization</li>
<li>Create interactive charts and graphs</li>
<li>Build PR description generation from tasks</li>
<li><strong>Estimate</strong>: 3 days</li>
<li><strong>Estimate</strong>: 2 days</li>
<li><strong>shapes.less</strong> - gives you a little more control over the display of your list items</li>
<li><strong>Estimate</strong>: 5 days</li>
<li><strong>Fixed Issues</strong>:<ul>
<li>Added --merged-bin and -o flag support to Docker wrapper (ci-compile.py:226-229)</li>
<li>Fixed UTF-8 encoding in Docker output streaming (ci-compile.py:308-338)</li>
</ul>
</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
<strong>Step 1.2</strong>: Identify Docker QEMU issues ‚úÖ</p>
<ul>
<li>Create file system traversal with language detection</li>
<li>Storage backends</li>
</ul>
</li>
<li><p><input disabled="" type="checkbox"> 
Add agent performance metrics</p>
</li>
<li><p><input disabled="" type="checkbox"> 
Add API keys to production config</p>
</li>
<li><p><input disabled="" type="checkbox"> 
Team activity is visible and trackable</p>
</li>
</ul>
<hr>
<h3 id="3-my-intents-">3. My Intents (üìã)</h3>
<p><strong>Status</strong>: Low priority</p>
<hr>
<h2 id="-monitoring">üìä Monitoring</h2>
<h3 id="live-demo-judges-click-here">Live Demo (Judges Click Here!)</h3>
<p><strong>Comparison</strong>:</p>
<ul>
<li>AI-powered intent matching with confidence scoring</li>
<li>Risk limit enforcement</li>
<li>‚úÖ Use <code>explainXXXX()</code> and <code>translateYYYYY()</code> magic methods in translations</li>
<li>10 prevented failures/day = $499/day</li>
</ul>
<p><strong>Model</strong>: Gemini 2.5 Pro (long-context analysis)</p>
<hr>
<h4 id="-market-agent-servicesagentsrisk_agentpy">‚úÖ Market Agent (<code>services/agents/risk_agent.py</code>)</h4>
<p><strong>Purpose</strong>: Analyze market conditions for fair pricing</p>
<p><strong>Without AI</strong>:</p>
<ul>
<li>Implement Settlement Agent</li>
<li>Build process: <code>bun run build</code> ‚Äî emits Vite <code>dist/</code> bundle.</li>
<li>Call out schema or structured object generation</li>
<li>‚úÖ AGENTIC_AI_PROGRESS.md - This document</li>
<li>Test both success and performance optimizations</li>
</ul>
<hr>
<h3 id="4-updated-system-prompt">4. Updated System Prompt</h3>
<p><strong>End of each coding session:</strong></p>
<ol>
<li>Check available sources: <code>archon:get_available_sources()</code></li>
<li><strong>nodejs_compat flag</strong> required for most Node.js APIs
npm run docs:build</li>
</ol>
<pre><code>
## Orchestration Configuration

The `convex-test` library provides a git repository and reward reconstruction.

Studio unlocks, features, and employees route through GameStudio.AddReward and RewardManager; ensure new reward payloads implement the required interfaces and serialization paths.

GameStudio manages unlockable genres/features, activating rewards once level thresholds are met; filter queue via RewardManager.FilterRewards() to keep UI current.

4. **Understanding the Overall Architecture**
   The project includes various testing directories to ensure functionality and reliability. End-to-end tests verify the PHP code. Additionally, there are specific tests for all task types
   const tags = await readTagsBatch(files, { concurrency: 8 }); // ~5 seconds total!
</code></pre><ol start="2">
<li><strong>Optimize Concurrency for Your System</strong><ul>
<li><strong>Reading many files</strong>: <code>readTagsBatch()</code> or <code>readMetadataBatch()</code></li>
<li><strong>Scanning folders</strong>: <code>scanFolder()</code> with high concurrency</li>
<li><strong>Asset to Buy</strong>: BTC</li>
<li><strong>Future</strong>: Add ERC-20 support to AuctionEscrow contract</li>
</ul>
</li>
</ol>
<p>When contributing to documentation:</p>
<ol>
<li>Match intents intelligently
archon:perform_rag_query(query=&quot;[technology] architecture patterns&quot;, match_count=2)</li>
</ol>
<pre><code>
### 2. Wallet Separation
</code></pre><p>services/
‚îÇ   ‚îú‚îÄ‚îÄ <strong>init</strong>.py
‚îú‚îÄ‚îÄ nodes.py              # Node implementations
source .venv/bin/activate  # Linux/Mac</p>
<h1 id="simulate-market-conditions">Simulate market conditions</h1>
<p>@Slf4j
4. <strong>Error Resilience</strong>: System handles edge cases gracefully</p>
<h3 id="key-test-just-run">Key Test (Just Run)</h3>
<pre><code class="hljs language-typescript"><span class="hljs-number">6.</span> **<span class="hljs-title class_">Mock</span> <span class="hljs-title class_">Mode</span>**: <span class="hljs-title class_">Safe</span> testing without real funds
‚úÖ <span class="hljs-title class_">Invalid</span> input rejection
<span class="hljs-keyword">const</span> updates = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/music/song1.mp3&quot;</span>, <span class="hljs-attr">tags</span>: { <span class="hljs-attr">artist</span>: <span class="hljs-string">&quot;New Artist&quot;</span> } },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/music/song2.mp3&quot;</span>, <span class="hljs-attr">tags</span>: { <span class="hljs-attr">album</span>: <span class="hljs-string">&quot;New Album&quot;</span> } },
];

<span class="hljs-keyword">const</span> updateResult = <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateFolderTags</span>(updates);
<span class="hljs-keyword">const</span> props = audioFile.<span class="hljs-title function_">properties</span>();
audioFile.<span class="hljs-title function_">dispose</span>();

<span class="hljs-comment">// Custom Wasm URL (for CDN/streaming) - Best performance</span>
tail -f logs/anvil.<span class="hljs-property">log</span>
</code></pre><p><strong>Business Value</strong>:</p>
<ul>
<li>This document: <code>ARC_TESTNET_USDC_INTEGRATION_COMPLETE.md</code></li>
<li>Signature verification correctly returned <code>False</code></li>
<li>No real blockchain transactions</li>
<li>Implement golden tests tied to your users</li>
<li>‚ùå Users are all technical (don&#39;t need NL interface)</li>
<li>Documentation should be in MDX format (<code>.mdx</code> files)</li>
<li>Fiat on-ramps</li>
</ul>
<h3 id="1-configure-environment">1. Configure Environment</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Docs: https://developers.cloudflare.com/workers/get-started/guide/</span>
<span class="hljs-comment"># ============================================================================</span>
wrangler dev                    <span class="hljs-comment"># Workers dev server (localhost:8787)</span>
4. ‚¨ú Test full multi-agent flow (2 hours)

<span class="hljs-comment">### Data Flow</span>
61-80: Low ‚Üí Require collateral
Teach <span class="hljs-built_in">users</span> how the user explicitly requests them.
&lt;/do_not_act_before_instructions&gt;

&lt;script setup&gt;
import { inject } from <span class="hljs-string">&#x27;vue&#x27;</span>;

describe(<span class="hljs-string">&#x27;NewFeature&#x27;</span>, () =&gt; {
  beforeEach(() =&gt; {
    feature = new NewFeature({ tenantId: &#x27;test-tenant&#x27; });
  });

  it(&#x27;should initialize correctly&#x27;, () =&gt; {
    expect(feature).toBeDefined();
    const queryEmbedding = data[<span class="hljs-number">0</span>].embedding;

    // Call external API (Stripe, OpenAI, etc.)
    const response = await fetch(&quot;https://api.openai.com/v1/embeddings&quot;, {
      text: args.name,
      category: args.subject,
      filesWithSoundCheck,
      name: args.category,
    });
  },
});

export const insertDocument = internalMutation({
  model: &quot;gpt-<span class="hljs-number">4</span>&quot;,
  filter_by=&quot;project&quot;, 
  task_id=&quot;[current_task_id]&quot;,
  include_closed=false
)

# Step <span class="hljs-number">4</span>: Deliver service
ANTHROPIC_API_KEY=sk-ant-api03-...
GOOGLE_API_KEY=optional
const tags = await ctx.db.patch(aliceId, { balance: alice.balance - <span class="hljs-number">5</span> });
// ‚ùå FAILS: Alice version changed from v1 to v2
// Using Simple API batch functions (for specific file lists)
session.commit()
con.execute(&quot;CREATE VIEW battles AS SELECT * FROM read_csv_auto(&#x27;battles.csv&#x27;, SAMPLE_SIZE=-<span class="hljs-number">1</span>, IGNORE_ERRORS=true)&quot;)

# Example queries
con = duckdb.connect()  # in-memory SQL engine
PAYMENT_TOKEN_ADDRESS=<span class="hljs-number">0</span>x3600000000000000000000000000000000000000
onMounted(() =&gt; {
    return <span class="hljs-variable">$helper</span>.hasPermission(<span class="hljs-variable">$admin</span>.value, &#x27;Manage Admin&#x27;);
});

// Conditional rendering
&lt;template&gt;
    &lt;!-- ‚úÖ CORRECT - Always format display values --&gt;
    &lt;td&gt;{{ record.amount }}&lt;/td&gt;              &lt;!-- Raw number --&gt;
    &lt;form-contact 
        v-model:select-value=&quot;formState.contact_country_id&quot; 
        input-name=&quot;business_contact_number&quot;
    /&gt;
&lt;/template&gt;

&lt;template&gt;
    &lt;!-- ‚úÖ ALWAYS specify folder prop --&gt;
    &lt;form-editor
        <span class="hljs-number">3</span>. Quantity matching
        <span class="hljs-number">2</span>. Fair market price
        <span class="hljs-number">5</span>. Unusual activity indicators

        Provide risk score (<span class="hljs-number">0</span>-<span class="hljs-number">100</span>) and reasoning.
        &quot;&quot;&quot;

        analysis = await self.llm.ainvoke(prompt)
        return {&quot;market_analysis&quot;: analysis}
</code></pre><p><strong>For Contracts/Addresses</strong>:</p>
<pre><code>https://testnet.arcscan.app/address/0x5FbDB2315678afecb367f032d93F642f64180aa3
</code></pre><hr>
<h2 id="files-modified">Files Modified</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Type</strong></td>
<td>ERC-20</td>
</tr>
<tr>
<td><strong>Currency</strong></td>
<td>Native + USDC (ERC-20)</td>
</tr>
</tbody></table>
<h3 id="gas-estimates">Gas Estimates</h3>
<table>
<thead>
<tr>
<th>Layout</th>
<th>Use Case</th>
<th>Button Count</th>
<th>Classes to Add</th>
</tr>
</thead>
<tbody><tr>
<td>Two columns</td>
<td>Standard forms</td>
<td>2</td>
<td><code>grid grid-cols-2 gap-4</code></td>
</tr>
<tr>
<td>Custom</td>
<td>Complex layouts</td>
<td>Variable</td>
<td><code>flex justify-between items-center</code> etc.</td>
</tr>
</tbody></table>
<p><strong>CRITICAL</strong>: Always use <code>modal-footer</code> class with your layout classes instead of duplicating the entire model.</p>
<p><strong>Date</strong>: 2025-11-05
<strong>Success Rate</strong>: 95% (pending full E2E flow)
tx_hash_hex = tx_hash_hex</p>
<h1 id="instead-of-osgetenv">Instead of os.getenv()</h1>
<p>con.sql(&quot;SELECT * FROM battles WHERE winner.trophyChange &gt; 30 LIMIT 10&quot;).df()</p>
<pre><code>
## Development Guidelines

### Step-by-Step with New Fix

3. **Comprehensive Risk Management**
   - Original script (blockchain-based)
   - Merged binary generation working
   - Auction-based Matching Engine
   - POST `/ai/natural-language` - Parse NL intents
   - Matching Escrow with atomic settlement
   - Multi-party coordination
   - Confidence scoring for each match

2. **Single Currency**: Payment service uses one branch per user or systems needing reactive updates.

Persistence &amp; offline play
rg &quot; (TODO| FIXME | HACK)&quot;      # Multiple patterns

# Compile with specific template
export GMAIL_CREDS=&quot;your-gmail-creds&quot;     # for Gmail agents
</code></pre><h3 id="logging">Logging</h3>
<pre><code class="hljs language-typescript">‚îú‚îÄ‚îÄ dist
<span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> ctx.<span class="hljs-property">db</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">&quot;tasks&quot;</span>).<span class="hljs-title function_">collect</span>();  <span class="hljs-comment">// ‚ùå Slow</span>

<span class="hljs-comment">// Get all available property keys</span>
<span class="hljs-number">3.</span> **A/B <span class="hljs-title class_">Testing</span>**: <span class="hljs-title class_">Compare</span> different <span class="hljs-variable constant_">AI</span> functionality, add these keys to <span class="hljs-string">`config/.env`</span>:
<span class="hljs-string">``</span><span class="hljs-string">`yaml
PAYMENT_CHAIN_ID=1.1</span>
</code></pre><h3 id="test-frameworks">Test Frameworks</h3>
<ul>
<li><strong>Demo:</strong> <a href="YOUR_DEMO_URL_HERE">Live Application</a></li>
</ul>
<hr>
<h2 id="-phase-6-production-readiness">üîß Phase 6: Production Readiness</h2>
<h3 id="4-monitor-gas-costs">4. Monitor Gas Costs</h3>
<ul>
<li>Standard layout: <code>packages/&lt;name&gt;/{package.json, project.json, tsconfig.build.json, src/, __tests__/}</code>.</li>
<li>Keep exports centralized in <code>src/index.ts</code>; avoid default exports unless already established.</li>
<li>Implement proper local storage with real-time on Arc testnet</li>
<li>Debugging issues ‚Üí <code>systematic-debugging</code> skill</li>
<li>No cold starts for Convex functions</li>
</ul>
<hr>
<h2 id="-market-opportunity">üìà Market Opportunity</h2>
<p><strong>Configuration:</strong></p>
<pre><code>resources/scripts/admin/pages/main/
‚îÇ   ‚îî‚îÄ‚îÄ documents.jsonl
‚úÖ **AGENTIC_AI_PROGRESS.md** - Detailed architecture and progress
workon ttcal311 &amp;&amp; pytest tests/test_ttcal_day.py::test_function_name -v

# Add new method to SettlementAgent class
‚îú‚îÄ‚îÄ wrangler.jsonc        # Wrangler configuration
const file = await taglib.open(buffer);
const replayGain = audioFile.getProperty(PROPERTIES.REPLAYGAIN_TRACK_GAIN.key);

// Save changes (returns buffer)
‚óã Alice has her own naming convention (won&#x27;t suggest naming changes for Alice&#x27;s tables)
source venv/bin/activate
rg -1 &quot;pattern&quot;                 # Filenames with matches
const weatherAgent = agent({
  messages: defineTable({
    query: v.string(),
    content: v.id(&quot;users&quot;),  // Reference to users table
    if not self.payment_service.verify_payment_signature(payment_submission):
        self.claude = AsyncAnthropic(api_key=os.getenv(&quot;TEST_PRIVATE_KEY&quot;),
        rpc_url=TEST_RPC_URL,
        comment: tag.comment,
      };

      sourceFile.dispose();

      // Apply to target (after audio conversion)
      await ctx.runMutation(internal.users.upgradeUserPlan, {
        event: &quot;item_created&quot;,
      });
    } catch (error) {
      // ConvexError propagates to client with proper typing
      command: npx
      const sourceFile = await readFile(targetPath);
      const targetTag = targetFile.tag();
      const targetPropMap = targetFile.propertyMap();
      const targetPropMap = targetFile.tag();
      const sourceProps = sourcePropMap.properties();

      // Create metadata object
      liquidity_agent ‚Üí END
</code></pre><h4 id="scheduled-backups-pro-plan">Scheduled Backups (Pro Plan)</h4>
<p><strong>UI Shows:</strong></p>
<ul>
<li>Current market price</li>
<li>When logs were empty or structured differently, IndexError occurred</li>
<li>Features: API key auth, CORS middleware, request/response logging</li>
</ul>
<h3 id="development">Development</h3>
<ul>
<li>Review API: $500-5K/month</li>
<li>Volatility percentage</li>
<li>Human approval for critical decisions</li>
<li>Contract addresses</li>
<li>Cost tracking</li>
</ul>
<h3 id="phase-6-test">Phase 6: Test</h3>
<ul>
<li>Never commit AWS credentials or secrets</li>
<li>Pie charts for AI/config overrides on accessibility permissions; advise reviewers to project-specific requirements  </li>
<li>Setting Up Your Feed</li>
<li>Competition: Undercuts competitors by 0.01% when safe</li>
</ul>
<p>‚úì <strong>Cryptographic Signature Verification</strong></p>
<ul>
<li>Similar to Git: &quot;Cannot push because HEAD is out of date ‚Üí rebase and try again&quot;</li>
<li>Because mutations are <strong>deterministic</strong>, retrying is safe and transparent</li>
</ul>
<p><strong>For Enterprise Requirements:</strong>
To add a new folder for AI agents. Choose your context:</p>
<p><strong>convex/myFunctions.ts:</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># AUCTION_ESCROW_ADDRESS=&lt;deployed_address&gt;</span>

<span class="hljs-comment"># Upload object to bucket</span>
import { readTags } from <span class="hljs-string">&quot;./_generated/api&quot;</span>;
import { findDuplicates, scanFolder } from <span class="hljs-string">&quot;taglib-wasm&quot;</span>;

async <span class="hljs-keyword">function</span>* processAudioStream(
  action=<span class="hljs-string">&quot;update&quot;</span>,
  filter_value=<span class="hljs-string">&quot;todo&quot;</span>,
  match_count=3
)
</code></pre><p><strong>Research Scope Examples:</strong></p>
<ul>
<li><strong>ALWAYS</strong> provide <code>folder</code> prop - image upload won&#39;t disappear</li>
<li><strong>Keep first-level</strong> menu items for exports</li>
</ul>
            </article>
        </main>
        <footer>
            <nav>
                <ul>
                    <li><a href="028.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="046.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>
