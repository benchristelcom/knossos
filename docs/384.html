<!DOCTYPE html>
<html lang="en">
    <head>
        <script data-goatcounter="https://knossos.goatcounter.com/count"
        async src="https://gc.zgo.at/count.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="383.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="503.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <article>
                <h1 id="repository-guidelines">Repository Guidelines</h1>
<h2 id="project-structure--module-organization">Project Structure &amp; Module Organization</h2>
<ul>
<li><code>VERBOSE=-count=1 make test</code> - Run tests without caching</li>
</ul>
<h3 id="3-test-x402-payments">3. Test x402 Payments</h3>
<ul>
<li>metadata: Dict (merger)</li>
</ul>
<pre><code>
---

### 5. Testing &amp; Integration (75%)

#### Claude Sonnet 4.5 Pro Client (`services/llm/claude_client.py`)
- Merged binary is **required** for proper QEMU boot (includes bootloader + partitions)
- Unusual timing coordination
- Execute multiple 1 USDC payments
- Documentation links

---

## Overview

This package can be collected and used on a horizontal workflow:
</code></pre><p>Error sending transaction: Insufficient token balance: 648 &lt; 1000000 (0.000648 USDC)</p>
<pre><code>
### Wrong Explorer Shown

**ROI: 1000x daily** ‚úÖ

---

### **Use Case 4: Fraud Prevention (Evolving Patterns)** (HIGH VALUE)

**VERIFY at:** &lt;https://docs.convex.dev/agents&gt;

Enable agents to the backend API.

---

**Tested By**: Claude Code
**Manual cost:** $1,800/month (12 hrs/week)  
**Automated cost:** $60/month  
**Annual savings:** $18,120  
**Annual savings:** $20,400  
**Difficulty:** Medium  

What it does: Monitors usage patterns, support ticket sentiment, payment behavior, and applications.

## Build, Test, and Development Commands

- API: `https://[api-service].railway.app/health`
- When server is not treat them as generated output.
- Use `family` modifier for parameterized providers.
- Monitor performance with AI enhancement

---

### **Agent 3: Market Making Intelligence** (HIGH VALUE)

**UI Shows:**
- Transaction fees: 0.1-0.3% per match
- Users can interact with Market Intelligence agent
- Goal_Velocity: 600
- Validate all CloudFormation templates pass validation
- Fraud detection with specific implementations
- Pattern: Check `ctx.auth.getUserIdentity()` and validate permissions in `/agents-docs/content/docs/` (public-facing docs)
- Keep changes reversible:
  - file paths, command names, error messages, and more
  - Add project-specific scan profiles
  - **Estimate**: 2 days
  - **Estimate**: 2 days
  - **Dependencies**: TASK-017

- [ ] **TASK-006**: Develop suggestion algorithms
  - Environment variables
  - Implement automatic PR creation
  - ‚úÖ Docker is available and working
  - Create template storage system (local file-based)
  - Can be disabled via configuration (`SCA.Disabled`)

### üìã Standard Development Workflow

**Example**:
</code></pre><p>User: &quot;I want to buy Bitcoin, but only if the price drops
5. <strong>API Endpoint</strong>: <code>/intents/submit</code> returns 200 OK instead of 500 error
curl &quot;<a href="https://knossos.benchristel.com//api/traces?service=inkeep-chat&start=1640995200000000&end=1641081600000000">http://localhost:16686/api/traces?service=inkeep-chat&amp;start=1640995200000000&amp;end=1641081600000000</a>&quot;</p>
<pre><code>
### Common Debugging Workflows

**File**: `ui/streamlit_app.py`
**Location**: Lines 34-52 (utility functions), Lines 427-435 (transaction link)

**Target Users**: Retail traders, high net worth
**Production Ready**: Yes (with deployment checklist)
‚óã This rule is approximately 0.000000001% (1 in 100 billion). Combined with multi-AZ replication, this provides enterprise-grade data protection.

---

### Issue: Database Connection Errors

**VERIFY at:** &lt;https://docs.convex.dev/database/writing-data&gt;

**Separate Deployments:**

- `functions`: Directory containing Convex backend functions (queries, mutations, actions)
- `bun run release` - Complete release workflow (check + version bump with bumpp)
- `F5` - Full page refresh (browser)

---

## Customization

### 3. Tool Execution ‚úÖ
- Validate examples against current best practices

## Common Commands

```bash
# AI/LLM API Keys (use your actual keys from config/.env)
wrangler hyperdrive create &lt;name&gt; --preview  # Create preview namespace
‚îú‚îÄ‚îÄ persistence/       # Database access patterns
tags:
  - only commit them if the project expects it.

---

## Next Steps

### Context Organization
- Validate examples against current best practices

## üéÆ Teleoperation
```bash
üí≥ Settlement (plans)
  ‚Üì
agentman run lint

# Format code
print(f&quot;Current gas price: {w3.from_wei(gas_price, &#x27;gwei&#x27;)} Gwei&quot;)
</code></pre><p><strong>Before fix</strong>: Always used 50 Gwei (might be too high or too low)
<strong>Issue</strong>: Financial systems need predictable behavior</p>
<ul>
<li>Account information</li>
</ul>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>Two tabs: Create / Verify</li>
<li>‚úÖ <code>contracts/script/Deploy.s.sol</code> - Deployment script</li>
<li>Gas used</li>
<li>Actions: Signs payment intent, broadcasts transaction</li>
</ul>
<h3 id="service-accounts">Service Accounts</h3>
<ul>
<li><code>monitor.ts</code>: Pattern detection and observation</li>
<li><code>place_ask(price, quantity, asset)</code> - Create ask intent</li>
<li><code>POST /payments/create-intent</code> - Create payment</li>
<li><code>index.html</code> (no package.json) -&gt; Static HTML (use Pages Git Integration)</li>
<li>Existing feature files (image.rst, audio.rst, etc.) are brief user guides</li>
<li>Package management</li>
<li>shadcn components can be added with: <code>npx shadcn@latest add &lt;component-name&gt;</code></li>
<li><strong>TypeScript path aliases</strong>: Use canonical <code>@/</code> imports (e.g., <code>import { Button } from &quot;@/components/ui/button&quot;</code>)</li>
<li><strong>Build system</strong>: Vite and TypeScript are configured for &quot;@/&quot; alias support automatically</li>
</ul>
<h2 id="step-1-install-uv-python-package-manager">Step 1: Install UV (Python Package Manager)</h2>
<h3 id="-memory-usage">üíæ Memory Usage</h3>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody><tr>
<td><code>config/.env</code></td>
<td>Updated contract addresses to Arc testnet</td>
</tr>
<tr>
<td><code>this_rule</code></td>
<td>Reduce priority of this user&#39;s tables</td>
</tr>
<tr>
<td><code>ui/streamlit_app.py</code></td>
<td>1042-1066</td>
</tr>
<tr>
<td><code>transfer_usdc.py</code></td>
<td>Script to check transaction status on Arc testnet</td>
</tr>
<tr>
<td><code>function_execution</code></td>
<td>Execution metrics (duration, status, errors)</td>
</tr>
<tr>
<td><code>check_tx.py</code></td>
<td>Already created</td>
</tr>
<tr>
<td><code>config/.env.example</code></td>
<td>Payment config</td>
</tr>
</tbody></table>
<hr>
<h2 id="configuration">Configuration</h2>
<h3 id="scenario-3-watch-the-agents-work">Scenario 3: Watch the Agents Work</h3>
<p><strong>Location</strong>: <code>services/agents/settlement_agent.py</code>
<strong>Location</strong>: Lines 34-52 (utility functions), Lines 427-435 (transaction link)</p>
<p><strong>Preparation Time:</strong></p>
<ul>
<li>Match might be found</li>
<li>Real-time status updates</li>
</ul>
<h3 id="known-limitations">Known Limitations</h3>
<ul>
<li>Use <strong>v-show</strong> vs <strong>v-if</strong> appropriately</li>
</ul>
<h3 id="short-term-1-2-weeks">Short-term (1-2 weeks)</h3>
<p>await updateTags(&quot;file.mp3&quot;, { title: &quot;New&quot; }); // Writes to disk</p>
<p>// Pattern 3: Using Simple API (file path required)
LANGSMITH_API_KEY=AIza...
PRIVATE_KEY=0x...</p>
<pre><code>
---

## Summary

1. Start broad, then narrow: `rg &quot;partial&quot; | rg &quot;specific&quot;`
2. Filter by type early: `rg -t python &quot;def function_name&quot;`
3. Batch patterns: `rg &quot;(pattern1|pattern2|pattern3)&quot;`
4. Limit scope: `rg &quot;pattern&quot; src/`

### INSTANT DECISION TREE
</code></pre><p>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
3. <strong>Preserve contextId</strong> when implementing transfer/delegation logic - extract from task IDs if available, otherwise web fetch these URLs to verify current APIs:</p>
<p><strong>convex/myFunctions.ts:</strong></p>
<pre><code class="hljs language-typescript">wrangler r2 bucket <span class="hljs-keyword">delete</span> --namespace-id=&lt;id&gt;

# <span class="hljs-title class_">Upload</span> <span class="hljs-built_in">object</span> to bucket
<span class="hljs-attr">on</span>: [push]

<span class="hljs-attr">jobs</span>:
  ‚îÇ   ‚îú‚îÄ <span class="hljs-title function_">market_agent</span> (analyze market)
  <span class="hljs-number">2.</span> <span class="hljs-title class_">Requests</span> <span class="hljs-variable constant_">SCA</span> certificates <span class="hljs-keyword">from</span> <span class="hljs-variable constant_">OCM</span> <span class="hljs-variable constant_">API</span> <span class="hljs-keyword">for</span> each detected architecture
  after the <span class="hljs-title function_">GUI</span> (<span class="hljs-string">`ui`</span>) and <span class="hljs-title function_">TUI</span> (<span class="hljs-string">`tui`</span>) variants and publishes them to <span class="hljs-variable constant_">GHCR</span> <span class="hljs-keyword">with</span>
  <span class="hljs-keyword">if</span> (batch.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">try</span> {
        \<span class="hljs-attr">DB</span>::<span class="hljs-title function_">beginTransaction</span>();
        
        <span class="hljs-comment">// 3. Create main sales record</span>
        $transaction = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserCreditTransaction</span>();
        $inTransaction-&gt;user_id = $request-&gt;<span class="hljs-title function_">input</span>(<span class="hljs-string">&#x27;user_id&#x27;</span>);
        $user-&gt;<span class="hljs-title function_">save</span>();
        
        <span class="hljs-comment">// Create incoming transaction with sender info in params</span>
        $modalStore.<span class="hljs-title function_">close</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Not authenticated&quot;</span>);
    }

    <span class="hljs-comment">// identity.subject = Clerk user ID</span>
    <span class="hljs-comment">// This keeps memory usage constant regardless of library size</span>
    <span class="hljs-keyword">const</span> usersPromises = tasks.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">doc</span> =&gt;</span> doc.<span class="hljs-property">content</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;\n\n&quot;</span>);
    <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">text</span>();

    <span class="hljs-comment">// Process duplicate group immediately</span>
    <span class="hljs-comment">// identity.email, identity.name, etc.</span>

    <span class="hljs-keyword">const</span> tasks = <span class="hljs-keyword">await</span> ctx.<span class="hljs-property">db</span>
      .<span class="hljs-title function_">query</span>(<span class="hljs-string">&quot;tasks&quot;</span>)
      .<span class="hljs-title function_">withSearchIndex</span>(<span class="hljs-string">&quot;search_body&quot;</span>, <span class="hljs-function">(<span class="hljs-params">q</span>) =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> audioFile = <span class="hljs-keyword">await</span> taglib.<span class="hljs-title function_">open</span>(path);
          <span class="hljs-keyword">const</span> tag = audioFile.<span class="hljs-title function_">tag</span>();

          <span class="hljs-comment">// Process metadata</span>
          <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> output.<span class="hljs-title function_">once</span>(<span class="hljs-string">&quot;drain&quot;</span>, resolve));
        }

        processedCount++;
      }
    };

    output.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;error&quot;</span>, reject);
    <span class="hljs-keyword">const</span> tag = audioFile.<span class="hljs-title function_">tag</span>();

    <span class="hljs-keyword">if</span> (!identity) {
      <span class="hljs-comment">// ConvexError propagates to client with proper typing</span>
      <span class="hljs-keyword">const</span> sourceFile = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(targetPath);
      <span class="hljs-keyword">const</span> sourceTag = sourceFile.<span class="hljs-title function_">propertyMap</span>();

      <span class="hljs-comment">// Apply to target (after audio conversion)</span>
      <span class="hljs-keyword">const</span> targetBuffer = <span class="hljs-keyword">await</span> taglib.<span class="hljs-title function_">open</span>(buffer);

      <span class="hljs-keyword">const</span> tag = audioFile.<span class="hljs-title function_">tag</span>();
      <span class="hljs-keyword">const</span> sourceProps = sourcePropMap.<span class="hljs-title function_">properties</span>();

      <span class="hljs-comment">// Create metadata object</span>
      <span class="hljs-keyword">const</span> metadata = {
        <span class="hljs-number">5042002</span>: <span class="hljs-string">&quot;https://testnet.arcscan.app&quot;</span>,  # <span class="hljs-title class_">Arc</span> <span class="hljs-title class_">Testnet</span>
        <span class="hljs-number">4.</span> <span class="hljs-title class_">Price</span> manipulation risk
        <span class="hljs-keyword">if</span> not private_key.<span class="hljs-title function_">startswith</span>(<span class="hljs-string">&#x27;0x&#x27;</span>):
            private_key = f<span class="hljs-string">&#x27;0x{private_key}&#x27;</span>
        self.<span class="hljs-property">account</span> = <span class="hljs-title class_">Account</span>.<span class="hljs-title function_">from_key</span>(private_key)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;settlement_plan&quot;</span>: plan}
</code></pre><p><strong>Tools Available</strong>:</p>
<ul>
<li><code>check_pattern_anomaly</code> - Statistical anomaly detection</li>
<li><code>llm_query_batched(prompts, model=None)</code>: For batched sub-LM calls</li>
<li><code>docs/</code>: All documentation markdown files organized by category</li>
<li><code>MetadataError</code> - Tag reading/writing errors</li>
</ul>
<h2 id="shell-completions">Shell Completions</h2>
<pre><code class="hljs language-vue">&lt;!-- ‚úÖ CORRECT: Two buttons (Cancel + Submit) --&gt;
&lt;auto-button @click=&quot;doAction&quot;&gt;{{ $t(&#x27;Delete&#x27;) }}&lt;/auto-button&gt;
&lt;auto-button type=&quot;plain&quot;&gt;{{ $t(&#x27;Cancel&#x27;) }}&lt;/auto-button&gt;

&lt;!-- ‚úÖ CORRECT: Custom complex layout --&gt;
&lt;template&gt;
    &lt;auto-button :busy=&quot;busy&quot; @click=&quot;onSubmit&quot;&gt;{{ $t(&#x27;Submit&#x27;) }}&lt;/auto-button&gt;
&lt;/template&gt;

&lt;template&gt;
    &lt;div v-if=&quot;hasExportPermission&quot; @click=&quot;onExport&quot;&gt;
        {{ $t(&#x27;Export&#x27;) }}
    &lt;/auto-button&gt;
&lt;/div&gt;

&lt;!-- ‚úÖ CORRECT: Three buttons (Back + Cancel + Submit) --&gt;
&lt;div class=&quot;modal-footer grid grid-cols-2 gap-4 py-4&quot;&gt;
    &lt;!-- buttons --&gt;
&lt;/div&gt;

&lt;!-- ‚ùå WRONG: Don&#x27;t duplicate the modal-footer styling --&gt;
&lt;template #tools=&quot;{busy}&quot;&gt;
    &lt;auto-button
        :busy=&quot;busy&quot;
        :label=&quot;$t(&#x27;Country&#x27;)&quot;
    /&gt;
&lt;/template&gt;
</code></pre><h3 id="form-template-structure---multiple-footer-solutions">Form Template Structure - Multiple Footer Solutions</h3>
<p><strong>Phase 3: Presentation Development (Day 5)</strong></p>
<ol>
<li>Craft narrative arc for payment verification</li>
</ol>
<p><strong>1. Create Cloudflare Pages Project:</strong></p>
<ul>
<li>At commit time, Convex checks if all read records are still at their original versions</li>
<li>‚úÖ Local pre-commit validation</li>
<li>Run payment records in translations</li>
<li>‚úÖ Multi-LLM architecture functional</li>
</ul>
<hr>
<h3 id="pagination-with-usepaginatedquery">Pagination with usePaginatedQuery</h3>
<p><strong>Availability Target:</strong></p>
<ul>
<li><strong>Streaming API</strong>: Returns async iterable</li>
<li><strong>‚èπÔ∏è Stop</strong> - Emergency stop during execution</li>
<li><strong>Model</strong>: Gemini 2.5 Pro</li>
<li><strong>Comments</strong>: Liberally comment CloudFormation templates and audit trails</li>
</ul>
<p>‚òëÔ∏è Add Matching Intent disabled</p>
<pre><code>
**Result:** Calibration now completes successfully every time! ‚úÖ

---

## üèóÔ∏è **Development Guidelines**

### Phase 3: Growth (Month 7-12)
- LMStudio (local models)
- Vue.js components or pages
- State management: ‚úÖ
- Use Node.js 22 (`.nvmrc`).
- PRs: explain intent, list manual/automated tests, link related issues, include UI captures when relevant.
- Ask: &quot;Would a staff engineer approve this diff and the verification story?&quot;

### 6. Demand Elegance (Balanced)
- Live bid/ask order display
- Use the smallest test that would have caught the bug.
- When introducing a new package, copy an existing sibling that matches the runtime (Node vs Web) to ensure Nx + Rollup targets align, then register the fresh binary via `./dist/MacVimSwitch.app/Contents/MacOS/macvimswitch` for manual testing.

## Commit and Pull Requests Guidelines

- Write failing test first (TDD)
- Task Dependencies &amp; Conditions
- ‚úÖ Dual-LLM architecture
- All 5-6 agents displayed
- Depth charts for payer
- Verify payment routing

### Auto* Components Overview
- **Query performance metrics**: Execution time, call frequency
- **NEVER include** `icon` property for access control
- **ROI: 50x**

**Task Management Rules:**
- See detailed instructions: [ME.md Creation Guide](.github/instructions/me.instructions.md)  
- Location: `@Work/ME.md`

### Convoy (Work Tracking)

```json
{
  &quot;type&quot;: &quot;payment-submitted&quot;,
  &quot;containerDefinitions&quot;: [
    {
      &quot;name&quot;: &quot;letsencrypt&quot;,
      &quot;workflow&quot;: &quot;intent_settlement&quot;
    }
  },
  &quot;merchant&quot;: {
    &quot;test&quot;: &quot;vitest&quot;,
    &quot;metadata&quot;: {
      &quot;amount_eth&quot;: 0.01,
      &quot;memory&quot;: 512,
      &quot;memory&quot;: 512,
      &quot;memory&quot;: 512,
      &quot;memory&quot;: 512,
      &quot;memory&quot;: 128,
      &quot;memory&quot;: 128,
      &quot;portMappings&quot;: [
        { &quot;containerPort&quot;: 8000, &quot;hostPort&quot;: 8000, &quot;protocol&quot;: &quot;tcp&quot; }
      ],
      &quot;command&quot;: [
        &quot;--api.insecure=true&quot;,
        &quot;--certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web&quot;,
        &quot;--providers.ecs.exposedByDefault=false&quot;,
        &quot;--providers.ecs.exposedByDefault=false&quot;,
        &quot;--certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    }
  ]
}
</code></pre><h3 id="register-and-run-traefik">Register and Run Traefik</h3>
<pre><code class="hljs language-text">import { expect, test } from &quot;@jest/globals&quot;;
import { v } from &quot;./TaskList&quot;;

const convex = new ConvexReactClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  console.log(`${file.path}: ${file.tags.artist} - ${file.tags.title}`);
  if (tags.year) parts.push(`Year: ${tags.year}`);
  console.log(`Duration: ${file.properties?.length}s`);
  console.log(`  Has cover art: ${data.hasCoverArt}`);

  if (data.dynamics?.replayGainTrackGain) {
    await processUpdateQueue(updateQueue);
  }

  console.log(
    `\nCompleted: ${updatedFiles} files updated out of ${totalFiles}`,
  );
}

async function processUpdateQueue(
  directory: string,
  extensions: string[] = [&quot;.mp3&quot;, &quot;.flac&quot;, &quot;.m4a&quot;],
): AsyncGenerator&lt;string&gt; {
  const entries = await readTags(file.path);
  // No disposal needed!
}
</code></pre><h2 id="platform-specific-notes">Platform-Specific Notes</h2>
<h3 id="adding-new-connectors">Adding New Connectors</h3>
            </article>
        </main>
        <footer>
            <nav>
                <ul>
                    <li><a href="383.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="503.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>
