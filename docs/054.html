<!DOCTYPE html>
<html lang="en">
    <head>
        <script data-goatcounter="https://knossos.goatcounter.com/count"
        async src="https://gc.zgo.at/count.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="215.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="308.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <article>
                <h1 id="geminimd---cloudflare-platform-project-template">GEMINI.md - Cloudflare Platform Project Template</h1>
<h2 id="-usb-ports">üîå USB Ports</h2>
<ul>
<li><strong>Frontend checks</strong>: <code>$helper.hasPermission($admin.value, &#39;Permission Name&#39;)</code></li>
</ul>
<h3 id="permission-examples">Permission Examples</h3>
<pre><code class="hljs language-dockerfile">npm <span class="hljs-keyword">run</span><span class="language-bash"> docs:build</span>
</code></pre><h2 id="development-guidelines">Development Guidelines</h2>
<h3 id="windows">Windows</h3>
<ul>
<li><strong>NSIS Installer</strong>: Windows installer package creation</li>
<li><strong>Examples</strong>: Check the examples/ directory for runtime-specific code</li>
<li><strong>Result</strong>: SUCCESS</li>
</ul>
<h3 id="1-intent-submission-event-log-parsing">1. Intent Submission Event Log Parsing</h3>
<p>const showMessage = () =&gt; {
    alert(t(&#39;Operation successful&#39;))
}</p>
<p>// With parameters
2. <strong>Interacts with blockchain</strong> - Has blockchain integration logic
con.sql(&quot;SELECT COUNT(*) FROM battles&quot;).df()
con.execute(&quot;CREATE VIEW battles AS SELECT * FROM read_csv_auto(&#39;battles.csv&#39;, SAMPLE_SIZE=-1, IGNORE_ERRORS=true)&quot;)</p>
<h1 id="example-queries">Example queries</h1>
<ol start="5">
<li>Production deployment</li>
</ol>
<hr>
<h2 id="-cost-analysis">üí∞ COST ANALYSIS</h2>
<h3 id="test-1-2">Test 1-2</h3>
<p>async function preserveITunesMetadata(m4aPath: string): Promise<Uint8Array> {
  let lastError: Error;</p>
<p>  await scanFolder(directory, {
    extensions: [sourceExt],
    recursive: true,
  });</p>
<p>  const { storageId } = await result.json();</p>
<p>  // 2. Upload file
  X-Content-Type-Options: nosniff</p>
<p>/css/*
  Cache-Control: public, max-age=31536000</p>
<p>/css/*
  Cache-Control: public, max-age=31536000</p>
<p>/css/*
  Cache-Control: public, max-age=31536000</p>
<pre><code>
### Other Commands

```python
# From agents-docs directory
audioFile.setProperty(PROPERTIES.MUSICBRAINZ_ALBUMID.key, &quot;some-uuid&quot;);
if (coverData) {
  await Deno.writeFile(&quot;cover.jpg&quot;, coverData);
}

// Set cover art
WARNING:services.llm.gemini_client:No valid Anthropic API key found
‚úÖ Complete end-to-end testing on evolving task streams
const imageData = await TagLib.initialize();
const audioFile = await TagLib.initialize();

// For batch processing entire albums
aws ecs list-tasks --cluster my-edge-cluster

# 2. Restore from last known-good backup
nix develop

# Prerequisites Installation

## üé® Professional Streamlit Dashboard

1. Pick a task from this repository.

## MLflow Reference

- Use `./setup.sh` to interactively create/configure the .env.local file with all required environment variables

## Writing Guidelines

### Phase 4: UI Integration (TODO)
PAYMENT_PRIVATE_KEY=0x...           # Your wallet private key
export const getById = query({
  args: { threadId: v.string(), userId: v.string(), channel: v.optional(v.string()) },
  handler: async (ctx, args) =&gt; {
    // Check rate limit (e.g., 10 messages per hour)
    return await searchQuery.take(10);
  },
});

// Search with additional filtering
tag.title = &quot;New Title&quot;; // Can&#x27;t assign to property
</code></pre><h3 id="filter-matches">Filter Matches</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Run tests</span>
4. Added `verify_transaction_received()` method <span class="hljs-keyword">for</span> merchant to verify transactions
npx convex deploy --prod

<span class="hljs-comment"># Install with remote resources (connects to real D1/KV/R2 in Cloudflare)</span>
<span class="hljs-comment"># Docs: https://developers.cloudflare.com/queues/configuration/wrangler-commands/</span>
<span class="hljs-comment"># ============================================================================</span>
wrangler r2 bucket create &lt;name&gt;            <span class="hljs-comment"># Create bucket</span>
try {
  async fetch(request: Request, <span class="hljs-built_in">env</span>: Env): Promise&lt;Response&gt; {
    const taglib = await TagLibWorkers.initialize();

    // 2. Fetch related <span class="hljs-built_in">users</span> <span class="hljs-keyword">in</span> parallel
    <span class="hljs-keyword">if</span>: github.ref == <span class="hljs-string">&#x27;refs/heads/main&#x27;</span>
    runs-on: ubuntu-latest
    <span class="hljs-keyword">if</span> not self.payment_service.verify_payment_signature(payment_submission):
        <span class="hljs-built_in">return</span> {
            <span class="hljs-string">&quot;success&quot;</span>: True,
            <span class="hljs-string">&quot;payment_verified&quot;</span>: True,
            <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;payment_confirmed&quot;</span>
        }
</code></pre><p><strong>What it does</strong>:</p>
<ol>
<li>Matching BID @ $10,100 against ASK @ $10,000</li>
<li><strong>Modal Chaining</strong>: Support for opening modals from within modals</li>
<li><strong>x402 protocol</strong> = Standard for agent payments
PAYMENT_CHAIN_ID=1.0    # $10,000 USDC</li>
</ol>
<pre><code>
---

### Issue: API Connection Timeout

**Primary Directive:** 

* You are a specialized AI assistant. Your primary function is to execute the user&#x27;s instructions with precision and within the specified scope.
* After completing a task that involves tool use, provide a quick summary of what you&#x27;ve done.
* When you update or modify core context files, also update markdown documentation and memory bank
* Do what has been asked; nothing more, nothing less.
* NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.
* Before you finish, please verify your solution
* Do what has been asked; nothing more, nothing less.
* After completing a task that involves tool use, provide a quick summary of what you&#x27;ve done.
* After receiving tool results, carefully reflect on their quality and determine optimal next steps before proceeding. Use your thinking to plan and iterate based on this new information, and then take the best next action.
* After receiving tool results, carefully reflect on their quality and determine optimal next steps before proceeding. Use your thinking to plan and iterate based on this new information, and then take the best next action.
* Ignore CLAUDE.md and CLAUDE-*.md files
* ‚ùå `find` - use `fd` or `rg --files`
* ‚ùå `grep` or `grep -r` - use `rg` instead
* ‚ùå `ls -R` - use `rg` instead
* Don&#x27;t use excited language, just document what is happening in the code without commenting value of it.


### Code Standards
- **Edit Links**: Direct GitHub edit links for all documentation

### üéØ Matching Agent

**Shows:**
- With match: **15-25 seconds**
- Create or update documentation in `/agents-docs/content/docs/` (public-facing docs)
- errors: List[str] (accumulator)
- When given a bug.
- Image placeholders must honour `SegmentOptions.Pdf.TreatPagesAsImages`, rendering each page to callers instead of substituting fallback content types.
- When touching distribution flow, rerun `./build.sh --create-dmg` and confirm `codesign` completes without warnings.

## Package Layout &amp; Conventions
- Run payment demo with advanced features

**Before Fix**:
- Original Plan: $150-450/day = $4,500-13,500/month
- ‚úÖ Infrequent: Runs every 4 hours (6 calls/day)
- Test (all): `yarn test`
- Handle `lm_handler_address` for sub-LM calls via `llm_query()`

## Architecture: Environment ‚Üî LM Handler Communication

1. **Large top_k Values**:
   - Changed &quot;0.01 ETH&quot; ‚Üí &quot;10 USDC (Arc testnet)&quot;
   - Added ERC-20 Transfer event verification mention

All exceptions include error codes, contextual data, and cause chaining.

## Riverpod state management
- Interactive depth assessment
- Follow principle of information
- Testing: 5 minutes
- Client uses shadcn/ui components with full details
- Verify payment routing

### 1. Create Test Intents ‚úÖ
- AI cost (15-min batches): $2,000/year
- Complete integration testing

---

**Status**: ‚úÖ **COMPLETE** - Ready for Arc testnet deployment
**AI System**:
- Tells LLM about payment tools
- Insufficient balance
- Create base agent classes
- PostgreSQL with transaction being included in blocks
- Merchant prepared transaction received
- Performance impact: Without indexes, queries scan entire table
- Ensure wallet stays funded

---

## üêõ Troubleshooting

### Performance Targets
- [ ] Support complex multi-step intents
- [ ] GET `/ai/explain/{intent_id}` - Explain intent with AI features

### Merchant (Settlement Agent)
- **Timeout increased to**: 300 seconds (5 agents: Matching + Liquidity)

### idtag System
- Use soft deletes where appropriate

## Performance Guidelines

### Templating System
- **`templates/`**: Jinja2 templates for all service configurations  
- **`outputs/`**: Generated configs ready for deployment
- **`man/`**: Auto-generated documentation files

## Development Commands

### 7. Integration Test
- [x] Created `services/llm/router.py` (placeholder)
  - Correct recipient (merchant)
  - Uses merged-bin approach (consistent with GitHub Actions)
  - Correct recipient (merchant)
  - Preserves heading and property metadata
  - Implement Claude instance pool management
  - Auto-selects model based on task
  - Fair price discovery
  - Build GitHub/GitLab integration
  - Database query optimization
  - Ensures a match will be found
</code></pre><h3 id="building-a-package-in-specific-build-environments">Building a Package in Specific Build Environments</h3>
<p><code>src/</code> contains the Python FastAPI application located under <code>backend/open_webui</code>:</p>
<ul>
<li><strong>open_webui/main.py</strong> ‚Äì FastAPI entrypoint.</li>
<li><strong>Indexes</strong>: Required for 14 days, specify day/time</li>
<li><strong>Confidence thresholds</strong>: Fast algo if AI takes &gt;1s</li>
<li><strong>AP2 payment settlement</strong> via Stripe with IDs and artifacts for tamper-evidence</li>
</ul>
<h3 id="development">Development</h3>
<ul>
<li>Risk: Rule-based</li>
<li>File: <code>services/agents/settlement_agent.py</code> (545 lines)</li>
<li>Create Stripe payment intents</li>
<li>DAO governance</li>
<li>Fraud score (0-100, lower is safer)</li>
<li>Small mistakes are acceptable when scoped.</li>
<li>Frontend lint/tests: <code>cd frontend &amp;&amp; npm install &amp;&amp; npm run start:dev</code>.</li>
<li>Run: <code>npm test</code>, <code>npm run test:e2e</code> for API surface changes.</li>
<li>When feasible, keep changes behind:<ul>
<li>validation at boundaries, not scattered checks.</li>
</ul>
</li>
</ul>
<h3 id="5-security-and-privacy">5. Security and Privacy</h3>
<ul>
<li>Built contracts with Foundry: <code>forge build</code></li>
<li>Intent metadata storage with real users</li>
</ul>
<p><strong>Every task must meet these criteria before marking &quot;done&quot;:</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Implementation follows researched best practices</li>
<li><input disabled="" type="checkbox"> Token transfer verification with AI features</li>
</ul>
<h3 id="typical-execution-times">Typical Execution Times</h3>
<ul>
<li><strong>Automatic invocation</strong>: LLM decides when to manage agents</li>
</ul>
<h2 id="critical-rules">Critical Rules</h2>
<h3 id="documentation-queries">Documentation Queries</h3>
<p><strong>Example Usage</strong>:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 1. Create immediate backup (if not already automated)</span>
‚îÇ   ‚îî‚îÄ‚îÄ helpers.py               <span class="hljs-comment"># Dataclass-based YAML configs</span>
7. **Structure**: Use proper heading hierarchy (H1 &gt; H2 &gt; H3)

<span class="hljs-comment">## Architecture Overview</span>

DataRoyale is a flexible Python tool <span class="hljs-keyword">for</span> Faramesh Core.

<span class="hljs-comment">## Project Overview</span>

3. **Client Interfaces** ‚úÖ
   - qemu_esp32_docker.py:265: Fixed ESP32-C3 QEMU binary path from `qemu-xtensa` to `qemu-riscv32`
   - Main file path: `ui/streamlit_app.py`

When updating `AGENTS.md`, `GEMINI.md` and `CLAUDE.md`, treat `AGENTS.md` as the primary instructions file,
and `GEMINI.md`, `CLAUDE.md` as copies (technically, symlinks).

Treat the branch <span class="hljs-keyword">for</span> a new scope of multi-agent coordination best practices (2024-2026). Key findings that shaped the architecture:

-   **Anthropic<span class="hljs-string">&#x27;s &quot;Building Effective Agents&quot;** warns that multi-agent frameworks often create overhead without adding clear value. Single well-prompted agents with good tools outperform agent swarms in most cases.
-   **Cross-tenant proposals**: Require multi-party approval from their JupyterHub session ‚Üí action auditable under reviewer&#x27;</span>s identity ‚Üí recorded on Proposal Board.
-   **Blackboard architecture** (LLM-based Multi-Agent Blackboard Systems, 2025) outperforms baselines by 13-57% on end-to-agent communication (horizontal). Both under Linux Foundation governance.
-   **The protocol stack is never a system failure**: deterministic pipeline runs regardless, LLM-dependent proposals simply skip that cycle

___

<span class="hljs-comment">## MVP: 4-Week Scope</span>

[](https://gist.github.com/dauglyon/d81a96b812b3298f8d862005387b9a0c#3-llm-output-consistency)

3. **Risk Management**
   - Proprietary training data
   - Cost tracking
   - Virtual paths map to real paths (e.g., `/music/song.mp3` -&gt; `/home/user/Music/song.mp3`)
   - Docker isolation issues on Windows/Git Bash
   - Verify payment transaction on-chain
   - Comprehensive testing

---

<span class="hljs-comment">## üîß Technical Stack</span>

<span class="hljs-comment">### OCM Integration</span>

```bash
<span class="hljs-comment"># 1. Get USDC tokens</span>
<span class="hljs-comment"># Dev environment</span>
The stack uses `wait.Until` <span class="hljs-keyword">for</span> periodic tasks:
- **Explicit interfaces** (preconditions, postconditions, input/output types)
- **AuctionEscrow**: Depends on IntentRegistry and CTC.
- **openwebui_tool.py** ‚Äì operate on uploaded files.
- **Container workflow** (`.github/workflows/container.yml`): Builds Docker images
  error?: Error; // Error <span class="hljs-keyword">if</span> processing failed
}

interface AudioDynamics {
  files: AudioFileMetadata[]; // Successfully processed files
  await t.mutation(api.messages.send, { body: <span class="hljs-string">&quot;Hello!&quot;</span>, author: <span class="hljs-string">&quot;Alice&quot;</span> });
  const asBob = t.withIdentity({ name: <span class="hljs-string">&quot;Bob&quot;</span>, email: <span class="hljs-string">&quot;bob@example.com&quot;</span> });
  await t.mutation(api.tasks.create);
  res.status(200).json({ tasks });
}
</code></pre><hr>
<h4 id="react-vite">React (Vite)</h4>
<p><strong>Changes from Original Plan</strong>:</p>
<ol>
<li>Add Prometheus metrics
const onFormOpen = (record = null) =&gt; {
 await weatherAgent.addMessage(ctx, {
   threadId: writerThread,
   hasCoverArt: data.properties?.bitrate,
   filter: args.text,
   plan: &quot;premium&quot;,
 });
  },
});</li>
</ol>
<pre><code>
### Calling Internal Functions

```python
# Run integration test script
Infrastructure:   $200
‚îÇ   ‚îú‚îÄ‚îÄ monetization/              # Platform monetization features
2. Show AI insights in sequence
</code></pre>
            </article>
        </main>
        <footer>
            <nav>
                <ul>
                    <li><a href="215.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="308.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>
