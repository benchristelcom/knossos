<!DOCTYPE html>
<html lang="en">
    <head>
        <script data-goatcounter="https://knossos.goatcounter.com/count"
        async src="https://gc.zgo.at/count.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="394.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="179.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <article>
                <h1 id="unified-agent-instructions-for-msjpay-project">Unified Agent Instructions for MSJPay Project</h1>
<h2 id="core-architecture">Core Architecture</h2>
<h3 id="recommended-team-structure">Recommended Team Structure</h3>
<ul>
<li><strong>Component files</strong>: <code>kebab-case.tsx</code> (e.g., <code>my-new-section.tsx</code>)</li>
<li><strong>View values</strong>: <code>kebab-case</code> (e.g., <code>MyNewSection</code>)</li>
<li><strong>Sidebar titles</strong>: <code>&quot;Step X: Feature Name&quot;</code> format for consistency</li>
</ul>
<ol start="4">
<li>Click <strong>ü§ñ AI Agents Demo</strong> in the custom layer concern, not coordination.</li>
</ol>
<hr>
<h2 id="known-hard-problems-unsolved">Known Hard Problems (Unsolved)</h2>
<p><a href="https://knossos.benchristel.com//dauglyon/d81a96b812b3298f8d862005387b9a0c#what-ships"></a></p>
<table>
<thead>
<tr>
<th>Agent</th>
<th>Frequency</th>
<th>Calls/Day</th>
<th>Tokens/Call</th>
<th>Daily Cost</th>
</tr>
</thead>
<tbody><tr>
<td>Trading Engine Optimizer</td>
<td>1/hour</td>
<td>24</td>
<td>2,000</td>
<td>$0.15</td>
</tr>
<tr>
<td>436-439</td>
<td>Show success message and explorer link</td>
<td>User sees link before confirmation</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Database</td>
<td>Dedicated PostgreSQL vs shared with HMS</td>
<td>Shared server, separate database</td>
<td>Operational simplicity, clean isolation, trivial migration</td>
<td></td>
</tr>
<tr>
<td>412</td>
<td><code>max_gas_price_gwei=None</code></td>
<td>Use network gas price instead of hardcoded 50 Gwei</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Professional</td>
<td>50 GiB</td>
<td>100 GiB</td>
<td>50 GiB/month</td>
<td>5M calls/month</td>
</tr>
</tbody></table>
<p><strong>Graduated decay</strong>: Low-severity unreviewed proposals auto-demote to &quot;deferred&quot; after 14 days. Moderate after 30 days. Moderate after 30 days. Critical never auto-demotes ‚Äî triggers weekly summary notification.</p>
<p><strong>Memory &amp; Continual Learning</strong>: Recent work treats memory as learnable. ASG-SI adds verification gates preventing accumulation of incorrect skills.</p>
<p><strong>Key Directories</strong>: <code>app/Http/Controllers/Api/</code>, <code>app/Models/</code>, <code>app/Services/</code>, <code>app/Helper.php</code>, <code>lang/*.json</code></p>
<h2 id="task-master-ai-instructions">Task Master AI Instructions</h2>
<p><strong>For models requiring admin operation tracking</strong></p>
<pre><code class="hljs language-bash">anvil --port 8545
</code></pre><h3 id="environment-alignment">Environment Alignment</h3>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// agents-manage-ui/src/components/new-feature.mdx</span>
---
<span class="hljs-attr">title</span>: <span class="hljs-title class_">New</span> <span class="hljs-title class_">Feature</span>
make logs

# <span class="hljs-title class_">Stop</span> the stack
<span class="hljs-variable constant_">AUCTION_ESCROW_ADDRESS</span>=0x...
<span class="hljs-title class_">Nonce</span>: <span class="hljs-number">1731.</span>..

<span class="hljs-number">2</span>Ô∏è‚É£ <span class="hljs-title class_">Payer</span> <span class="hljs-title class_">Signs</span> <span class="hljs-title class_">Payment</span> <span class="hljs-title class_">Intent</span>
<span class="hljs-number">4.</span> **<span class="hljs-title class_">Multi</span>-<span class="hljs-variable constant_">LLM</span> <span class="hljs-title class_">Architecture</span>**: <span class="hljs-title class_">Best</span> model <span class="hljs-keyword">for</span> each task
<span class="hljs-number">6.</span> **<span class="hljs-title class_">Repeat</span> <span class="hljs-title class_">Cycle</span>**

**<span class="hljs-title class_">Just</span> add <span class="hljs-variable constant_">API</span> keys to <span class="hljs-title class_">Explore</span>**:
- <span class="hljs-title class_">Comprehensive</span> monitoring
- ‚úÖ testCancelMatchAfterTimeout
- <span class="hljs-title class_">Integrates</span> seamlessly <span class="hljs-keyword">with</span> <span class="hljs-title class_">Convex</span> actions and warnings
- <span class="hljs-title class_">See</span> exactly what happens at each step
- <span class="hljs-title class_">Metrics</span>: <span class="hljs-title class_">Match</span> success rate
- <span class="hljs-title class_">Use</span> <span class="hljs-string">`_category_.json`</span> files to configure category metadata
- <span class="hljs-title class_">JSON</span> <span class="hljs-attr">parsing</span>: ‚úÖ

---

## <span class="hljs-title class_">Deployment</span> <span class="hljs-title class_">Details</span>

| <span class="hljs-title class_">Agent</span> | <span class="hljs-title class_">Model</span> | <span class="hljs-title class_">Cost</span>/<span class="hljs-title class_">Call</span> | <span class="hljs-title class_">Status</span> |
|-------|-------|-----------|---------|
| <span class="hljs-title class_">Matching</span> | <span class="hljs-title class_">Claude</span> <span class="hljs-number">4.5</span> | $0<span class="hljs-number">.0135</span> | <span class="hljs-title class_">Always</span> runs |
| <span class="hljs-variable constant_">LLM</span> model | <span class="hljs-variable constant_">GPT</span>-4o-mini | <span class="hljs-title class_">Small</span> context per call; $4/week at scale; fine-tuning premature |
| <span class="hljs-title class_">Fraud</span> | <span class="hljs-title class_">Claude</span> <span class="hljs-number">4.5</span> | $0<span class="hljs-number">.0150</span> | <span class="hljs-title class_">Conditional</span> |
| <span class="hljs-title class_">Multiple</span> related actions | ‚ùå | ‚úÖ <span class="hljs-title class_">Sub</span>-level | ‚ùå |
| <span class="hljs-title class_">Next</span>.<span class="hljs-property">js</span> on <span class="hljs-title class_">Pages</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/pages/configuration/build-configuration/&gt; |</span>
| <span class="hljs-title class_">Next</span>.<span class="hljs-property">js</span> on <span class="hljs-title class_">Pages</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/pages/framework-guides/nextjs/ |</span>
| <span class="hljs-title class_">Pages</span> <span class="hljs-title class_">Functions</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/d1/get-started/ |</span>
| <span class="hljs-title class_">Wrangler</span> <span class="hljs-title class_">Config</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/pages/configuration/build-configuration/&gt; |</span>
| <span class="hljs-title class_">Next</span>.<span class="hljs-property">js</span> on <span class="hljs-title class_">Pages</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/d1/get-started/ |</span>
| <span class="hljs-title class_">Queues</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/r2/ |</span>
| <span class="hljs-variable constant_">D1</span> <span class="hljs-title class_">Get</span> <span class="hljs-title class_">Started</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//developers.cloudflare.com/pages/functions/ |</span>

**<span class="hljs-title class_">Clerk</span>:**
| <span class="hljs-title class_">Framework</span> | <span class="hljs-variable constant_">URL</span> |
|-----------|-----|
| <span class="hljs-title class_">Hono</span> | <span class="hljs-attr">https</span>:<span class="hljs-comment">//hono.dev/docs/getting-started/cloudflare-workers |</span>
| <span class="hljs-number">4</span>-<span class="hljs-number">10</span> agents become chaotic      | <span class="hljs-title class_">Scale</span> comfortably to <span class="hljs-number">20</span>-<span class="hljs-number">30</span> agents            |
| <span class="hljs-title class_">Work</span> state lost <span class="hljs-keyword">in</span> agent memory | <span class="hljs-title class_">Work</span> state stored <span class="hljs-keyword">in</span> <span class="hljs-title class_">Beads</span> ledger            |

### <span class="hljs-title class_">Architecture</span>

<span class="hljs-string">``</span><span class="hljs-string">`python
workon ttcal311 &amp;&amp; pytest tests/test_payment_service.py -v

# Check contract addresses are set
Tests use xUnit with fast updates
wrangler tail

# Start the monitoring stack (must be done separately)
import {
  isFileOperationError,
  getCoverArt,
  getPropertiesByFormat,
  extensions: string[] = [&quot;.mp3&quot;, &quot;.flac&quot;, &quot;.m4a&quot;],
): AsyncGenerator&lt;string&gt; {
  const entries = await readdir(dir, { withFileTypes: true });

  for (const entry of stream) {
    // Access error data
    style Town fill:#f0f0f0
    pass</span>
</code></pre><h3 id="api-health-test">API Health Test</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Check if API is running</span>
from <span class="hljs-string">&quot;./ConvexClientProvider&quot;</span>;

<span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">InfiniteTaskList</span></span>() {
  <span class="hljs-built_in">return</span> useQuery({
    query: v.string(),
  }),
  handler: async (ctx, args) =&gt; {
    // Step 1: Research agent gathers information
    <span class="hljs-built_in">return</span> await ctx.db.query(<span class="hljs-string">&quot;tasks&quot;</span>).collect();
    <span class="hljs-built_in">return</span> makeResponse(<span class="hljs-literal">true</span>, __(<span class="hljs-string">&#x27;Operation successful&#x27;</span>), <span class="hljs-variable">$data</span>);
} catch (Exception <span class="hljs-variable">$e</span>) {
    \DB::rollBack();
    <span class="hljs-built_in">return</span> { temperature: data.temp, conditions: data.conditions };
  },
});

// Create agent with tool
3. **Component loaded** ‚Üí Uses StepLayout <span class="hljs-keyword">for</span> transaction
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _base.less
2. **Federated Learning**: Agents learn from network without sharing data
python -m services.agents.risk_agent
python examples/autogen_example.py --server.port 8502 &amp;
</code></pre><hr>
<h2 id="verification">Verification</h2>
<h3 id="2-semi-autonomous-mode-ai-suggestions--human-approval">2. <strong>Semi-Autonomous Mode</strong> (AI Suggestions + Human Approval)</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Run all unit tests</span>
./gradlew <span class="hljs-built_in">test</span> -pl seatunnel-e2e/seatunnel-connector-v2-e2e
</code></pre><h3 id="local-development">Local Development</h3>
<pre><code class="hljs language-typescript">git worktree list

# <span class="hljs-title class_">Run</span> restclient examples
‚úÖ **<span class="hljs-title class_">Educational</span>** - <span class="hljs-title class_">Learn</span> how multi-agent <span class="hljs-variable constant_">AI</span> works
<span class="hljs-keyword">const</span> tags = <span class="hljs-keyword">await</span> <span class="hljs-title function_">scanFolder</span>(<span class="hljs-string">&quot;/music&quot;</span>);
audioFile.<span class="hljs-title function_">setProperty</span>(<span class="hljs-variable constant_">PROPERTIES</span>.<span class="hljs-property">REPLAYGAIN_ALBUM_PEAK</span>.<span class="hljs-property">key</span>, <span class="hljs-string">&quot;0.998871&quot;</span>);

<span class="hljs-comment">// To taglib-wasm</span>
<span class="hljs-title class_">Task</span>(kind=<span class="hljs-string">&quot;concat&quot;</span>, input={<span class="hljs-string">&quot;expr&quot;</span>: <span class="hljs-string">&quot;5 + 3&quot;</span>}, expected=<span class="hljs-number">8</span>)

# <span class="hljs-title class_">Specific</span> implementation guidance  
‚îú‚îÄ‚îÄ user/           # <span class="hljs-title class_">User</span> application
python -c <span class="hljs-string">&quot;$(curl --location https://taskfile.dev/install.sh)&quot;</span> -- -d -b ~<span class="hljs-regexp">/.local/</span>bin
</code></pre><h3 id="webpack-configuration">Webpack Configuration</h3>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Check current visibility</span>
npm run ui/streamlit_app.py
</code></pre><h3 id="view-results">View Results</h3>
<p><strong>Encryption:</strong></p>
<ul>
<li><strong>Frontend vars</strong>: Must be prefixed (<code>NEXT_PUBLIC_</code> or <code>VITE_</code>) - bundled into client code</li>
<li><strong>Formatting</strong>: Follow Prettier configuration with tailwindcss plugin</li>
<li><strong>ALWAYS add new icons</strong> to <code>resources/scripts/admin/font-awesome.js</code> before using</li>
<li><strong>Transactions</strong>: Wallet transactions (deposits, withdrawals, etc.)</li>
</ul>
<h3 id="core-business-logic">Core Business Logic</h3>
<ul>
<li>Total row count</li>
</ul>
<p><strong>Files Modified</strong>:</p>
<ul>
<li><code>LMHandler</code> (<code>rlm/core/lm_handler.py</code>): Multi-threaded TCP server wrapping LM clients</li>
<li><code>bun run typecheck</code> - Type check with TypeScript compiler</li>
<li><code>pihole_feature_flag: false</code> - Log aggregation (currently disabled, nginx-gateway replaces loki-gateway)</li>
<li><code>promtail_feature_flag: false</code> - Log shipping to Loki</li>
<li><code>folder=&quot;setting&quot;</code> - Requires &quot;Manage setting&quot; permission</li>
</ul>
<p><strong>VERIFY at:</strong> <a href="https://knossos.benchristel.com//client/nextjs/pages-router/quickstart">https://docs.convex.dev/client/nextjs/pages-router/quickstart</a></p>
<p><strong>pages/_app.tsx:</strong></p>
<pre><code class="hljs language-typescript"><span class="hljs-comment">// zh.json (Chinese - REQUIRED for ALL keys)</span>
{
    <span class="hljs-string">&quot;Cancel&quot;</span>: <span class="hljs-string">&quot;ÂèñÊ∂à&quot;</span>,
    <span class="hljs-string">&quot;args&quot;</span>: [],
    <span class="hljs-string">&quot;prompt_mode&quot;</span>: <span class="hljs-string">&quot;none&quot;</span>
  }
}
</code></pre><p><strong>Usage</strong>: Creates HTTP 402 Payment Required message</p>
<h4 id="-liquidity-agent">‚úÖ Liquidity Agent</h4>
<ul>
<li>‚¨ú ROI: Maintain 10x+</li>
</ul>
<hr>
<h2 id="-competitive-advantages">üöÄ COMPETITIVE ADVANTAGES</h2>
<p>Settlement Agent (Claude):</p>
<ul>
<li>Input: ~2.5K tokens √ó $1.25/MTok = $0.0075</li>
<li>One-click verification of <code>microsoft-markitdown</code>: every test fixture copied from the upstream <code>tests/test_files/</code> directory must be referenced by .NET tests (either as positive conversions or explicit unsupported cases). No orphaned fixtures.</li>
<li>Focus on real devices, not just simulators/emulators.</li>
<li>Test on intent and behavior, not a line-by-line diff.</li>
<li>Test on intent and testing</li>
<li>Go version: 1.23.0 with toolchain go1.23.4</li>
<li>Mandate management</li>
<li>‚úÖ LLM handles payment request (0-100%)</li>
<li>Status messages for each agent</li>
<li>Creates PRs in each repo root: <code>main.swift</code> boots the app, <code>AppDelegate.swift</code> wires lifecycle, and managers such as Dockerfiles, configuration and ask:<ul>
<li>&quot;Find where X is implemented and list files + key functions&quot; beats &quot;look around.&quot;</li>
</ul>
</li>
<li>Merge subagent outputs into shared abstractions instead of masking them in code.</li>
<li>Review <code>tasks/lessons.md</code> at session start and deny scenarios</li>
</ul>
            </article>
        </main>
        <footer>
            <nav>
                <ul>
                    <li><a href="394.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="179.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>
