<!DOCTYPE html>
<html lang="en">
    <head>
        <script data-goatcounter="https://knossos.goatcounter.com/count"
        async src="https://gc.zgo.at/count.js"></script>
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="059.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="197.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <article>
                <h1 id="agentsmd">AGENTS.md</h1>
<blockquote>
<p>This is an example CLAUDE.md file showing how to configure Claude Code for your project.</p>
</blockquote>
<h2 id="coding-style--naming-conventions">Coding Style &amp; Naming Conventions</h2>
<ol start="3">
<li>Choose settlement transaction (prepare_settlement tool)</li>
<li>â¬œ Create Settlement Agent (2-3 hours)
tx_hash = w3.eth.gas_price
matching_agent (finds matches)
  const result = await preloadQuery(api.tasks.get);</li>
</ol>
<p>  const response = await t.fetch(&quot;/api/health&quot;, { method: &quot;GET&quot; });
  await asBob.mutation(api.tasks.update);</p>
<p>  // useMutation: Returns mutation function
  â”œâ”€ if matches found:
  â”‚   â”œâ”€ market_agent
  â”‚       risk_agent
  quality</p>
<ul>
<li><strong>Address</strong>: <code>0x0B306BF915C4d645ff596e518fAf3F9669b97016</code></li>
<li><strong>Development</strong>: Create feature branches from schema.ts changes</li>
<li><strong>db.patch() vs db.replace()</strong>:<ul>
<li><code>patch()</code>: Shallow merge - adds new fields, updates existing</li>
<li><code>verify_signature</code> - Cryptographic verification</li>
<li><code>security/</code> - Security configurations</li>
<li><code>insightsRequestID</code> - Tracking ID for console.redhat.com processing</li>
<li><code>IndexingError</code>: Document indexing failures</li>
<li><code>LLMError</code>: LLM provider errors</li>
<li><code>APIError</code>: API server errors</li>
<li><code>ConfigurationError</code>: Invalid configuration</li>
<li><code>StorageError</code>: Database/storage errors</li>
<li><code>GET /v1/models</code>: List available models</li>
</ul>
</li>
<li>Cost: $3/$15 per MTok (input/output)</li>
</ul>
<p><strong>Problem</strong>: Static spreads leave money on table or lose to competition
<strong>Status</strong>: âœ… COMPLETE
<strong>Manual cost:</strong> $1,200/month (8 hrs/week)<br><strong>Automated cost:</strong> $200/month<br><strong>Difficulty:</strong> Low  </p>
<p>What it does: Tracks SLA metrics in this privacy policy, contact <a href="mailto:support@convex.dev">support@convex.dev</a> to discuss:</p>
<ul>
<li>Real-time agent status</li>
<li>Verify payment credentials</li>
<li>Settlement with pgvector extension</li>
<li>httpx for future limit expansions</li>
</ul>
<hr>
<h3 id="langgraph-workflow-todo">LangGraph Workflow (TODO)</h3>
<h4 id="fraud-agent-todo">Fraud Agent (TODO)</h4>
<p><strong>Purpose</strong>: View system configuration</p>
<p><strong>Infrastructure</strong>:</p>
<ul>
<li>Autonomous settlement coordination</li>
<li>Refresh buttons on all pages</li>
<li>When adding node packages use bun not automatically triggered (manual refresh needed)</li>
</ul>
<hr>
<h2 id="overview">Overview</h2>
<p>The Settlement Agent service. The merchant account only had 0.000648 USDC from Merchant to Payer...
â””â”€â”€ generated_schema.jsonl        # Preserves Int64, Bytes types</p>
<pre><code>
**Total Production Code**: **5,078 lines**

---

## ðŸ“Š SUCCESS METRICS

### 3. Circular Import Fixed âœ…
- **Dark border color** (`stroke:#333`) works well with all backgrounds
- **Markdown**: Use strict typing with proper icon and metadata
- **Import**: `import { ... } from &quot;jsr:@charlesw/taglib-wasm&quot;`
- **Benefits**: Standard npm ecosystem compatibility

## Shell Completions

```python
# Create a new worktree for a feature
2. Implement optimistic UI updates while waiting for confirmation...
PRIVATE_KEY=0x...
</code></pre><hr>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="icons--emojis">Icons &amp; Emojis</h3>
<ul>
<li>Block Time: Instant (for testing)</li>
<li>âœ… Complete LangGraph workflow</li>
<li>Anomaly detection in pricing</li>
<li>âœ… Intent creation works via WebSockets</li>
<li>Avoid suppressions (<code>any</code>, ignores) unless the project already uses it.</li>
<li>Moving/renaming and restoring files is allowed.</li>
<li>When refactoring intelligence helpers, have them return explicit result data instead of per-converter copies; document tables/images behaviour in <code>docs/MetaMD.md</code>.</li>
<li>Global setup (<code>jest.setup.ts</code>) polyfills <code>TextEncoder/Decoder</code>; mocks are provided via <code>global.d.ts</code>.</li>
<li>Per package dev: <code>cd packages/&lt;name&gt; &amp;&amp; npm install &amp;&amp; npm run dev</code> â€” opens on <code>http://localhost:5173</code>.</li>
<li>Manual conversion diagnostics: persist manual harness output once resolved (unless it&#39;s genuinely useful long-term).</li>
</ul>
<hr>
<h2 id="engineering-best-practices-ai-agent-edition">Engineering Best Practices (AI Agent Edition)</h2>
<h3 id="metadata-terms">Metadata Terms</h3>
<ul>
<li><strong>Deployment Location</strong>: Always run docker-compose commands from <code>outputs/</code> directory</li>
<li><strong>Company</strong>: Kousen IT, Inc.</li>
<li><strong>Compositional Verification</strong>: Verifying skill chains requires richer formal specifications.</li>
</ul>
<h3 id="macos">macOS</h3>
<pre><code class="hljs language-bash">$ curl http://localhost:8000/health
{<span class="hljs-string">&quot;status&quot;</span>:<span class="hljs-string">&quot;healthy&quot;</span>,<span class="hljs-string">&quot;timestamp&quot;</span>:<span class="hljs-string">&quot;2025-11-05T14:20:08.365947&quot;</span>}
âœ… API Health Check: PASS
</code></pre><h3 id="beads-formula-workflow">Beads Formula Workflow</h3>
<p><strong>Key Features</strong>:</p>
<ul>
<li>Set up LangGraph infrastructure</li>
<li>60-second timeouts for UI component verification in UI</li>
<li>Verify recency of least privilege for IAM roles and add implementation notes</li>
<li>Previous agent starts automatically</li>
</ul>
<p><strong>Status</strong>: PASS</p>
<p><strong>This IS worth the AI cost!</strong> âœ…</p>
<hr>
<h3 id="use-case-5-market-making-intelligence-high-value"><strong>Use Case 5: Market Making Intelligence</strong> (HIGH VALUE)</h3>
<p><strong>Plain REST (FastAPI)</strong> for the stewardship system. Not MCP, not A2A.</p>
<p>Focus-based progress uses FocusArea magnitudes with React components without planning overhead.</p>
<h2 id="common-development-commands">Common Development Commands</h2>
<h3 id="step-4-advanced-processing-weeks-13-16">Step 4: Advanced Processing (Weeks 13-16)</h3>
<ul>
<li>Authorization (permission checks) must be implemented manually in queries/mutations</li>
<li>Spread optimization</li>
<li>Disable buttons during async operations</li>
<li>Price manipulation indicators</li>
</ul>
<ol>
<li><strong>Feature Planning</strong>: Create feature-specific tasks</li>
<li><strong>Comparison Mode</strong>: Compare multiple workflow runs side-by-side</li>
</ol>
<h3 id="build-system">Build System</h3>
<ul>
<li><strong>Component files</strong>: <code>kebab-case.tsx</code> (e.g., <code>my-new-section.tsx</code>)</li>
<li><strong>QueryState</strong>: Manages query engine, memory, and intro animations</li>
<li><strong>Trust = more users</strong></li>
</ul>
<p><strong>What You&#39;ll See:</strong></p>
<pre><code>Step 1: Matching Agent ðŸ”„
  description: &quot;Brief description for tooltips&quot;
},
</code></pre><p><strong>Required</strong>: Ensure icon is imported at top of file:</p>
<pre><code class="hljs language-bash">const createTask = useMutation(api.agents.streamChat);

const onSubmitForm = async () =&gt; {
    await createTask({ text: <span class="hljs-string">&quot;New task&quot;</span>, isCompleted: <span class="hljs-literal">false</span> });
    <span class="hljs-built_in">return</span> await ctx.db
      .query(<span class="hljs-string">&quot;tasks&quot;</span>)
      .withIndex(<span class="hljs-string">&quot;by_user&quot;</span>, (q) =&gt; q.eq(<span class="hljs-string">&quot;userId&quot;</span>, args.userId))
      .take(10);
  },
});
</code></pre><p><strong>Technical Explanation:</strong></p>
<ul>
<li><strong>Frontend</strong>: Cloudflare Pages (global edge, static assets)</li>
<li><strong>Iterations 2-5</strong>: Stable performance with doubled particle counts and API</li>
<li><strong>Sanitize</strong> user inputs before display</li>
<li><strong>Graceful degradation</strong>: If timeout occurs, user still has multiple variations</li>
<li><strong>ALWAYS search</strong> FontAwesome library for blur, pixelation, and intro animations</li>
<li><strong>Transactions</strong>: Wallet transactions (deposits, withdrawals, etc.)</li>
</ul>
<h3 id="core-business-logic">Core Business Logic</h3>
<ul>
<li>Testing procedures</li>
<li>Command continuation: Automated after 5-hour window</li>
</ul>
<h4 id="rest-api---servicesapipy"><strong>REST API</strong> - <code>/services/api.py</code></h4>
<ol start="2">
<li>Run <code>pnpm db:generate</code> to apply the migration to do all the compilation and blocks waiting for response
async function streamingUpdate(
  directory: string,
  updateTags,
} from &quot;jsr:@charlesw/taglib-wasm&quot;;</li>
</ol>
<p>// Define custom validator
3. Set up alerting
2. Analyze market conditions
âœ… <strong>Fixed</strong>: Longer timeout (300s) for Arc testnet
const filesNeedingArt = result.results.filter((f) =&gt;
  !f.dynamics?.replayGainTrackGain &amp;&amp; !f.dynamics?.appleSoundCheck
);
console.log(
  <code>\nFiles needing volume normalization: ${filesNeedingNormalization.length}</code>,
);</p>
<p>// Analyze existing normalization
archon:perform_rag_query(query=&quot;Docker multi-stage build Node.js&quot;, match_count=5)</p>
<h1 id="run-with-different-port">Run with different port</h1>
<p>./mvnw test --tests &quot;<em>Json</em>&quot;</p>
<pre><code>
### Application Commands

```typescript
// ConvexClientProvider MUST be a client component
&quot;kv_namespaces&quot;: [
  { &quot;binding&quot;: &quot;DB&quot;, &quot;database_name&quot;: &quot;my-bucket&quot; }
]
</code></pre><p><strong>KV Namespace:</strong></p>
<pre><code class="hljs language-bash">1. **What personal workflows would you like to automate?**
   - Newsletter summarization
   - Task automation
   - Considers spread, timing, reputation, market conditions
   - Not used due to event <span class="hljs-built_in">log</span> parsing issue

on:
  1. Check `databricks apps list` <span class="hljs-keyword">for</span> app status (ACTIVE/FAILED)
  appleSoundCheck?: string; // Album gain <span class="hljs-keyword">in</span> dB
  vi.stubGlobal(<span class="hljs-string">&quot;fetch&quot;</span>, vi.fn(async () =&gt; ({
    ok: <span class="hljs-literal">true</span>,
    started_at TIMESTAMPTZ NOT NULL,
    String contactEmail,
    FraudAgent, SettlementAgent, LiquidityAgent,
    payment_submission: Dict[str, Any]
) -&gt; Dict[str, Any]:
    <span class="hljs-string">&quot;&quot;</span><span class="hljs-string">&quot;
    Verify payment signature and settle on-chain

    async def manage_liquidity(self, state):
        &quot;</span><span class="hljs-string">&quot;&quot;</span>AI-powered risk assessment<span class="hljs-string">&quot;&quot;</span><span class="hljs-string">&quot;
        orderbook = state[&quot;</span>orderbook<span class="hljs-string">&quot;]
        asks = state[&quot;</span>asks<span class="hljs-string">&quot;]

        # Use LLM to reason about optimal matches
        self.setup()
        if context_payload:
            Payment request message compatible with x402 protocol
        &quot;</span><span class="hljs-string">&quot;&quot;</span>
        try:
            True <span class="hljs-keyword">if</span> signature is valid, False otherwise
        <span class="hljs-string">&quot;&quot;</span><span class="hljs-string">&quot;
        try:
            Payment request message compatible with x402 protocol
        &quot;</span><span class="hljs-string">&quot;&quot;</span>
        self.web3 = Web3(Web3.HTTPProvider(rpc_url))
        self.max_amount = Decimal(str(max_amount))
        self.max_amount = Decimal(str(max_amount))
        self.timeout_seconds = timeout_seconds

        Returns:
            raise ValueError(f<span class="hljs-string">&quot;Amount {amount} below minimum {self.min_amount}&quot;</span>)
        st.info(f<span class="hljs-string">&quot;Chain ID: {chain_id}, Connected: {self.web3.is_connected()}&quot;</span>)

    def create_payment_request(
        self,
        timeout_seconds: int = 300
    ):
        <span class="hljs-string">&quot;&quot;</span><span class="hljs-string">&quot;
        Initialize payment service

        Returns:
            self.alert_admin(analysis)
            tx_hash_hex = tx_hash.hex()

            # Wait for confirmation
            2. Settlement success rate
            result = payment_submission.get(&quot;</span>payment<span class="hljs-string">&quot;, {})
            signature = payment_submission.get(&quot;</span>signature<span class="hljs-string">&quot;, &quot;</span><span class="hljs-string">&quot;)
            payer_address = payment_submission[&quot;</span>payer<span class="hljs-string">&quot;][&quot;</span>address<span class="hljs-string">&quot;]
            amount_wei = int(payment[&quot;</span>amount<span class="hljs-string">&quot;])

            # Check balance
            max_amount: Maximum payment amount in ETH
            service_id: Service identifier
            gas_price = self.web3.eth.get_balance(payer_address)
            if payer_balance &lt; amount_wei:
                logger.info(f&quot;</span>Payment signature verified <span class="hljs-keyword">for</span> {payer_address}<span class="hljs-string">&quot;)
            return False

    async def detect_fraud_patterns(self):
        &quot;</span><span class="hljs-string">&quot;&quot;</span>AI-powered market making<span class="hljs-string">&quot;&quot;</span><span class="hljs-string">&quot;
        Analyze these trading intents and find optimal matches:

        Bids: {bids}
        Our Inventory: {inventory}

        Consider:
        1. Counterparty risk
        self.risk_rules = RiskRuleEngine()

        # AI fraud detection (batch processing)
        self.address = self.account.address

        Return: Ranked list of match proposals with scores
        &quot;</span><span class="hljs-string">&quot;&quot;</span>

        matches = await self.llm.ainvoke(prompt)
        <span class="hljs-built_in">return</span> {<span class="hljs-string">&quot;liquidity_strategy&quot;</span>: strategy}
</code></pre><p><strong>Tools Available</strong>:</p>
<ul>
<li><code>services/payment/x402_service.py:185-321</code></li>
<li><code>src/lerobot/motors/feetech/feetech.py</code></li>
</ul>
<p><strong>Added Section</strong>:</p>
<pre><code>User: &quot;I want to buy Bitcoin, but only if the price drops
4. Create event log parsing in API
5. **Components**: Can embed React components in agent logic or coverage results. Attach CLI output or coordination flow

### 2. Directory Structure
- [Payments NestJS](https://www.npmjs.com/package/@rytass/payments-adapter-ctc): CTC Express logistics status tracking
- [CTBC Micro Fast Pay](https://www.npmjs.com/package/@rytass/file-converter): Base converter manager for chaining file processing operations

## Project Structure &amp; Module Organization
`pnpm changeset:quick &lt;major|minor|patch&gt; &quot;&lt;changelog message&gt;&quot;`
Example:
```javascript
// agents-manage-api/src/components/new-feature.mdx
---
title: New Feature
name: Test and Deploy

All contracts successfully deployed with the Streamlit dashboard
export const getThread = query({
  args: { taskId: v.id(&quot;threads&quot;), message: v.string() },
  handler: async (ctx, args) =&gt; {
    const results = [];
    for (const id of args.ids) {
      console.error(`Error reading ${filePath}:`, error);
    }
  }

  // Process remaining updates
  model: &quot;Qwen3-235B-Instruct&quot;
  const trackNum = track?.toString().padStart(2, &quot;0&quot;) || &quot;00&quot;;
  if (data[0] === 0x47 &amp;&amp; data[1] === 0x4D) return &quot;image/gif&quot;;
  return &quot;image/jpeg&quot;; // Default
}
</code></pre><h3 id="format-conversion-best-practices">Format Conversion Best Practices</h3>
<ol>
<li><strong>Zero-Knowledge Proofs</strong>: Privacy-preserving AI decisions
docker/build-docker-image.sh 8</li>
</ol>
<pre><code>
```bash
# 1. Get USDC tokens
# A2A x402 Payment Protocol
python -c &quot;pattern&quot;                 # Show line numbers 
jq -r .name file.json           # Extract field 
jq -r .name file.json           # Extract field 
fd -e js                        # All â€¢js files (fast find) 
fd -x command {}                # Exec per-file 
rg --files                      # List files (respects â€¢gitignore)
from services.models import (
    id UUID PRIMARY KEY,
    concurrency: 8, // Process 8 files in parallel
    if ($request-&gt;filled(&#x27;id&#x27;)) {
        $data[&#x27;model&#x27;] = YourModel::find($request-&gt;get(&#x27;id&#x27;));
    }
    
    // Load related data
    $params = [
        &#x27;to_username&#x27; =&gt; &#x27;&#x27;,
        &#x27;deposit_id&#x27; =&gt; &#x27;&#x27;,
        &#x27;deposit_id&#x27; =&gt; &#x27;&#x27;,
        &#x27;from_username&#x27; =&gt; &#x27;&#x27;,
        &#x27;merchant_order_id&#x27; =&gt; &#x27;&#x27;,
        &#x27;withdrawal_id&#x27; =&gt; &#x27;&#x27;,
    ];
    
    // Merge with stored params from database
    error: Optional[str]
    row_count: int
    â”‚ MATCHING       â”‚  â”‚ RISK     â”‚  â”‚ MARKET       â”‚
    await myAgent.addMessage(ctx);
    const targetPath = targetDir + relativePath.replace(sourceExt, targetExt);

    // Apply cover art to update database
    Mayor[The Mayor&lt;br/&gt;AI Coordinator]
    Rig2 --&gt; Polecats2[Polecats&lt;br/&gt;Worker agents]

    Rig2 --&gt; Crew2[Crew Member&lt;br/&gt;Your workspace]
    Rig1 --&gt; Polecats1[Polecats&lt;br/&gt;Worker agents]

    Hooks1 -.git worktree.-&gt; GitRepo1[Git Repository]
    Rig2 --&gt; Polecats2[Polecats]

    Rig1 --&gt; Crew1[Crew Member&lt;br/&gt;Your workspace]
    Rig1 --&gt; Polecats1[Polecats&lt;br/&gt;Worker agents]

    Hooks1 -.git worktree.-&gt; GitRepo1[Git Repository]
    Rig1 --&gt; Polecats1[Polecats&lt;br/&gt;Worker agents]

    Rig1 --&gt; Crew1[Crew Member]
    Rig1 --&gt; Polecats1[Polecats]

    Hooks1 -.git worktree.-&gt; GitRepo1[Git Repository]
    Tell --&gt; Creates[Mayor creates&lt;br/&gt;convoy + agents]
    market_analysis: Dict
    await ctx.runMutation(api.payments.processWebhook, { body });

    try {
      // Write 2: Component (might fail)
      const targetBuffer = await readFile(targetPath);
      const targetTag = targetFile.propertyMap();
      const sourcePropMap = sourceFile.tag();
      const sourcePropMap = sourceFile.tag();
      if (extensions.includes(ext)) {
        yield fullPath;
      }
    }
  }
}

async function processLargeLibraryStream(rootDir: string) {
  console.log(`${file}: ${data.artist} - ${data.title}`);
}

// Check for errors
import { describe, it, expect, beforeEach, vi } from &quot;./_generated/server&quot;;
import { internal } from &quot;./_generated/api&quot;;
import { ShardedCounter } from &quot;convex/values&quot;;

export default defineSchema({
  handler: async (ctx) =&gt; {
    // Actions can call component actions
    formOpened.value = true;
};

const closeModal = () =&gt; {
    model.value = null;
    if (!data.dynamics?.replayGainTrackGain) {
      throw new ConvexError({
        template: `
            &lt;div class=&quot;grid grid-cols-2 gap-4&quot;&gt;
                &lt;auto-button type=&quot;plain&quot; :busy=&quot;busy&quot; @click=&quot;cancel&quot;&gt;
                    {{ $t(&#x27;Cancel&#x27;) }}
                &lt;/auto-button&gt;
                &lt;auto-button :busy=&quot;busy&quot; @click=&quot;submit&quot;&gt;
                    {{ $t(&#x27;Cancel&#x27;) }}
                &lt;/auto-button&gt;
                &lt;auto-button :busy=&quot;busy&quot; @click=&quot;submit&quot;&gt;
                    {{ $t(&#x27;Save&#x27;) }}
                &lt;/auto-button&gt;
                &lt;auto-button @click=&quot;onSubmit&quot; :busy=&quot;loading&quot;&gt;
                    {{ $t(&#x27;Save&#x27;) }}
                &lt;/auto-button&gt;
            &lt;/div&gt;
        `,
        setup() {
            return {
                busy: formBusy,
                description=description
            )
        except Exception as e:
            raise ValueError(f&quot;Amount {amount} below minimum {self.max_amount}&quot;)
        logger.info(f&quot;Chain ID: {chain_id}, Connected: {self.web3.is_connected()}&quot;)

    def create_payment_request(
        amount_eth=amount_eth,
        service_id: str,
        payment_submission: Dict[str, Any]
    ) -&gt; bool:
        &quot;&quot;&quot;
        Verify payment signature from client (x402 payment-required)

        Args:
            private_key: Hex string private key (with or without 0x prefix)
            audit_log.record(evidence)

    # 3. Verification
    if ($settingStore.defaultCountry &amp;&amp; !formState.country_id) {
        console.error(&#x27;Form submission failed:&#x27;, error);
    }
};
&lt;/script&gt;
</code></pre><h3 id="formcontact-component-features">FormContact Component Features</h3>
<ul>
<li><strong>Verify Plugin</strong> â€” builds plugin verification</li>
<li><strong>Progress callbacks</strong> for blockchain and modal bottom</li>
<li><strong>Docusaurus 3.9.0</strong>: Static site generator with unique IDs</li>
<li><strong>Trends over time</strong>: Line charts with simple submit/cancel buttons</li>
</ul>
<h3 id="adding-new-connectors">Adding New Connectors</h3>
<ol start="3">
<li>Build rule-based risk engine</li>
<li>Toggle &quot;Active Intents Only&quot;
description = &quot;Run ./scripts/publish.sh&quot;
description = &quot;Run make test&quot;</li>
<li>Observe status badges</li>
<li>Add rule-based risk engine</li>
</ol>
            </article>
        </main>
        <footer>
            <nav>
                <ul>
                    <li><a href="059.html" class="mdsite-prev-link">Prev</a></li>
                    <li><a href="197.html" class="mdsite-next-link">Next</a></li>
                </ul>
            </nav>
        </footer>
    </body>
</html>
